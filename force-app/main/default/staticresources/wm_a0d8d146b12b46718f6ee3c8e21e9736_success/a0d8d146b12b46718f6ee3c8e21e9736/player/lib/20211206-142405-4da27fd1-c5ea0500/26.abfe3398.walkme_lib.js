window,window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[26],{1189:function(t,e,r){var n=_walkmeInternals.ctx,a=n.get("PlatformDI"),i=n.get("Consts");n.register("TutorialsManager").asCtor(r(2369).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),n.register("WalkthrusModule").asCtor(r(2370)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),n.register("StepRetriever").asCtor(r(2371)).dependencies("WalkthrusContainer"),n.register("WalkthruOnBeforeUnloadHandler").asCtor(r(2372)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),n.register("WalkthrusContainer").asCtor(r(2373)),n.register("CurrentWalkthruData").asCtor(r(2374)).dependencies("WalkthrusContainer, Consts"),n.register("CurrentStepUI").asCtor(r(2375)).dependencies("CurrentWalkthruData, StepUtils"),n.register("WalkthruStatePersister").asCtor(r(2376)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),n.register("WalkthruStateRestorer").asCtor(r(2377)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),n.register("WalkthruStepsLoader").asCtor(r(2378)).dependencies("DataFixer, CommonUtils, StepUtils,SiteConfigManager, WalkthrusContainer"),n.register("WalkthruBranchPlayer").asCtor(r(2379)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),n.register("WalkthruApi").asCtor(r(2380)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),n.register("WalkthruLegacyExternalApi").asCtor(r(2381)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),n.register("WalkthruBranchData").asCtor(r(2382)),n.register("WalkthruBalloonButtonsEventsBinder").asCtor(r(2383)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),n.register("WalkthruBalloonNotifier").asCtor(r(2384)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),n.register("WalkthruPopupNotificationsService").asCtor(r(2385)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),n.register("StepUtils").asCtor(r(2386)).dependencies("Consts"),n.register("WalkthruSurveyActivator").asCtor(r(2387)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),n.register("WalkthruSafeStartHandler").asCtor(r(2388)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),n.register("WalkthrusSiteConfigDataMigrator").asCtor(r(2389)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),n.register("DataFileWalkthruDataAppender").asCtor(r(2390)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),n.register("EndUserWalkthruDataConverter").asCtor(r(2391)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),n.register("WalkthrusDestroyer").asCtor(r(2392)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),n.register("WalkthruJawsAccessibilityUtil").asCtor(r(2393)).dependencies("StepUtils, JawsAccessibilityUtil"),n.register("WalkthruEventDataAppender").asCtor(r(2394)).dependencies("CurrentWalkthruData"),n.register("WalkthruEventsInitializer").asCtor(r(2395)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),n.register("WalkthruStartFailureHandler").asCtor(r(2396)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),n.register("WalkthruActionsFactory").asCtor(r(2397)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),n.register("WalkthruRedirectService").asCtor(r(2398)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),n.register("TriggersManager").asCtor(r(2399)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),n.register("BackButtonUtils").asCtor(r(2400)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),n.register("PlayManager").asCtor(r(2401)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),n.register("BBCodeWalkthruActivator").asCtor(r(2402)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),n.register("BBCodeWalkthruSurveyActivator").asCtor(r(2403)).dependencies("CurrentWalkthruData, BBCodeDeployables, RunningDeployablesStopper, InitiatorTypeToAppTypeMapper,Consts"),n.register("WalkthruPopupStepElementFinderExtension").asCtor(r(2404)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthruActionStepElementFinderExtension").asCtor(r(2405)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthrusModuleInitializer").asCtor(r(2406)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, WalkthruAutoStartHelper"),n.register("WalkthruOwnershipManager").asCtor(r(2407)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),n.register("PassOwnershipNextStepProvider").asCtor(r(2408)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),n.register("WalkthruPassOwnershipDeterminator").asCtor(r(2409)).dependencies("Consts"),a.register([i.PLATFORM.Web,i.PLATFORM.MobileWeb,i.PLATFORM.Desktop],function(){n.register("WalkthruAutoStartHelper").asCtor(r(2410)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),n.register("WalkthruPersistenceDataRetriever").asCtor(r(2411)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),n.register("WalkthruRunningState").asCtor(r(2412)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),n.register("AnchorTagsFixer").asCtor(r(2413)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),n.register("WalkthruConditionEvaluator").asCtor(r(2414)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),n.register("WalkthruConditionFunctions").asCtor(r(2415)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),n.register("AuditWtsManager").asCtor(r(2416)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper"),n.register("AuditStepsManager").asCtor(r(2417)).dependencies("Logger,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator"),n.register("WalkthruActionClickedEventBinder").asCtor(r(2418)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),n.register("WalkthruStepShowerButtonsCalculator").asCtor(r(2419)).dependencies("ArrayUtils, SharedConsts"),n.register("WalkthruStepShower").asCtor(r(2420)).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper,BalloonDrawerProvider, SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),t.exports={init:function(){var t=n.get("IsInEditor"),e=n.get("AuditSourceProvider");n.get("WalkthrusModuleInitializer")[t.get()&&!e.isInPreviewMode()?"postDataFileLoaded":"init"]()}}},2369:function(t,e,r){"use strict";r.r(e),r.d(e,"TutorialsManager",function(){return a});var n,e=r(0),r=r(39),a=(n=r.DeployablesManager,Object(e.__extends)(i,n),i.prototype.activateById=function(t,e){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})},i.prototype.autoStartEnabled=function(){return!this.permalinkManager.isTrainingInStartingMode()},i);function i(t,e,r){return(e=n.call(this,{deployables:[],lib:t,type:e.DEPLOYABLE_TYPE.Tutorial})||this).permalinkManager=r,e._name="Walkthru",e}},2370:function(t,e,r){!function(Tt){t.exports=function(I,r,f,k,_,A,m,e,C,W,n,y,v,P,N,x,l,g,T,t,R,w,L,O,U,M,b,s,B,h){var D=this;D.setTutorials=function(t){i={};for(var e=0;e<t.length;e++)t[e].Steps&&r.fixSteps(t[e],f.get());k.setWalkthrus(t)},D.isTutorialPackageHidden=function(t){return!!(t=H.tutorialRunSettingsMap[t.TutorialId])&&t.isPackageHidden},D.canShowTutorial=function(t){if(0==t.IsVisible)return!1;for(var e,r=p(t,u.URL),n=!1,a=0;a<r.length;a++)if((e=r[a]).Type===u.URL?s.isLocationMatchString(e.Content):void A.error(new Error("Invalid condition type: "+e.Type))){n=!0;break}if(0<r.length&&!n)return!1;if(1==_.getSettingsValue(t.Settings,"DOCTEnabled",0)){var i=_.getSettingsValue(t.Settings,"DOCT","");if(""!=i)try{var o=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(i);if(C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.WtConditionEvaluated,t),!o)return C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(t){}}return 0<p(t,u.FIRST_STEP_MUST_EXIST).length?0!=t.Steps.length&&(o=t.Steps[0],A.customerLog('First Step Condition for "'+(o.StepTitle||o.StepText)+', Walk-Thru "'+t.Name+'"'),I.findElement(o)):(C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.CanShowWt,t),!0)},D.stopTutorial=function(t,e,r){C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.WalkthruStopped,N.getCurrentStep()),d(),r||M.releaseBalloons(),N.state=m.WALKTHRU_STATE.NOT_RUNNING,T.removeOverlay(),r=N.currentStep,N.currentStep=-1,t||x.storeStateInCookie(),_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset(),e||S(N.getCurrentWalkthru(),r,m.SURVEY_START_EVENTS.WalkThruExited)},D.startNewTutorial=function(u,p,c,d){var S=k.getWalkthruByIndex(u);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(S&&S.TutorialId,function(){try{A.customerLog("startNewTutorial : Index = "+u+". From Step = "+p+" testMode: "+c),T.fixFlash(),Y(u);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=d,p=W.defaultValue(p,0),c=W.defaultValue(c,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!c){if(N.state!=m.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(u,p))return!0;q(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||Z(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.WalkthruStarted,S);var e,r=[],n=p,a=0==(p=_walkmeInternals.ctx.get("PlayManager").findFirstStep(u,p,r));if(0<p&&!c?(e=g.get())==m.SOURCES.play||e==m.SOURCES.preview?Q(u,n,p,m.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,et(u,0,p,m.STEP_STATUS.SkippedStartedFromBiggerStep)):0==p&&0<(p=X(u))&&!c&&(t=!0,et(u,0,p,m.STEP_STATUS.SkippedByTutorialCondition)),!z(u,!1)&&p<0){if(c)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(S.TutorialId);var i={tutorialIndex:u,wt:S,checkStepExistsTrace:r};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(h,S,i)){for(var o=0;o<r.length;o++)_walkmeInternals.ctx.get("AuditStepsManager").auditStep(S,S.Steps[r[o].stepIndex],r[o].stepStatus),Q(u,r[o].stepIndex,r[o].stepIndex+1,r[o].stepStatus);var s=r[r.length-1].stepIndex,l=S;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(l,s),q()}}else{if(c)return!0;J(u,p,a,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:void 0,d,n)}}catch(t){return A.error(t),!1}return C.deprecatedRaiseEvent("WtHasGuid",S,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),C.raiseEvent(m.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0})},D.tutorialFinished=rt,D.executeTutorialNextStep=nt,D.postWelcomeStep=dt,D.executeCurrentStep=gt,D.executePreviousStep=function(){N.state=m.WALKTHRU_STATE.RUNNING,M.releaseBalloons(function(){D.stepWasCompleted(!1),N.currentStep=N.lastBackButtonStepIndex-1,D.executeTutorialNextStep()})},D.getAction=V,D.getSiteConfigByTutorialId=function(t){return t=H.tutorialRunSettingsMap[t]?H.tutorialRunSettingsMap[t].siteConfig:f.get()},D.isTutorialIdsExist=function(t){return t=e.map(t,k.getWalkthruIndexByWalkthruId),null==(t=e.inArray(-1,t))||-1==t},D.isStepTrigger=j,D.terminateTutorial=function(){N.stepPlayStack=[],M.releaseBalloons(),d(),C.raiseEvent("WalkthruAborted")},D.checkTutorialSkipFirstStepCondition=X,D.fillMissingStepAudits=et,D.getNextStepIncludingSplit=it,D.releaseEvents=st,D.stepWasCompleted=ut,D.getPlayConditionMode=ct,D.checkPlayStepCondition=function(t){var e=_.getSettingsValue(t.Settings,"skipStepCond","");if(0<e.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(e)}catch(t){return!0}if(1!=_.getSettingsValue(t.Settings,"PSCTEnabled",0))return!O.isActionStep(t)||"never"!=_.getSettingsValue(t.Settings,"whenToFire","");if(""==(e=_.getSettingsValue(t.Settings,"PSCT","")))return!0;try{var r=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(e);return C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),r}catch(t){return!1}},D.executeTutorialStep=ot,D.checkIfStepExistsWithSkippables=St,D.isStepPlayable=function(t,e){return St(t,e,void 0,void 0,void 0,m.CHECK_STEP_MODE.Normal)==e},D.checkTutorialRedirectCondition=z,D.loadTutorial=J,D.releaseBalloonsTimeouts=d,D.resetState=q,D.cleanCurrentStepResources=function(){if(o){for(var t=o.length-1;0<=t;t--)o[t].cleanResources();o=[]}},D.addCurrentStepResource=function(t){o.push(t)},D.setMember=function(t,e){H[t]=e},D.removeCrossUsersState=Z,D.getMatchedSurvey=tt,D.getWalkthruSurveyFrequency=$;var H={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},u={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},a="PSCTMode";var E="stepCheck",i={},F=[],G=!1,K=0,o=[];function V(t){if(null!=i[t.Id])return i[t.Id];var e=_.getSettingsValue(t.Settings,"action",null);return e?(i[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(e.actionType,e.arguments,m.STEP_PLAY_INITIATOR_ENUM.STEP,t),i[t.Id]):(A.customerLog("No action core. aborting..."),null)}function Y(t){t=k.getWalkthruByIndex(t),!H.tutorialRunSettingsMap[t.TutorialId]||(t=H.tutorialRunSettingsMap[t.TutorialId].siteConfig)&&f.set(t)}function j(t,e){if("number"==typeof t)return t==e;for(var r=t.split(","),n=0;n<r.length;n++)if(e+""==r[n])return!0;return!1}function Q(t,e,r,n){for(var a,i=e;i<r;i++)n!=m.STEP_STATUS.SkippedByActionStep&&(a=k.getWalkthruByIndex(t),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.NewSkippedStep,a.Steps[i]))}function p(t,e){var r=Array();if(!t.Conditions)return r;for(var n=0;n<t.Conditions.length;n++)t.Conditions[n].Type==e&&(null!=t.Conditions[n].IsEnabled&&1!=t.Conditions[n].IsEnabled||r.push(t.Conditions[n]));return r}function X(t){for(var e=p(k.getWalkthruByIndex(t),u.SKIP_FIRST_STEP),r=0;r<e.length;r++){var n=e[r];if(s.isLocationMatchString(n.Content)){var a=(a=n.ExtraData)?a-1:1;return A.customerLog("The walk-thru has a skip step condition ("+n.Content+") which is true. Skipping to: "+a),a}}return 0}function z(t,e){return 0!=(t=p(k.getWalkthruByIndex(t),u.REDIRECT)).length&&(t=(t=t[t=0]).Content,e?n.redirect(t):n.canRedirect(t))}function J(t,e,r,n,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),N.stepAppearanceIndex=0;var o=k.getWalkthruByIndex(t);C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.WalkthruLoaded,o),Y(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),n=W.defaultValue(n,l.generateNewPlayGuid(o.TutorialId)),r=W.defaultValue(r,!0),e=W.defaultValue(e,0);var s=null==i?e:i;c(t,e=0===e?X(t):e,n,a,[],[],[]);try{a=a||{type:m.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,s,e,n)}catch(t){A.error(t)}g.get()!=m.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,n),dt(t)}catch(t){A.error(t)}}function c(t,e,r,n,a,i,o){d(),M.releaseBalloons(),N.state=m.WALKTHRU_STATE.RUNNING,N.currentWalkthru=t,N.currentStep=e-1,N.stepPlayHistory=a,N.stepPlayStack=i,N.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=r,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=n,x.storeStateInCookie()}function d(){y.stopTimeoutsArray("playTimeouts"),H.executeTutorialNextStepNotFinished=!1}function S(t,e,r){var n,a,i;t&&t.Settings.survey&&(n=t.Settings.survey.surveyId,(a=$(t.Settings.survey,r))&&(i={objectId:t.Id,type:m.STEP_PLAY_INITIATOR_ENUM.WALKTHRU},_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,r,i,n,a,void 0,e)))}function q(t,e){N.currentWalkthru=-1,N.state=m.WALKTHRU_STATE.NOT_RUNNING,N.currentStep=-1,N.splitPointStack=[],N.stepPlayHistory=[],N.stepPlayStack=[],N.stepCompletedHistory=[],N.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",H.executeTutorialNextStepNotFinished=!1,i={},H.dontContinueTutorial=!1,G=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),e||x.storeStateInCookie()}function Z(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),e=0;e<t.length;e++){var r=t[e];_walkmeInternals.ctx.get("ClientStorageManager").removeData(m.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,r)}}function $(t,e){return(e=tt(t,e))&&(e.repeat||"visit")}function tt(t,e){if(t.startCondition==e||t.startCondition==m.SURVEY_START_EVENTS.Both)return t}function et(t,e,r,n){for(var a=e;a<r;a++){var i=k.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],n)}}function rt(t){M.releaseBalloons(),N.state=m.WALKTHRU_STATE.NOT_RUNNING,x.storeStateInCookie();var e=0<N.splitPointStack.length?N.splitPointStack.pop():null,r={hadSplit:!!e,finishAfterRefresh:!!t},t=N.getCurrentWalkthru();C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.WalkthruCompleted,t,r),T.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(t.TutorialId,m.DEPLOYABLE_TYPE.Tutorial),S(t,N.currentStep,m.SURVEY_START_EVENTS.WalkThruCompleted),e?(t=k.getWalkthruByIndex(e.tutorialIndex),C.deprecatedRaiseEvent("switchToWalkthru",t.Id),C.deprecatedRaiseEvent("BackFromBranch",t),c(e.tutorialIndex,e.stepIndex,e.playGuid,e.playInitiator,e.stepPlayHistory,e.stepPlayStack,e.stepCompletedHistory),I.executeTutorialNextStep()):(N.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership())}function nt(){A.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(at)}function at(){if(H.executeTutorialNextStepNotFinished)A.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(G)return G=!1,A.customerLog("executeTutorialNextStep: waiting for other window",5),A.customerLog("Waiting for other window..."),void function r(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData(),y.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),e=t.keysConfig.walkthru.waitForOtherWindow;1==t.getData(e.key,void 0,N.getCurrentWalkthru().userGuid)?(A.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(e.key,0,e.expiry,N.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):r()},500)}();var t;H.dontContinueTutorial?A.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5):N.getCurrentWalkthru().Steps.length-1!=N.currentStep?(H.executeTutorialNextStepNotFinished=!0,t=null==(t=it())?0:t.Delay,A.customerLog(W.formatString("Next step including split is: {0} seconds",t),5,m.LOG_FEATURES.BALLOON),y.playSetTimeout(function(){function t(){H.executeTutorialNextStepNotFinished=!1,gt()}N.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(N.getCurrentWalkthru().Id,function(){0<N.currentStep&&!j(N.getPreviousStep().End,m.WALKTHRU_STEP_TRIGGER.NOTHING)?M.releaseBalloons(t):t()})},1e3*t)):rt()}}function it(){return function t(e,r,n){var a,i=k.getWalkthruByIndex(e);return i.Steps.length>r+1?((a=i.Steps[r+1]).TutorialIndex=e,a):(a=N.splitPointStack).length>n?t((a=a[a.length-1-n]).tutorialIndex,a.stepIndex-1,n+1):null}(N.currentWalkthru,N.currentStep,0)}function ot(r){function t(t){A.customerLog(t,5,m.LOG_FEATURES.BALLOON)}var e=W.getTimer(t),n={};K!=r.Id&&N.stepAppearanceIndex++,r.playNumber=N.stepAppearanceIndex,K=r.Id,C.raiseEvent(m.EVENTS.Walkthrus.StepExecuting,{playNum:N.stepAppearanceIndex});var a=k.getWalkthruByIndex(N.currentWalkthru),a=W.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",r.StepIndex+1,r.StepTitle,a.Name);A.customerLog(a),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepStarted,r),w.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),N.state!=m.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&N.state!=m.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&N.state!=m.WALKTHRU_STATE.WAITING_FOR_CONDITION&&(T=O.isActionStep(r)?m.STEP_STATUS.Shown:m.STEP_STATUS.SupposedToShow,_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,T));a=ct(r);if(!(T=D.checkPlayStepCondition(r))&&(a==m.playConditionModes.PLAY_CONDITION||a==m.playConditionModes.BOTH&&N.state!=m.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return A.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.SkippedByCondition),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepSkipped,r),void nt();if(pt(r)){if(-1==(a=St(N.currentWalkthru,r.StepIndex,0,1,void 0,m.CHECK_STEP_MODE.Normal)))return A.customerLog("Keep looking for element after popup."),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.LookingForStepElement,r,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),N.state=m.WALKTHRU_STATE.WAITING_FOR_ELEMENT,y.playSetTimeout(function(){gt()},500),void x.storeStateInCookie();if(-2==a||-5==a)return A.customerLog(a=-5==a?"Loop detecetd":"Play condition isn't met, skipping the popup."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.SkippedNotFound),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepSkipped,r),void nt()}var i,o,s,l,u,p,c=void 0;if(T||N.state!=m.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(E={},h=W.getTimer(t),A.customerLog("Step - Play Condition"),c=I.findElement(r,null,E,void 0,void 0,{type:m.ELEMENT_OWNER_TYPE_NAMES.STEP,id:r.Id,stickyType:r.Settings.sticky,owner:{type:m.ELEMENT_OWNER_TYPE_NAMES.WT,id:N.getCurrentWalkthru().Id}}),n.FETime=h("Done looking for sticky step named "+(r.StepTitle||r.StepText)+" with id "+K),r.Score=E.score):(A.customerLog("Sticky PlayCondition isn't met."),c=!1),c){!0!==c&&(A.customerLog("Element found:"),A.customerLog(c),(S=U.getComplexHtmlElements(r,c))&&(c=S.elements,p=S.parentElement)),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepElementFound,r),C.raiseEvent("BeforeNewStepShown");var d,S,g,T,h=(T=0<N.stepPlayStack.length?N.stepPlayStack[N.stepPlayStack.length-1]:null)?R.getStepById(T).StepIndex:null,E=r.Id;if(N.stepPlayHistory.push(E),(0<N.stepPlayStack.length?N.stepPlayStack[N.stepPlayStack.length-1]:null)!=E&&N.stepPlayStack.push(E),_.getSettingsValue(r.Settings,"fake",!1))return A.customerLog("This is a fake step. Continue to next step."),x.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.FakeFound),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.FakeStep,r),void nt();N.state=m.WALKTHRU_STATE.RUNNING,O.isActionStep(r)?y.playSetTimeout(function(){V(r).doAction(),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepPerforming,r)},100):(S={type:m.ELEMENT_OWNER_TYPE_NAMES.step,id:r.Id,owner:{type:m.ELEMENT_OWNER_TYPE_NAMES.WT,id:N.getCurrentWalkthru().Id}},T=_walkmeInternals.ctx.get("TriggersManager").handle(c,r,N.currentStep,N.currentWalkthru,h,S),d=T.executeNextStep,E=T.clearElementEventsFuncs,h=T.buttons,_.getSettingsValue(r.Settings,"waitOtherWindow",!1)&&(G=!0),n.logicTime=e("Finished pre-balloon logic"),S=r.StepTitle,T=r.StepText,(e=r).DesignTemplateId||e.DesignTemplatePlaceholderConfigs&&0!=e.DesignTemplatePlaceholderConfigs.length||(r.DesignTemplatePlaceholderConfigs=B.createPlaceHolderConfigs(Tt.get("SharedConsts").templateEntityType.balloon,r.StepTitle,r.StepText)),(g=_walkmeInternals.ctx.create("Balloon",{element:c,parentElement:p,forceEmbedBalloonInIframe:!1,positionHelper:v,dontShowIoBalloon:!w.isFeatureEnabled("multSpot")&&(u=s=r,1<(p=N.stepPlayHistory).length&&(l=k.getWalkthruByIndex(N.currentWalkthru),u=R.getStepById(p[p.length-2],l)),j(s.End,m.WALKTHRU_STEP_TRIGGER.NOTHING)||j(u.End,m.WALKTHRU_STEP_TRIGGER.NOTHING)),isFirstStep:function(){var t=N.stepPlayHistory;if(t.length<2)return!0;for(var e=0;e<t.length-1;e++){var r=k.getWalkthruByIndex(N.currentWalkthru),r=R.getStepById(t[e],r);if(!W.isDefined(r.Settings.action))return!1}return!0}(),stepSettings:r.Settings,visibilityFilter:v.getVisibleFilterKey(r),text:{title:S,content:T,subText:(l=f.get().StepsInfoText,u=(s=lt()).totalVisibleSteps,s=s.passedVisibleSteps,l=w.isFeatureEnabled("floatingsubtext")?(l=l.replace("{0}",m.SUBTEXT_CURRENT_START+s+m.SUBTEXT_CURRENT_END)).replace("{1}",m.SUBTEXT_TOTAL_START+u+m.SUBTEXT_TOTAL_END):(l=l.replace("{0}",s)).replace("{1}",u))},end:r.End,position:r.Position,buttons:{next:h.nextButton,done:h.doneButton,back:0<=h.backButtonStepIndex},data:{balloonEntityId:r.Id,containerEntityId:r.TutorialId,type:r.Type},configuration:r.Configuration,logger:A,drawer:b.getBalloonDrawer(r.Configuration,r),siteConfig:f.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:r.DesignTemplatePlaceholderConfigs,placeholderVariableValues:lt(),initiatorData:{initiator:r,type:m.STEP_PLAY_INITIATOR_ENUM.STEP}})).onDestroy(function(){st(c,elementEvents)}),g.setReleaseEvents(E),P.add(g),x.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.Shown),w.isFeatureEnabled("jawsAccessibility")&&(E=S||T,S&&T&&(E+=". "+T),E&&c.attr("alt",E)),g.Show(!0,function(t,e){wmjQuery.extend(!0,n,t),t=e,C.raiseEvent(m.EVENTS.Walkthrus.ShowStepBalloon,{balloonDiv:t,step:r}),e={Element:c,Balloon:e},C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepShown,r,e),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepPerforming,r,e),g.SetTimeoutOn(function(){!function(){switch(N.state){case m.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case m.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case m.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return 1;default:return}}()||(W.getSettingsValue(N.getCurrentStep().Settings,"sticky",0)?(A.customerLog("Sticky - keep looking for element.",5),M.releaseBalloons(),N.state=m.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,gt()):N.getCurrentStep().IsSkippable?(H.dontContinueTutorial=!1,A.customerLog("Skippable - continue to next step."),nt()):N.state!=m.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(A.customerLog("Stopping walk-thru."),M.releaseBalloons(),N.state=m.WALKTHRU_STATE.PAUSED,C.raiseEvent("WalkthruAborted"),C.raiseEvent("WalkthruStopped")))}),d&&(ut(),nt())}),_.getSettingsValue(r.Settings,"isSelfExecuting",!1)&&(i=r,o=c,y.libSetTimeout(function(){var t;switch((t=i.End.split(/,/))[0]==m.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<t.length?W.getInt(t[1]):W.getInt(t[0])){case m.WALKTHRU_STEP_TRIGGER.CLICK:A.customerLog("Self Executed Step - Trigger: Click",3),L.click(o);break;case m.WALKTHRU_STEP_TRIGGER.HOVER:A.customerLog("Self Executed Step - Trigger: Hover",3),L.hover(o);break;case m.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:A.customerLog("Self Executed Step - Trigger: Text Input",3),L.text(o,i.Settings.selfExecuteText,void 0,void 0,i);break;case m.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var e=i.Settings.complexHtml&&i.Settings.complexHtml.val;e?(L.select(o,e),A.customerLog("Self Executed Step - Trigger: Select Value",3)):A.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:A.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),H.dontContinueTutorial=!1,nt()}},1e3*i.Settings.reactionTime||m.DEFAULT_REACTION_TIME)))}else A.customerLog("Element not found."),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepElementNotFound,r,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),N.state==m.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(A.customerLog("Step was sticky. Keep looking for the element."),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.WaitingForStickyStep,r),N.state=m.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,y.playSetTimeout(function(){gt()},500),x.storeStateInCookie()):r.IsSkippable||_.getSettingsValue(r.Settings,"skipNotExists",!1)?(O.isActionStep(r)?(A.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.NonValidActionStep)):(A.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.SkippedNotFound)),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepSkipped,r),nt()):(A.customerLog("Keep looking for the element."),C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.LookingForStepElement,r,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),N.state=m.WALKTHRU_STATE.WAITING_FOR_ELEMENT,y.playSetTimeout(function(){gt()},500),x.storeStateInCookie())}function st(t,e){for(var r=0;r<e.length;r++)t.unbind(e[r]+".mt");return!1}function lt(){for(var t,e=k.getWalkthruByIndex(N.currentWalkthru).Steps,r=0,n=0,a=0;a<e.length;a++)(t=e[a]).Type==m.STEP_TYPE.Action||parseInt(_.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(_.getSettingsValue(t.Settings,"fake",0))||(r++,a<=N.currentStep&&n++);return{totalVisibleSteps:r,passedVisibleSteps:n}}function ut(t){t=W.defaultValue(t,!0);var e,r=N.getCurrentStep();C.deprecatedRaiseEvent(m.EVENTS.Walkthrus.StepCompleted,r),N.stepCompletedHistory.push(r.Id),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.Performed),_.getSettingsValue(r.Settings,"resumeOtherWindow",!1)&&(t=(e=_walkmeInternals.ctx.get("ClientStorageManager")).keysConfig.walkthru.waitForOtherWindow,e.saveData(t.key,1,t.expiry,N.getCurrentWalkthru().userGuid))):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(N.getCurrentWalkthru(),r,m.STEP_STATUS.MovedBack)}function pt(t){return t.Type==m.STEP_TYPE.Popup&&1==_.getSettingsValue(t.Settings,"popup-play-condition",0)}function ct(t){return _.getSettingsValue(t.Settings,a,m.playConditionModes.PLAY_CONDITION)}function dt(t){-1==N.currentStep&&z(t,!0)||nt()}function St(l,u,p,c,d,S,g){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,e){return function(t){if(F&&0!=F.length){for(var e,r=[];0<F.length&&(e=F.pop()).id!=t;)r.push(e);if(0<r.length)for(;0<r.length;)F.push(r.pop())}}(e),A.customerLog("returned checking "+u+" ("+r.Id+") result: "+t,5,E),t}var e=k.getWalkthruByIndex(l),r=e.Steps[u];c=W.defaultValue(c,1),p=W.defaultValue(p,0);var n=function(t){for(var e=0;e<F.length;e++)if(F[e].id==t)return!0;return!1}(r.Id);if(A.customerLog("Checking if step index "+u+" ("+r.Id+") can be played. looped: "+n+" on mode:"+S,5,E),F.push({id:r.Id,mode:S}),n)return t(-5,r.Id);var a=!0;ct(r)!=m.playConditionModes.STICKY_CONDITION&&(a=D.checkPlayStepCondition(r));var i=_.getSettingsValue(r.Settings,"fake",!1),o=_.getSettingsValue(r.Settings,"skipNotExists",!1)||r.IsSkippable||!a||i,n=a,n=o?n?m.STEP_STATUS.SkippedNotFound:m.STEP_STATUS.SkippedByCondition:m.STEP_STATUS.SupposedToShow;if(d&&d.push({stepIndex:u,stepStatus:n}),a&&!i&&A.customerLog("Step - Find Element "+(g||"")),a&&!i&&I.findElement(r,void 0,void 0,void 0,void 0,{type:m.ELEMENT_OWNER_TYPE_NAMES.step,id:r.Id,stickyType:r.Settings.sticky,owner:{type:m.ELEMENT_OWNER_TYPE_NAMES.WT,id:e.Id}}))return O.isActionStep(r)?t(function(t){var e=V(t);if(e.getGoToData){var r=e.getGoToData();if((r=St(r.tutorialIndex,r.stepIndex,p,c,d,m.CHECK_STEP_MODE.Normal))<0)return r}else if("stopWt"==e.type)return-2;return t.StepIndex}(r),r.Id):O.isPopupStep(r)?t(function(t){if(!pt(t)||1!=c)return t.StepIndex;if(k.getWalkthruByIndex(l).Steps.length>t.StepIndex){var e=St(l,t.StepIndex+1,p,c,d,m.CHECK_STEP_MODE.Normal);return e<0?e:t.StepIndex}}(r),r.Id):t(u,r.Id);if(i=u+c,o){if(i<0)return t(-2,r.Id);if(i!=e.Steps.length)return A.customerLog("Checking if step "+u+" ("+r.Id+") can be played. Skipping to: "+i,5,E),t(s=St(l,i,p,c,d,m.CHECK_STEP_MODE.Normal),r.Id);if((i=N.splitPointStack).length>p){var s=St((i=i[i.length-1-p]).tutorialIndex,i.stepIndex,p+1,c,d,m.CHECK_STEP_MODE.Normal);return A.customerLog("Checking if step "+u+" ("+r.Id+") can be played. reached last step",5,E),t(s,r.Id)}return t(-2,r.Id)}return t(-1,r.Id)})}function gt(){var t=N.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){ot(t)})}_walkmeInternals.ctx.get("WmInternals").on(m.EVENTS.Flows.BeforeFlowStarted,function(){Z()})}}.call(this,r(2))},2371:function(t,e){t.exports=function(i){function r(t,e){return-1<(t=i.getWalkthruIndexByWalkthruId(t))&&(t=n(e,i.getWalkthruByIndex(t)))?t:null}function n(t,e){if(e)return o(t,e);for(var r=i.getWalkthrus(),n=0;n<r.length;n++){var a=o(t,r[n]);if(a)return a}return null}function o(t,e){for(var r=e.Steps,n=0;n<r.length;n++)if(r[n].Id==t)return r[n];return null}this.getStepByWalkthruAndStepIds=r,this.getStepById=n,this.getStepIndex=function(t,e){return(t=r(e,t))?t.StepIndex:-1}}},2372:function(t,e){t.exports=function(t,e,r,n,a,i,o){this.register=function(){o.register(l)};var s=!(this.setIgnoreNextBeforeUnload=function(t){s=t});function l(){i.isEmpty()&&(t.customerLog("onbeforeunload called",1),s?s=!1:(e.setMember("dontContinueTutorial",!0),r.pauseAllTimeouts(),n.get().enabled()?n.get().loseOwnership(!1,!0):a.isFeatureEnabled("noUnload")&&r.setWalkmeTimeout(function(){e.setMember("dontContinueTutorial",!1),r.resumeAllTimeouts()},3e3)))}}},2373:function(t,e){t.exports=function(){var t=this;t.getWalkthrus=function(){return n},t.setWalkthrus=function(t){n=t},t.getWalkthruByIndex=r,t.getWalkthruById=function(t){for(var e=0;e<n.length;e++)if(n[e].TutorialId==t)return n[e];return null},t.getWalkthruIndexByWalkthruId=function(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].TutorialId==t){e=r;break}return e},t.getStepByIndex=function(t,e){if((t=r(t))&&t.Steps[e])return t.Steps[e]};var n=[];function r(t){return n[t]}}},2374:function(t,e){t.exports=function(t,e){var r=this;function n(){return t.getWalkthruByIndex(r.currentWalkthru)}function a(t){var e=n();return e&&e.Steps&&e.Steps[t]}r.currentWalkthru=-1,r.currentStep=-1,r.stepAppearanceIndex=0,r.splitPointStack=[],r.stepPlayHistory=[],r.stepPlayStack=[],r.stepCompletedHistory=[],r.lastBackButtonStepIndex=-1,r.getCurrentWalkthru=n,r.getCurrentStep=function(){return a(r.currentStep)},r.getPreviousStep=function(){return a(r.currentStep-1)},r.getNextStep=function(){return a(r.currentStep+1)},r.getStep=a,r.state=e.WALKTHRU_STATE.NOT_RUNNING}},2375:function(t,e){t.exports=function(r,n){this.shouldKeepOverlay=function(){var t,e=r.getCurrentStep();return n.isSpotlightStep(e)&&n.isPopupStep(e)&&(t=r.getPreviousStep(),e=r.getNextStep(),n.isPopupStep(t)||n.isPopupStep(e))}}},2376:function(t,e){t.exports=function(c,d,r,n,S,g,T){this.storeStateInCookie=function(){var t,e,r,n=void 0,a=void 0,i=void 0,o=void 0,s=S.getCurrentWalkthru(),l=s?s.TutorialId:-1,u=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),p=d.getCurrentInteractionGuid();S.state==c.WALKTHRU_STATE.RUNNING||S.state==c.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(n=S.currentStep+1,s.Steps.length<=S.currentStep+1&&(a=1)):S.state==c.WALKTHRU_STATE.WAITING_FOR_SPLIT?(n=S.currentStep,i=g.splitTutorialIds,o=g.splitStartFromStepId):n=S.currentStep,t=n,e=a,r=i,s=o,n=p,(a={})[h.CURRENT_TUTORIAL_COOKIE_NAME]=l,a[h.CURRENT_STATE_COOKIE_NAME]=S.state,a[h.CURRENT_STEP_COOKIE_NAME]=t,a[h.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=S.stepAppearanceIndex,a[h.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,a[h.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,a[h.SPLIT_POINT_COOKIE_NAME]=S.splitPointStack,a[h.TUTORIAL_FINISHED_COOKIE_NAME]=e,a[h.STEP_PLAY_HISTORY_COOKIE_NAME]=S.stepPlayHistory,a[h.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=r,a[h.SPLIT_START_FROM_STEP_COOKIE_NAME]=s,a[h.INTERACTION_GUID_COOKIE_NAME]=n,T.raiseEvent("SavingPersistenceData",a),i=a,p=(o=_walkmeInternals.ctx.get("ClientStorageManager")).keysConfig.walkthru.persistenceData,o.saveData(p.key,i,p.expiry,u)},this.getPersistenceData=function(t){var e=i(t),t=a(e,-1),t={state:n.getInt(e[h.CURRENT_STATE_COOKIE_NAME],c.WALKTHRU_STATE.NOT_RUNNING),step:n.getInt(e[h.CURRENT_STEP_COOKIE_NAME],-1),playNum:e[h.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||S.stepAppearanceIndex,tutotrialGUID:e[h.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:e[h.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:n.defaultValue(e[h.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:n.defaultValue(e[h.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:n.defaultValue(e[h.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:n.defaultValue(e[h.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:r.getWalkthruIndexByWalkthruId(t),splitTutorialIds:n.defaultValue(e[h.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:n.defaultValue(e[h.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:e[h.INTERACTION_GUID_COOKIE_NAME]};return T.raiseEvent("GettingPersistenceData",{persistenceData:e,current:t}),t},this.getRunningWalkthruId=function(t){return a(i(t))};var h=c.WALKTHRU_PERSISTANCE_DATA_FIELDS;function a(t,e){return n.getInt(t[h.CURRENT_TUTORIAL_COOKIE_NAME],e)}function i(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(c.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}},2377:function(t,e){t.exports=function(r,o,s,l,u,p,c,d,S,g,T,h,E,I,n){function t(t){c.customerLog("Restoring cross user state",5);var e=n.getAllUserGuids();if(!e.length)return t&&t(),!1;for(var r=0;r<e.length;r++)a(e[r],t);return!1}function a(a,i){var t=g.getRunningWalkthruId(a);function e(){var t,t=(t=a,e=g.getPersistenceData(a),(t=o.getStepByIndex(e.tutorial,e.step))&&(e.isTutorialFinished||e.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&e.state!=h.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||d.getSettingsValue(t.Settings,"sticky",0)||t.IsSkippable||(c.customerLog("page change happened while waiting for element - pausing walkthru",2),e.state=h.WALKTHRU_STATE.PAUSED)),e);s.stepAppearanceIndex=t.playNum,s.splitPointStack=t.splitPointStack,s.stepPlayHistory=t.stepPlayHistory,s.currentWalkthru=t.tutorial,s.currentStep=t.step,s.stepCompletedHistory=t.stepCompletedHistory,s.state=t.state,S.raiseEvent("RestoringStateFromCookie",t),l.setCurrentInteractionGuid(t.interactionGuid),t.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=t.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=t.playInitiator;var e,r=o.getStepByIndex(s.currentWalkthru,s.currentStep);function n(){u.playSetTimeout(function(){p.executeCurrentStep()},1e3*r.Delay)}if((s.state==h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||s.state==h.WALKTHRU_STATE.PASSING_OWNERSHIP&&r)&&(s.currentStep--,(e=o.getStepByIndex(s.currentWalkthru,s.currentStep))&&(e.playNumber=s.stepAppearanceIndex),p.stepWasCompleted(!0),s.currentStep++),c.customerLog("isTutorialFinished: "+t.isTutorialFinished,5),1!=t.isTutorialFinished||s.state!=h.WALKTHRU_STATE.RUNNING&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&s.state!=h.WALKTHRU_STATE.PASSING_OWNERSHIP)if(c.customerLog("Continue from cookie: currentTutorial: "+s.currentWalkthru+" -- currentState: "+s.state+" -- currentStep: "+s.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+a,5),!r||s.state!=h.WALKTHRU_STATE.RUNNING&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_CONDITION&&s.state!=h.WALKTHRU_STATE.PASSING_OWNERSHIP)if(r&&s.state==h.WALKTHRU_STATE.WAITING_FOR_REDIRECT)p.loadTutorial(s.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(r&&s.state==h.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)p.startNewTutorial(s.currentWalkthru,s.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!r||s.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&s.state!=h.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(s.state==h.WALKTHRU_STATE.WAITING_FOR_SPLIT)E.splitTutorialIds=t.splitTutorialIds,E.splitStartFromStepId=t.splitStartFromStepId,T.resumeSplit();else{if(s.state!=h.WALKTHRU_STATE.PAUSED)return p.resetState(),c.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+a+")",5),i&&i(!1),!1;c.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),I.releaseBalloons(),p.releaseBalloonsTimeouts(),p.resetState(),S.raiseEvent("WalkthruAborted")}else d.getSettingsValue(r.Settings,"sticky",0)?(c.customerLog("Sticky - keep looking for element",5),s.state=h.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,n()):r.IsSkippable&&(s.getCurrentWalkthru().Steps.length==s.currentStep+1?p.tutorialFinished():(s.currentStep++,s.state=h.WALKTHRU_STATE.RUNNING,n()));else n();else p.tutorialFinished(!0);return i&&i(!0),!0}t?r.afterStepsLoaded(t,e):e()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=a}},2378:function(e,t,r){!function(t,S){e.exports=function(s,l,u,p,c){var r=this;r.LoadStepsForWT=function(t){return r.afterStepsLoaded(t,function(){})},r.afterStepsLoaded=function(e,t){if(a[e])return a[e].then(t,t);var i=c.getWalkthrus(),o=function(t){for(var e=c.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}(e);return i[o]&&0==i[o].Steps.length?(a[e]=new S(function(a,t){n.load(e).then(function(t){var e,r,n;0==i[o].Steps.length?(e=o,r=t,(n=c.getWalkthrus())[e].Steps=r,s.fixSteps(n[e],p.get()),function(t,e){for(var r=[],n=0;n<t.length;n++){var a,i=t[n];u.isBranchStep(i)&&(a=i.Settings.action.arguments.wtId,r.push(d(a))),r=r.concat(function(t){var e=[];if(t.LinkedTutorialIds)for(var r=t.LinkedTutorialIds.split(";"),n=0;n<r.length;n++)r[n]&&e.push(d(r[n]));return e}(i))}l.executeParallel({functionsToExecute:r,successCallback:e})}(t,a)):a()},t)}).then(t,t),!0):t()};var n,a={};function d(e){return function(t){a[e]?t():r.afterStepsLoaded(e,t)}}n=t.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"steps",fileNamePrefix:"wt"})}}.call(this,r(2),r(12))},2379:function(t,e){t.exports=function(i,o,s,l,u,p,c,d,S,g,T,h,E){function I(a){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var e;a=a||1e3;var t,r,n=0;1==h.splitTutorialIds.length?(r=h.splitTutorialIds[0],null!=h.splitStartFromStepId&&(-1!=(t=o.getStepIndex(h.splitStartFromStepId,r))&&(n=t),i.customerLog(E.formatString("Resuming split, walkthru id: {0}, step index: {1}",r,n)))):r=function(t){try{i.customerLog("Multiple branch: Going through all walk-thrus.");var e=(r=T.map(t,function(t){return l.getWalkthruById(t).Steps[0]}),r=T.map(r,function(t){var e,e=(e=t.TutorialId,(e=l.getWalkthruById(e))?e.Name:"");return i.customerLog("Check walk-thru: "+t.TutorialId+" ("+e+")"),(e=u.findElement(t))?i.customerLog("First step found."):i.customerLog("First step not found."),{step:t,element:e}}),r=T.filter(r,function(t){return t.element}),T.map(r,function(t){return t.step}));if(1==e.length)return e[0].TutorialId;if(!(1<e.length))return null;i.customerLog("can't decide which tutorial to play",5),i.customerLog(e.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(t){i.error(t)}var r}(h.splitTutorialIds),r?(c.deprecatedRaiseEvent("switchToWalkthru",r),e=l.getWalkthruIndexByWalkthruId(r),p.playSetTimeout(function(){var t={type:d.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:S.getCurrentStep().Id,appType:d.EVENT_SENDER_EVENT_APPS.Step};s.loadTutorial(e,n,!1,void 0,t)},a),g.storeStateInCookie()):(i.customerLog("Try again in 1000ms."),p.playSetTimeout(function(){I()},1e3))}catch(t){i.error(t)}})}this.makeSplit=function(t,e,r,n,a){S.state=d.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=r&&(e=e,S.getCurrentWalkthru().Steps.length<=S.currentStep+1||S.splitPointStack.push({tutorialIndex:S.currentWalkthru,stepIndex:null!=e?e:S.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:S.stepPlayHistory,stepCompletedHistory:S.stepCompletedHistory,stepPlayStack:S.stepPlayStack})),h.splitTutorialIds=t,h.splitStartFromStepId=n,g.storeStateInCookie(),s.stepWasCompleted(),I(a)},this.resumeSplit=I}},2380:function(t,e,r){!function(e){function h(t){return(h="function"==typeof e&&"symbol"==typeof e.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t})(t)}t.exports=function(o,u,s,i,l,p,c,t){var d=this;d.getWalkthrus=function(t){try{for(var e=o.getWalkthrus(),r=new Array,n=0;n<e.length;n++){var a=(a=e[n].CustomField1)&&(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"),i={Index:n,Name:e[n].Name,Id:e[n].TutorialId,Visible:e[n].IsVisible,CustomField1:a,Description:e[n].Description,Keywords:e[n].Keywords};t&&(i.ConditionsPassed=_walkMe.canShowTutorial(e[n]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(e[n]),null==e[n].Keywords?i.Keywords=[]:i.Keywords=e[n].Keywords),r.push(i)}return r}catch(t){S("walkMeAPI - error running getWalkthrus.",3)}},d.getWalkthrusLabels=function(t){try{var e=(l=p.getSettingsValue(u.get().Settings,"labels",null))&&1==l.useLabels?c.get():null;if(null==e)return null;for(var r=this.getWalkthrus(t),n=function(t,e){for(var r=[],n=0;n<t.length;n++)for(var a=t[n].LinkedTutorials,i=0;i<a.length;i++)r.push(a[i]);for(var o=[],n=0;n<e.length;n++)T(e[n].Id,r)||o.push(e[n]);return o}(e,r),a=u.get(),i=[],o=0;o<e.length;o++){var s={Name:e[o].Name,Id:e[o].Id,Walkthrus:function(t,e,r){for(var n,a=[],i=0;i<t.length;i++)T(t[i].Id,e)&&((n=mtjQuery.extend(!0,{},t[i])).labelId=r,a.push(n));return a}(r,e[o].LinkedTutorials,e[o].Id)};i.push(s)}return{unlabeledWalkthrus:n,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(t){S("walkMeAPI - error running getWalkthrusLabels.",3)}var l},d.startWalkthruById=function(t,e){try{var r=(t="object"!=h(t)?{id:t,fromStep:e}:t).id,n=t.fromStep,a=t.playInitiator;if(r<0||"number"!=typeof r)return!1;var i=g(r);return!(i<0)&&(a=a||{type:s.STEP_PLAY_INITIATOR_ENUM.API},d.startWalkthruByIndex({index:i,fromStep:n,playInitiator:a}))}catch(t){S("walkMeAPI - error running startWalkthruById.",3)}},d.startWalkthruByIndex=function(t,e){try{if(!i.isWalkMeVisible())return!1;var r=(t="object"!=h(t)?{index:t,fromStep:e}:t).index,n=t.fromStep,a=t.playInitiator;return!(r<0||"number"!=typeof r)&&(a=a||{type:s.STEP_PLAY_INITIATOR_ENUM.API},l.raiseEvent(s.EVENTS.ApiWasCalled,{initiator:a}),_walkMe.startNewTutorial(r,n,!1,a))}catch(t){S("walkMeAPI - error running startWalkthruByIndex.",3)}},d.canStartWalkthru=function(t,e){try{if(!i.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var r=g(t);return!(r<0)&&_walkMe.startNewTutorial(r,e,!0,s.STEP_PLAY_INITIATOR_ENUM.API)}catch(t){S("walkMeAPI - error running canStartWalkthru.",3)}},d.setWalkthruVisibility=function(t,e){try{var r=o.getWalkthrus(),n=g(t);return!(n<0)&&(r[n].IsVisible=e,!0)}catch(t){S("walkMeAPI - error running setWalkthruVisibility.",3)}},d.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(t){S("walkMeAPI - error running stopWalkthru.",3)}};var S=t.wrapCustomerLog("walkmeAPI");function g(t){for(var e=o.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}function T(t,e){for(var r=0;r<e.length;r++)if(e[r]==t)return 1}}}.call(this,r(28).wmSymbol)},2381:function(t,e){t.exports=function(a,t,e,r,i){var n=this;n.setTutorials=a.setTutorials,n.isTutorialPackageHidden=a.isTutorialPackageHidden,n.canShowTutorial=a.canShowTutorial,n.stopTutorial=a.stopTutorial,n.startNewTutorial=a.startNewTutorial,n.tutorialFinished=a.tutorialFinished,n.executeTutorialNextStep=a.executeTutorialNextStep,n.postWelcomeStep=a.postWelcomeStep,n.executeCurrentStep=a.executeCurrentStep,n.getCurrentTutorial=t.getCurrentWalkthru,n.getTutorials=e.getWalkthrus,n.setTutorialsForEditor=function(t,e){try{for(var r=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),n=0;n<r.length;n++)r[n].userGuid=e;a.setTutorials(r)}catch(t){i.error(t)}},n.getState=function(){return t.state},n.forceSplit=function(){r.makeSplit.apply(null,arguments)},n.runTutorialsActionConditions={}}},2382:function(t,e){t.exports=function(){this.splitTutorialIds=[],this.splitStartFromStepId}},2383:function(t,e){t.exports=function(n,a,i,o,e,s,l,u,p){function c(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){var e;e={ClickEvent:t},o.raiseEvent("UserStoppedWalkthru",e),(t=-1==n.currentStep)||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(n.getCurrentWalkthru(),n.getCurrentStep(),a.STEP_STATUS.Exited),i.stopTutorial(t),o.raiseEvent("UserStoppedWalkthruAfterStop",e)})}function d(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function S(t){for(var e,r=s.getAll(),n=0;n<r.length;n++)r[n].releaseEvents(t)&&(e=!0);return e}function g(t){return t.Type==a.STEP_TYPE.Popup&&t.LinkedTutorialIds&&i.isTutorialIdsExist(t.LinkedTutorialIds.split(";"))&&(e.makeSplit(t.LinkedTutorialIds.split(";")),1)}this.addButtonEventsToBalloon=function(t,e){var r;r=t,mtjQuery(".walkme-action-next, .walkme-action-start",r).click(function(){!function(){o.raiseEvent("NextButtonClicked");var t=n.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),d(t),S()||(n.state=a.WALKTHRU_STATE.RUNNING,l.releaseBalloons(function(){g(t)||(i.stepWasCompleted(),i.executeTutorialNextStep())}))}()}),mtjQuery(".walkme-action-back",r).click(function(){o.raiseEvent("BackButtonClicked"),d(n.getCurrentStep()),n.stepPlayStack.pop(),!u.isFeatureEnabled("backButtonAlways")&&S(n.lastBackButtonStepIndex-1)||i.executePreviousStep()}),mtjQuery(".walkme-action-done",r).click(function(){!function(){o.raiseEvent("DoneButtonClicked");var t=n.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),d(t),g(t)||S()||(i.stepWasCompleted(),i.tutorialFinished())}()}),c(t),p.addButtonEventsToBalloon(t,e)},this.attachBalloonXButtonClickEvent=c}},2384:function(t,e){t.exports=function(s,l,u,p,c,d,S,g,e,T,h){var E,I;this.showFailPopup=function(t,e,r,n){n+="<div style='float: right'>",n+=function(t,e){(e=s.fixConfiguration(e)).ButtonBorderColor=e.ButtonBorderColor||"#6c84a6";var r="rtl"==t.Direction?"right":"left";s.fixGradientColorsInConfiguration(e,"ButtonBgColor"),s.fixGradientColorsInConfiguration(e,"ButtonBgColor2");var n=e.ButtonBgColor,a=e.ButtonBgColor2,i=e.ButtonShadowWidth,o=e.BalloonButtonRadius,o="CSS-RESET "+((t=n!=a)?"background:-moz-linear-gradient(top, "+n+", "+a+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+n+"), color-stop(100%,"+a+"));background:-webkit-linear-gradient(top, "+n+" 0%,"+a+" 100%);background:-o-linear-gradient(top, "+n+" 0%,"+a+" 100%);background:-ms-linear-gradient(top, "+n+" 0%,"+a+" 100%);background:linear-gradient(to bottom, "+n+" 0%,"+a+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+n+'", endColorstr="'+a+'",GradientType=0 );':"background-color:"+n+";")+"border: 1px solid "+e.ButtonBorderColor+";color:"+e.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+r+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+i+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+i+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+i+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+o+"px;-webkit-border-radius:"+o+"px;border-radius:"+o+"px;";return n!=a&&T.isIE()&&(o+="border-radius: 0px;"),t&&CommonUtils.isGradientUsingFilter(o)&&(o+="background: url("+d.get()+"/player/resources/images/spacer.gif) repeat;"),"<button class='walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID' type='button' style='"+(o=o.replace(/CSS-RESET/g,f))+"'>OK</button>"}(t,e),function(t,e,r,n,a,i){n=(n=(n='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+e+" mt-custom-popup-"+e+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+n+'px">'+r+"</div>").replace(/CSS-RESET/g,f)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+a),(r=g.getTopContainer()).append(n),(E=mtjQuery("#walkme-popup-body",r)).css({position:"fixed","z-index":l.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),s.setStyleForBalloon(E,t,!1);var o=0;mtjQuery.each(mtjQuery("[width], [style*=width]",E),function(t,e){mtjQuery(e).width()>o&&(o=mtjQuery(e).width())}),E.width()<o&&E.css("width",o+"px"),c.centerElementInPage(E,!1),I=p.playSetInterval(function(){c.centerElementInPage(E,!0)},1e3),T.isQuirksMode()||h.shouldHandlePageAsFramesets()||u.displayOverlay(2147483630,!0),E.fadeIn("slow"),S.addButtonEventsToBalloon(E,{objectId:a,type:l.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),i&&i(E)}(e,"first-step-not-available",n+="</div>",420,r.Id,a)},this.closePopup=r;var f="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function r(t){I&&I.clear(),e.shouldKeepOverlay()||u.removeOverlay(),u.destroyDivWithIframes(E,t),E=null}function a(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){r()})}}},2385:function(t,e){t.exports=function(a,i){this.showFailedToStartPopup=function(t,e,r){if("v3"==t.BalloonSettings.BalloonVersion||"vm1"==t.BalloonSettings.BalloonVersion)return a.showFailedToStartPopup(t,e,r.Settings.bbcode_v,r.Id);var n=t.BalloonSettings,e={balloonSettings:n,alertText:e,isOldBalloon:!0,bbCodeVersion:r.Settings.bbcode_v,balloonEntityId:r.Id},e=a.createHtmlForNotAvailablePopup(e);i.showFailPopup(t,n,r,e)}}},2386:function(t,e){t.exports=function(e){this.isActionStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action},this.isBranchStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch},this.isPopupStep=function(t){return t&&t.Type&&t.Type==e.STEP_TYPE.Popup},this.isSpotlightStep=function(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}},2387:function(t,e){t.exports=function(l,u,p){this.activateSurvey=function(t,e,r,n,a,i,o){var s=p.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,t={tutorialId:t.Id,eventSource:e,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:u._currentPlayGUID};l.activateSurvey(n,s,a,r,t)}}},2388:function(t,e){t.exports=function(r,n,a,i,o,e){var t=this;function s(t,e){null!=(e=e.wt).Id&&n.safeStartAudit(t,e)}t.auditSafeStartStatus=s,t.redirect=function(t,e){i.currentStep=0,i.state=r.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=e.tutorialIndex,o.storeStateInCookie(),a.redirect(t)},t.auditStayButtonClicked=function(t){s(r.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function(t){t={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:n._currentPlayGUID,playInitiator:n._currentPlayInitiator,status:r.SAFESTART_ACTION.ErrorShown},e.send(t)},t.auditSafeStartFirstStatus=function(t,e){s(t,e),function(t){for(var e=0;e<t.checkStepExistsTrace.length;e++)n.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[e].stepIndex],t.checkStepExistsTrace[e].stepStatus)}(e)}}},2389:function(t,e){t.exports=function(a,i,o){this.migrateSiteConfigData=function(t){for(var e=a.getWalkthrus(),r={},n=0;n<e.length;n++)o.fixSteps(e[n],t),r[e[n].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",r)}}},2390:function(t,e){t.exports=function(n,a,i,t,o,s){var e=this;e.register=function(){t.registerDataAppender(e)},e.append=function(t,e){var r;o.isNewLanguage()&&n.setWalkthrus([]),r=e[i.Tutorial],e=(e=n.getWalkthrus()).concat(r),n.setWalkthrus(e),o.isNewLanguage()&&s.setDeployables(n.getWalkthrus()),a.migrateSiteConfigData(t.SiteConfig)}}},2391:function(t,e){t.exports=function(p,c,d,S,g,t){var e=this;e.register=function(){t.registerConverter(e)},e.convert=function(t,e){for(var r=d.get(0).getAll(),n={},a=0;a<r.length;a++)for(var i=r[a].Steps,o=0;o<i.length;o++){var s,l,u=i[o];!c.isActionStep(u)||(l=S.getSettingsValue(u.Settings,"action",null))&&"setWalkMeData"==l.actionType&&(!t[s=(u=l.arguments).dataKey]||(l=u.dataDuration)>=p.ONE_DAY_SECONDS&&(n[s]?l>n[s].Expiry&&(n[s].Expiry=l):void 0!==(u=t[s])&&(n[s]=l={Value:u,Expiry:l})))}for(s in n)n.hasOwnProperty(s)&&g.saveData(s,n[s].Value,parseInt(n[s].Expiry),e)}}},2392:function(t,e){t.exports=function(r,n,a,t,e){function i(t,e){e.isDuringLanguageChange?r.stopTutorial(void 0,!0,!0):(e.isDestroyingAll&&(r.setMember("tutorialRunSettingsMap",{}),r.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),n.releaseAllEventBindings(),r.cleanCurrentStepResources())}this.init=function(){t.on(e.EVENTS.CallReleaseElementsFromBalloons,i)}}},2393:function(t,e){t.exports=function(n,t){var a,e=this;function r(t,e,r){n.isPopupStep(e)&&(a=document.activeElement,r.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,e){n.isPopupStep(e)&&a&&(a.focus(),a=null)}e.register=function(){t.register(e)},e.bindEvents=function(){_walkmeInternals.bind("NewStepShown",r),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}},2394:function(t,e){t.exports=function(r){this.append=function(t){var e=r.getCurrentWalkthru();e&&(t.WalkthruId=e.TutorialId,(e=r.getCurrentStep())&&(t.StepIndex=e.StepIndex))}}},2395:function(t,e){t.exports=function(t,r){this.init=function(){wmjQuery.each(t.get(),function(t,e){e.addAppender(r)})}}},2396:function(t,e){t.exports=function(n,a,i,o){this.handle=function(t,e){var r;a.isInPlayMode()?(r={step:t.Steps[e],tutorial:t},n.raiseEvent("WalkthruFailedToStart",r)):(e=o.getSiteConfigByTutorialId(t.Id),r=i.getSettingsValue(t.Settings,"cantPlayAlert",e.TutorialCantPlayText),_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(e,r,t))}}},2397:function(t,e){t.exports=function(n,t,r,i,a,o,s,l,e,u,p,c,d,S,g,T,h,E,I,f,k){this.register=function(){n.addActions(_)};var _={playWt:function(r,n,a){function t(){try{var t=r.playWtFromBeginning?0:l.getStepIndex(r.StepId,r.wtId);-1==t?(e=f.formatString("Step with id: {0} was not found in walkthru with id {1}",r.StepId,r.wtId),T.customerLog(e)):WalkMeAPI.startWalkthruById({id:parseInt(r.wtId),fromStep:t,playInitiator:{type:n,objectId:a.Id}})}catch(t){var e=f.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",r.wtId,r.StepId,k.toJSON(t));T.customerLog(e)}}this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){I.afterStepsLoaded(r.wtId,t)}},redirect:function(e){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){c.stepWasCompleted();var t=e.redirectUrl;s.redirect(t)||(c.stepWasCompleted(),c.executeTutorialNextStep())}},refresh:function(){this.isValid=function(){return!0},this.doAction=function(){c.stepWasCompleted(),p.storeStateInCookie(),g.libSetTimeout(function(){location.reload(!0)},200)},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function(r,t,n){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=r.wtId,!!e.getWalkthruById(t);var t},this.doAction=function(){var t,e=r.wtId;1==r.returnToWt?(t=l.getStepIndex(r.StepId,n.TutorialId),d.makeSplit([e],t,!1,r.startingStepId)):d.makeSplit([e],t,!0,r.startingStepId)},this.getGoToData=function(){return{tutorialIndex:e.getWalkthruIndexByWalkthruId(r.wtId),stepIndex:0}}},stopWt:function(){this.type="stopWt",this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){c.stepWasCompleted(),t.stopTutorial()}},playStep:function(r,t,n){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=r.StepId,e=n.TutorialId,-1!=l.getStepIndex(t,e);var t,e},this.doAction=function(){var t=r.StepId,t=l.getStepIndex(t,n.TutorialId);c.stepWasCompleted(),u.currentStep<t&&c.fillMissingStepAudits(u.currentWalkthru,u.currentStep+1,t,i.STEP_STATUS.SkippedByActionStep),u.currentStep=t,c.executeCurrentStep()},this.getGoToData=function(){var t=r.StepId,t=l.getStepIndex(t,n.TutorialId);return{tutorialIndex:e.getWalkthruIndexByWalkthruId(n.TutorialId),stepIndex:t}}},openPlayerMenu:function(t,e,r){this.isValid=function(){return null!=window.WalkMePlayerAPI},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{c.stepWasCompleted(),n.get("openMenu",t,e,r).doAction()}catch(t){T.error(t,"Failed opening player menu")}c.executeTutorialNextStep()}},waitForCond:function(n){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){u.state=i.WALKTHRU_STATE.WAITING_FOR_CONDITION,p.storeStateInCookie();var e=u.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:A,elementName:"Wait for condition step: "+e.StepTitle},r=h.createOld(t),t=n.condition;r.onValueChanged(function(t){S.isDebuggerOnWindow()&&o.deprecatedRaiseEvent(i.EVENTS.ActionConditionEvaluated,e),t&&(c.stepWasCompleted(),c.executeTutorialNextStep())}),r.evaluateAsync(t),c.addCurrentStepResource(r)}},delay:function(t){this.isValid=function(){return!0},this.doAction=function(){return p.storeStateInCookie(),g.playSetTimeout(function(){c.stepWasCompleted(),c.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function(t,e,r){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action;var n={stepId:r.Id,tutorialId:r.TutorialId};this.doAction=function(){var t=a.keysConfig.passOwnership.newWindowTime;if(a.saveData(t.key,(new Date).getTime(),t.expiry),!E.get().enabled())return T.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void c.tutorialFinished();E.get().determineOwnership(n)}},setWalkMeData:function(e){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(e.dataDuration,i.COOKIE_LIFE_2_YEARS);r.saveData(e.dataKey,e.dataValue,t),c.stepWasCompleted(),c.executeTutorialNextStep()},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action}},A="superstep"}},2398:function(t,e){t.exports=function(r,n,a){var i;this.redirect=function(t,e){return!!r.canRedirect(t,e)&&(a.storeStateInCookie(),i=n.libSetTimeout(function(){r.redirect(t)},200),!r.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function(t,e){return r.canRedirect(t,e)&&!r.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function(){i&&i.clear()}}},2399:function(t,e){t.exports=function(g,i,t,T,h,e,E,I,f,k,_,A,o,m,s,n,l,C,W,u,y){var v=this;v.getDelay=function(){return e.get().Settings.keyPressedNextStepDelay||r};var r=2e3,a=[];function P(t,r,e,n,a){var i=void 0;n.push(N(t,0,["change"],e,1e3,{change:i=a?function(t){var e=r.Settings.complexHtml;return(t="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex]).value==e.val||t.text==e.txt}:i}))}function N(t,e,n,a,i,r){A.state=f.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=x(function(t,e){T.customerLog("Step event triggered.");var r=-1!==wmjQuery.inArray("click",n);return w(a,i,r,t,e),!0}),s=0;s<n.length;s++){var l=function(e){return function(t){e&&!e(t)||o(t)}}(r&&r[n[s]]);R(t,n[s]+".mt",l)}return function(t){return o(null,t)}}function x(n){var a=!1;return function(t,e){var r;return a||(r=n(t,e),a=!0),r}}function R(t,e,r){n.bind(t,e,r),a.push({element:t,eventName:e})}function w(t,e,r,n,a){s.releaseBalloons(),r&&(i.shouldHandlePageAsFramesets()&&i.checkIfAnyFrameIsUnloaded(e),null!=n&&u.setIgnoreNextBeforeUnload(function(t){if(l.isIE()){var e=!1;if("a"==t[0].nodeName.toLowerCase()?e=t:0<(t=t.parents("a")).length&&(e=mtjQuery(t[0])),e&&e.attr("href")&&0==e.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(n.target)))),A.state=f.WALKTHRU_STATE.RUNNING,o.storeStateInCookie(),_.stepWasCompleted(null==a),null!=a&&(A.currentStep=a),t&&null==a?_.tutorialFinished():g.playSetTimeout(function(){_.executeTutorialNextStep()},e)}v.handle=function(t,e,r,n,a,i){var o=A.getStep(r),s=!1,l=!!o.LinkedTutorialIds,u=[];l&&(d=o.LinkedTutorialIds.split(";"),_.isTutorialIdsExist(d)?(T.customerLog("This is a branched step. Branched walk-thru's: "+o.LinkedTutorialIds),u.push(function(t,e,r){A.state=f.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,_.releaseEvents(t,e);for(var n=x(function(){T.customerLog("Clicked the branched walk-thru."),_.releaseEvents(t,e),m.makeSplit(r)}),a=x(function(){_.releaseEvents(t,e)}),i=0;i<e.length;i++)R(t,e[i]+".mt",n);return function(){return a()}}(t,["click","mousedown"],d))):(T.customerLog("Branch walk-thru id, not found: "+o.LinkedTutorialIds),l=!1));var p,c=!1,r=!1,d=_.getNextStepIncludingSplit(),S=null==d;return _.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(A.state=f.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,S||(d.IsSkippable||W.getSettingsValue(d.Settings,"skipNotExists",!1)||_.getPlayConditionMode(d)!=f.playConditionModes.STICKY_CONDITION&&!_.checkPlayStepCondition(d)||W.getSettingsValue(d.Settings,"fake",!1))&&-2==_.checkIfStepExistsWithSkippables(d.TutorialIndex,d.StepIndex,void 0,void 0,void 0,f.CHECK_STEP_MODE.Normal)?r=!0:c=!0),_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.NOTHING)?S||(s=!0):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.HOVER)?u.push(N(t,0,p=["mouseenter"],S,500)):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.CLICK)&&!l?(p=k.get(),u.push(N(t,0,p,S,1e3))):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)?(d=v.getDelay(e),p=["keydown","paste","change"],l={},h.isFeatureEnabled("wmAccessibility")&&(l.keydown=function(t){return 9!=t.which&&16!=t.which}),u.push(N(t,0,p,S,d,l))):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(A.state=f.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,_.setMember("dontContinueTutorial",!0)):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.DURATION)?o.durationHandler=g.playSetTimeout(function(){_.stepWasCompleted(),_.executeTutorialNextStep()},1e3*o.Duration):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?P(t,e,S,u,!1):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?P(t,e,S,u,!0):_.isStepTrigger(o.End,f.WALKTHRU_STEP_TRIGGER.SWIPE)&&u.push(N(t,0,p=["swipe"],S,500)),o.Settings.additionalTriggers&&(I.deprecatedRaiseEvent(f.EVENTS.Walkthrus.StepAdditionalTriggerSet,o),i={elementName:e.StepTitle||e.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0,ownerChain:i},(i=C.createOld(i)).onValueChanged(function(t){I.deprecatedRaiseEvent(f.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,o),t&&(_.setMember("dontContinueTutorial",!1),o.durationHandler&&(o.durationHandler.clear(),o.durationHandler=null),t=E.containsFuncName(o.Settings.additionalTriggers,["ElementClicked"]),w(S,1e3,t))}),i.evaluateAsync(o.Settings.additionalTriggers),_.addCurrentStepResource(i)),{executeNextStep:s,clearElementEventsFuncs:u,buttons:{nextButton:c,doneButton:r,backButtonStepIndex:y.handleStepIndex(o,a,n)}}},v.releaseAllEventBindings=function(){for(var t=0;t<a.length;t++)try{var e=a[t].element,r=a[t].eventName;n.unbind(e,r)}catch(t){}a.length=0},function(){}.apply(null,arguments)}},2400:function(t,e){t.exports=function(a,i,o,s){this.handleStepIndex=function(t,e,r){var n;return 0<t.StepIndex&&a.isStepTrigger(t.End,i.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(null==e||(e=o.getStep(e),!s.isActionStep(e)))&&(0<=(n=a.checkIfStepExistsWithSkippables(r,t.StepIndex-1,0,-1,void 0,i.CHECK_STEP_MODE.Normal))&&(t=o.getStep(n),a.isStepTrigger(t.End,i.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(n=-1)),o.lastBackButtonStepIndex=n),n}}},2401:function(t,e){t.exports=function(t,n,a){this.findFirstStep=function(t,e,r){return a.checkIfStepExistsWithSkippables(t,e=e||0,void 0,void 0,r,n.CHECK_STEP_MODE.Normal)},function(){}.apply(null,arguments)}},2402:function(t,e){t.exports=function(n,a,i,t,e){function r(t,e){var r=n.mapBbcodeInitiator(e);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:r})})}this.register=function(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru,activator:r})}}},2403:function(t,e){t.exports=function(a,t,i,o,s){function e(t,e){var r,n;-1==t&&a.getCurrentWalkthru()&&(i.stop(),r=s.SURVEY_START_EVENTS.BbCodeClicked,t=(n=a.getCurrentWalkthru()).Settings.survey&&n.Settings.survey.surveyId,_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(n,r,o.mapBbcodeInitiator(e),t,"always"))}this.register=function(){t.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:s.EVENTS.BBCodeStartActionClicked.Survey,activator:e})}}},2404:function(t,e){t.exports=function(e,t){this.isEnabled=function(t){return e.isPopupStep(t)},this.findElement=function(){return t.get()}}},2405:function(t,e){t.exports=function(e){this.isEnabled=function(t){return e.isActionStep(t)},this.findElement=function(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}},2406:function(t,e,r){!function(w){t.exports=function(t,e,r,n,a,i,o,s,l,u,p,c,d,S,g,T,h,E,I,f,k,_,A,m,C,W){var y,v,P,N;function x(){R(v)}function R(t){wmjQuery.each(t,function(t,e){e.register()})}this.init=function(){R(y),C.one(A.EVENTS.DATA_FILES_LOADED,x)},this.postDataFileLoaded=x,P=w.get("AutoStartHelper"),N=w.get("AutoStartTypes"),y=[r],(v=[n,e,i,l,d,S,f,k,w.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(A.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),v.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),v.push({register:function(){s.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),v.push({register:function(){u.init()}}),v.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),v.push({register:function(){N.addDeployable(p.Tutorial,c,p.BusinessSolution)}}),v.push({register:function(){I.register(h),I.register(E)}}),v.push({register:function(){T.addRestorer("wt",g,!0)}}),v.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),v.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),v.push({register:function(){_.addOwnershipManager(A.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,m,!0)}}),v.push({register:function(){P.addAutoStartHelper(W,p.Tutorial)}})}}.call(this,r(2))},2407:function(t,e){t.exports=function(i,o,s,n,r,l,u,a,p,c,t,e,d,S,g,T){var h,E=this;function I(t){var e=g.getCurrent()==o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,r=e?g.getCurrentStepData():function(){var t=T.getData(o.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,void 0,p.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:a.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),r=n.evaluateOwnership(r.step,r.walkthruId,e);return e||t||function(){switch(r){case o.PASS_OWNERSHIP.EvaluateOwnership.Owner:s.stepWasCompleted(),s.executeTutorialNextStep();break;case o.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:l.state!=o.WALKTHRU_STATE.PASSING_OWNERSHIP&&l.currentStep++,l.state=o.WALKTHRU_STATE.PASSING_OWNERSHIP,u.storeStateInCookie()}}(),r}E.walkthruStarted=function(n,a){return g.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,(e=a,{walkthruId:(t=r.getWalkthruByIndex(n)).Id,step:t.Steps[e]}),function(){return t=n,e=a,(r=i.get().optimizedDetermineOwnership())||(l.state=o.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,l.currentWalkthru=t,l.currentStep=e,u.storeStateInCookie(),s.terminateTutorial(),l.state=o.WALKTHRU_STATE.NOT_RUNNING,i.get().reset()),r;var t,e,r});var t,e},E.evaluateOwnership=function(t,e){return e?g.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e,function(){return I(t)}):I(t)},E.evaluateOwnershipByPeeking=function(){return(d.isFeatureEnabled("po_peek")||d.isFeatureEnabled("passOwnership"))&&n.isPassOwnershipStep(e.peekNextCookieStep())},E.gainedOwnership=function(t,e,r){h("walkthru is gaining ownership with state "+l.state,3),r&&(e=e,t?(_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),S.resumeTimeoutsArray("playTimeouts")):(h("ownership granted to: "+e,3),c.restoreStateFromCookie(p.getUserGuid())))},E.lostOwnership=function(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},h=t.wrapCustomerLog(o.PASS_OWNERSHIP.LOG_FEATURE)}},2408:function(t,e){t.exports=function(i,o,s,l){this.peekNextCookieStep=function(t){try{t=t||0;var e=i.getData(o.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},l.getAllUserGuids()[0]),r=e[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],n=s.getWalkthruById(r),a=e[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME];return n.Steps[a+t]}catch(t){return null}}}},2409:function(t,e){t.exports=function(n){function a(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==n.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=a,this.evaluateOwnership=function(t,e,r){return r&&!a(t)?n.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function(t,e){if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(e),0;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(t){return 1}}(t,e)?n.PASS_OWNERSHIP.EvaluateOwnership.Owner:n.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}},2410:function(t,e){t.exports=function(o,s,l,u,p){var c,d;this.clearCache=function(){d=c=void 0},this.checkShouldAutoStart=function(t,e,r){return t!=o.Tutorial||(n=e,a=r,i=s.getWalkthruIndexByWalkthruId(n.Id),t=l.checkTutorialSkipFirstStepCondition(i),e=l.checkTutorialRedirectCondition(i,!1),r=n.IsWelcomeStep,!((n=c=c||u.get()).state==p.WALKTHRU_STATE.RUNNING&&n.step==t)&&(null==d?d=n.state==p.WALKTHRU_STATE.PAUSED||n.state==p.WALKTHRU_STATE.NOT_RUNNING||!a&&l.checkIfStepExistsWithSkippables(n.tutorial,n.step,void 0,void 0,void 0,p.CHECK_STEP_MODE.Sandbox,"- Engagement")<0:d)&&(e&&r||l.checkIfStepExistsWithSkippables(i,t,void 0,void 0,void 0,p.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=t&&!e));var n,a,i}}},2411:function(t,e){t.exports=function(e,r,n){this.get=function(){var t=e.getPersistenceData();return n.state==r.WALKTHRU_STATE.PAUSED&&(t.state=n.state),t}}},2412:function(t,e){t.exports=function(e,r,n){this.isRunning=function(){var t=e.get();return t.state==n.WALKTHRU_STATE.PAUSED||t.state==n.WALKTHRU_STATE.NOT_RUNNING||r.checkIfStepExistsWithSkippables(t.tutorial,t.step,void 0,void 0,void 0,n.CHECK_STEP_MODE.Sandbox,"- Engagement")<0?wmjQuery.Deferred().reject():wmjQuery.when()}}},2413:function(t,e){t.exports=function(r,n){this.fixAnchorTagsOnBeforeUnload=function(){var t,e;r.isIE()&&((t=mtjQuery("a[href^='javascript:']")).off(e="click.walkme.ignoreUnload"),t.on(e,function(){n.setIgnoreNextBeforeUnload(!0)}))}}},2414:function(t,e){t.exports=function(a,i,t){function e(t){t=parseInt(t);for(var e=a.stepPlayHistory,r=0;r<e.length;r++){var n=i.getStepById(e[r]);if(n&&n.StepIndex==t)return!0}return!1}this.register=function(){t.addSupportedFunction("isStepPlayed",e)}}},2415:function(t,e){t.exports=function(a,r,i,o,s,l,u){this.register=function(){wmjQuery.each(t,function(t,e){r.register(t,e.handler,e.params)})};var t={};function n(t,e){for(var r=parseInt(e.funcArgs.StepId),n=l.stepPlayHistory,a=0;a<n.length;a++)if(n[a]==r)return void t.setValue(!0);t.setValue(!1)}function p(t,e){for(var r=parseInt(e.funcArgs.StepId,10),n=0;n<l.stepCompletedHistory.length;n++)if(l.stepCompletedHistory[n]==r)return void t.setValue(!0);t.setValue(!1)}function c(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),e=i.getWalkthruById(n),n=o.getStepIndex(r,n);e&&-1<n?(n=e.Steps[n],t.setValue(!1!==a.findElement(n,!1))):t.setValue(!1)}function d(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),e=i.getWalkthruIndexByWalkthruId(n);-1<(n=o.getStepIndex(r,n))&&-1<e&&0<=s.checkIfStepExistsWithSkippables(e,n,void 0,void 0,void 0,u.CHECK_STEP_MODE.Sandbox)?t.setValue(!0):t.setValue(!1)}function S(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),e=i.getWalkthruById(n),n=o.getStepIndex(r,n);e&&-1<n?(n=e.Steps[n],t.setValue(!1!==a.findElement(n,!0))):t.setValue(!1)}function g(t,e,r){t(e,r),e.setValue(!e.getValue())}t.StepPlayed={handler:n},t.StepNotPlayed={handler:function(t,e){g(n,t,e)}},t.StepCompleted={handler:p},t.StepNotCompleted={handler:function(t,e){g(p,t,e)}},t.StepExists={handler:c,params:{editorPreview:!0}},t.StepNotExists={handler:function(t,e){g(c,t,e)},params:{editorPreview:!0}},t.StepCanPlay={handler:d},t.StepCannotPlay={handler:function(t,e){g(d,t,e)}},t.StepIsVisible={handler:S,params:{editorPreview:!0}},t.StepIsNotVisible={handler:function(t,e){g(S,t,e)},params:{editorPreview:!0}}}},2416:function(t,e){t.exports=function(o,s,l){this.auditWalkthruStart=function(t,e,r,n,a){var i=t.Steps;s.postEvent(s.EVENT_TYPES.Play,{type:s.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:l.map(e),oRequestedSubObject:i[r].Id,oActualSubObject:i[n].Id})},function(){}.apply(null,arguments)}},2417:function(t,e){t.exports=function(u,p,c,d,n,S,g,T,h,e){var E,I=this;function f(t){null!=I._currentPlayGUID&&0!=I._currentPlayGUID.length||(I._currentPlayGUID=e.generateNewPlayGuid(t))}I.safeStartAudit=function(t,e){try{var r={tutorialId:e.TutorialId,tutorialName:e.Name,playGuid:I._currentPlayGUID,playInitiator:I._currentPlayInitiator,status:t};n.send(r)}catch(t){u.error(t)}},I.auditStep=function(e,r,n){n==p.STEP_STATUS.SkippedByActionStep||(l=n==p.STEP_STATUS.SkippedStartedFromBiggerStep?p.EVENTS.Walkthrus.NewSkippedStep:p.EVENTS.Walkthrus.CheckNewStep,h.deprecatedRaiseEvent(l,r));var t,a,i,o,s,l=e.Steps.length;if(r.TutorialId<0)E(c.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",r.Id,r.TutorialId),3);else try{try{return t=r,a=e,i=l,o=n,s=g.getSettingsValue(t.Settings,"action",""),f(a.TutorialId),d.postEvent(d.EVENT_TYPES.Play,{type:d.EVENT_APPS.Step,oId:t.Id,oName:t.StepTitle||"",aType:s?S.map(s.actionType):"",aAppType:s?T.map(s.actionType):"",oType:t.Type,indx:t.StepIndex+1,owId:a.TutorialId,owName:a.Name,owType:d.EVENT_APPS.Walkthru,total:i,status:o,pId:I._currentPlayGUID})}catch(t){return u.error(t,"Failed auditStep: stepId="+r.Id+", wtId="+e.TutorialId+", status="+n+", pId="+I._currentPlayGUID),!0}}catch(t){return u.error(t),t}},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=f,function(){E=u.wrapCustomerLog(p.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}},2418:function(t,e){t.exports=function(t,e,r,n){this.register=function(){t.add(r.ENTITY_TYPE.step,e.EVENT_SENDER_EVENT_APPS.Step,function(){return n._currentPlayGUID})}}},2419:function(t,e){t.exports=function(n,a){this.calculate=function(t,e){var r=(t.Type===a.stepType.Simple?function(t){return t=t.End,-1<wmjQuery.inArray(a.stepTrigger.Button.toString(),t.split(","))?{next:!0}:{}}:function(t){var t=t.Settings&&t.Settings.popupStepButtons||[],e={};return n.foreach(t,function(t){t=i[t.action],e[t]=!0}),e})(t);return e&&wmjQuery.extend(r,(t={},0<(e=e).passedVisibleSteps&&(t.back=!0),e.passedVisibleSteps<e.totalVisibleSteps&&(t.next=!0),void 0!==e.passedVisibleSteps&&e.passedVisibleSteps===e.totalVisibleSteps&&(t.done=!0),t)),r};var i={},t=a.POPUP_BUTTON_ACTIONS;i[t.NextDone]="next",i[t.Start]="start",i[t.Back]="back",i[t.Cancel]="cancel"}},2420:function(t,e,r){!function(f){t.exports=function(s,l,u,p,c,d,S,g,T,h,E,I){this.showStep=function(t,e,r){var n=u.secureEvalJSON(t);p.fixStep(n,0,g.get());var a,i=l.findElement(n);if(s.customerLog("element:",5),s.customerLog(i,5),!i)return!1;(t=c.getComplexHtmlElements(n,i))&&(i=t.elements,a=t.parentElement),n.DesignTemplateId||n.DesignTemplatePlaceholderConfigs&&0!==n.DesignTemplatePlaceholderConfigs.length||(n.DesignTemplatePlaceholderConfigs=E.createPlaceHolderConfigs(I.templateEntityType.balloon,n.StepTitle,n.StepText));var o=f.create("Balloon",{element:i,parentElement:a,forceEmbedBalloonInIframe:e,positionHelper:d,stepSettings:n.Settings,visibilityFilter:d.getVisibleFilterKey(n),text:{title:n.StepTitle,content:n.StepText,subText:function(t){if(!t||!t.hasOwnProperty("passedVisibleSteps"))return"";var e=g.get().StepsInfoText;return e?(e=e.replace("{0}",t.passedVisibleSteps)).replace("{1}",t.totalVisibleSteps):""}(r)},position:n.Position,data:{stepId:n.Id,type:n.Type},buttons:h.calculate(n,r),configuration:n.Configuration,logger:s,drawer:S.getBalloonDrawer(n.Configuration,n),isViewStep:!0,siteConfig:g.get(),bindButtonsFunc:f.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:n.DesignTemplatePlaceholderConfigs});return T.add(o),o.Show(!0,function(){o.SetTimeoutOn()}),o}}}.call(this,r(2))}}]);