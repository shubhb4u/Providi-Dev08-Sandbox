(window._walkmeABWebpackJP_latest=window._walkmeABWebpackJP_latest||[]).push([[5],{10:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return l}));var a,o=n(39),i=n(43),s=n(2),c=n(41);function u(){window.onWalkMeMessage=function(e){var t=e.type,n=e.payload;if(t===s.N&&"function"==typeof n.func)a=n.func;else if(t===s.vb){var r=n.userGuid,c=n.walkmeEndUserId,u=n.uuid,d=n.siteConfig,l=n.globalConfig,p=n.clientSideSFOauth;Object(o.a)().dispatch(Object(i.b)(r,c,u,d,l,p))}else Object(o.a)().dispatch(e)}}function d(t){return new e((function(e,n){try{var o=t.payload;o?r(o,{resolve:e,reject:n}):r(t,{payload:{resolve:e,reject:n}}),a(t)}catch(e){n(e)}}))}function l(e,t,n){void 0===n&&(n={});var r=t;c.a.isPrivateConversation()&&r&&r.value&&(r.value="#####"),a({type:s.g,payload:{type:e,data:r,options:n}})}}).call(this,n(29).Promise,n(17).assign)},106:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(6),a=n.n(r),o=n(24),i=n(22),s=n(25),c=n(57),u=n(10),d=n(33),l=n(11),p=n(1),f=n(13),v=n(16),b=function(e){return function(t,n){if(!v.a.isCanceled(e)){t(Object(i.a)(!1));var r=n().settings,b=r.conversationUnpublishedText,g=r.conversationUpdatedText,h=a()(e,["response","data","reason"],""),m=p.m;h?("WRONG_DATA"===h.version&&(m=g||p.n.conversationUpdatedText),"NOT_PUBLISHED"!==h.published&&"WRONG_ID"!==h.conversationId||(m=b||p.n.conversationUnpublishedText),"NOT_ASSIGNED"===h.conversationId&&(m=p.m)):d.a.error(e),t(Object(c.c)()),t(Object(s.a)()),t(Object(o.a)(m));var y=n(),w=y.settings,x=w.botId,I=w.name,k=y.conversation,O=k.picked,j=k.currentNode,C=k.conversationStarted,S=k.conversationLength,T=y.dialog;T&&O&&j&&Object(u.b)(p.d.conversationEnded,{oId:O.id,oName:O.name,pId:T.id,aAppType:j.type,aoId:j.id,aoName:j.name,seekTime:Object(l.d)(C),total:S,reason:3,type:"actionBotConversation",owName:I,pInit:{id:x,type:f.h.actionBot,appType:"actionBotBot"}})}}}},107:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n(2),o=n(1),i=n(16);function s(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}var c=function(e,t){return void 0===t&&(t=""),{type:a.bb,payload:{salesforceState:e,oauthUrl:t}}},u=function(t,n){return function(){var c,u=(c=r.mark((function e(s,c){var u,d,l,p,f,v;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:a.J,payload:{suggestions:[{id:o.H}]}}),u=c().dialog,d=u.botId,l=u.id,p=u.conversationId,e.next=4,i.a.getNextConversationNode(d,p,l,t,{queryText:n});case 4:f=e.sent,v=f.data.suggestions,s({type:a.J,payload:{suggestions:v.map((function(e){return{id:e,displayName:e}}))}});case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new e((function(e,r){var a=c.apply(t,n);function o(t){s(a,e,r,o,i,"next",t)}function i(t){s(a,e,r,o,i,"throw",t)}o(void 0)}))});return function(e,t){return u.apply(this,arguments)}}()}}).call(this,n(29).Promise,n(35))},11:function(e,t,n){"use strict";(function(e,r,a,o){n.d(t,"p",(function(){return g})),n.d(t,"n",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"q",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"e",(function(){return x})),n.d(t,"d",(function(){return I})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return j})),n.d(t,"h",(function(){return C})),n.d(t,"g",(function(){return S})),n.d(t,"r",(function(){return T})),n.d(t,"j",(function(){return N})),n.d(t,"o",(function(){return _})),n.d(t,"c",(function(){return B})),n.d(t,"f",(function(){return M})),n.d(t,"s",(function(){return E})),n.d(t,"m",(function(){return A})),n.d(t,"i",(function(){return D}));var i=n(6),s=n.n(i),c=n(288),u=n(2),d=n(1),l=n(10),p=n(20);function f(){return(f=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function b(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}var g=function(e){"remove"in e&&"function"==typeof e.remove?e.remove():e.parentNode.removeChild(e)};function h(){var e=document.getElementById(d.G);e&&(g(e),document.head&&document.head.append(e))}function m(e){var t,n;(function(){var e=document.getElementById(d.v);e&&g(e);var t=document.getElementById(d.G);t&&(t.textContent="")}(),e)?c.test(e)?(t=e,(n=document.createElement("link")).id=d.v,n.onload=function(){return Object(l.c)({type:u.j})},n.type="text/css",n.rel="stylesheet",n.href=t,document.head&&document.head.append(n)):function(e){var t=document.getElementById(d.G);t||((t=document.createElement("style")).id=d.G,document.head&&document.head.append(t));var n=document.createTextNode(e);t.append(n),Object(l.c)({type:u.j})}(e):Object(l.c)({type:u.j})}function y(e,t){var n=t.displayDate||t,r=e.toLowerCase().indexOf(n.toLowerCase());if(!n||-1===r)return[e];var a=r+n.length;return[e.slice(0,r),e.slice(r,a),e.slice(a)]}function w(e){return new r((function(t){return setTimeout(t,e)}))}function x(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=new Date),void 0===n&&(n=new Date),e-(n.getTime()-t.getTime())}function I(e){return Math.round((Date.now()-e)/1e3)}function k(e,t){return e.settings.botId!==t}var O=function(e){return e.toLowerCase().replace(/(['"`])/g,"").replace(/\s/g,"-")};function j(e,t){return void 0===t&&(t=d.M.text),e.map((function(e,n){return Object(p.d)(e.displayValue)&&Object(p.d)(e.extractValue)?{id:t===d.M.staticSuggestion?""+d.J+O(String(e.displayValue))+"-"+n:O(String(e.displayValue))+"-"+n,displayName:e.displayValue,type:d.M.text,extractValue:e.extractValue}:"object"!=typeof e?{id:t===d.M.staticSuggestion?""+d.J+O(String(e))+"-"+n:O(String(e))+"-"+n,displayName:e,type:e.type||d.M.text}:{}})).filter((function(e){var t=e.displayName;return Object(p.d)(t)}))}function C(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),e.find((function(e){var n=e.displayName;return String(n).toLowerCase().trim()===t.toLowerCase().trim()}))}function S(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}var T=function(e){var t=(new DOMParser).parseFromString(e,"text/html");return s()(t,["body","textContent"],"")},N=function(){var e=b(a.mark((function e(t){var n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.c)({type:u.wb,payload:{searchTerm:t}});case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return f({},e,{displayName:e.name})})));case 7:e.prev=7,e.t0=e.catch(0),console.warn("Deployables search failed.",e.t0);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=b(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.c)({type:u.db,payload:{text:t}});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.warn("BBCodes resolve failed.",e.t0);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=b(a.mark((function e(t){var n,r,o,i,s,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=""),n=/\[var].+?\[\/var]|\[wm-data].+?\[\/wm-data]|\[jquery].+?\[\/jquery]|\[cookie].+?\[\/cookie]/g,r=t.match(n)){e.next=5;break}return e.abrupt("return");case 5:o=r.reduce((function(e,t){var n;return f({},e,((n={})[t]="",n))}),{}),i=0,s=Object.keys(o);case 7:if(!(i<s.length)){e.next=15;break}return c=s[i],e.next=11,_(c);case 11:o[c]=e.sent;case 12:i++,e.next=7;break;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=b(a.mark((function e(){var t,n,i,s,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(""),n=N(" "),e.next=4,r.all([t,n]);case 4:return i=e.sent,s=[].concat(i[0],i[1]),c=new Map,s.forEach((function(e){c.set(e.id,e)})),e.abrupt("return",o(c.values()));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,t,n){return void 0===e&&(e=1),String(t.displayName).localeCompare(String(n.displayName))*e},A=function(e){var t=e.suggestions,n=e.staticSuggestions;return Boolean(t&&t.length||n&&n.length)};function D(e){var t,n=e.suggestions.length,r="I found "+(1===n?"the":n)+" "+e.settings.pullValuesFrom+" "+(t="result",(n>1?t+"s":t)+". Please select from my Suggestions below."),a="No "+e.settings.pullValuesFrom+" results found.",o=e.staticSuggestions.length?a+" Please select from my Suggestions below.":a+" Please try again.";return n>0?r:o}}).call(this,n(17).assign,n(29).Promise,n(35),n(122).from)},117:function(e,t,n){"use strict";(function(e,r){var a=n(96),o=n(76),i=n(289),s=n.n(i),c=n(290),u=n.n(c);function d(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function l(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){d(o,e,a,i,s,"next",t)}function s(t){d(o,e,a,i,s,"throw",t)}i(void 0)}))}}var p=function(){var e=l(r.mark((function e(t){var n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter((function(e){return"condition"===e.type})),a=n.map((function(e){return Object(o.getTagConditions)(e.condition.logic)})),e.next=4,f(a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var t=l(r.mark((function t(n){var o,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={},i=u()(s()(n)),t.next=5,e.all(i.map((function(e){return a.a.evaluateTagsById([e])})));case 5:return t.sent.forEach((function(e,t){return e&&(o[i[t]]=i[t])})),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();t.a={getConditionsFlatData:p,getConditionsFlatDataByTagConditions:f}}).call(this,n(29).Promise,n(35))},122:function(e,t){var n=Object.prototype.toString,r=function(e){return"function"==typeof e||"[object Function]"===n.call(e)},a=Math.pow(2,53)-1,o=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),a)};e.exports={get from(){return window&&window.Array&&window.Array.from&&"function"==typeof window.Array.from.toString&&String(window.Array.from.toString()).indexOf("[native code]")>-1?window.Array.from:function(e){var t=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!r(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,c=o(n.length),u=r(t)?Object(new t(c)):new Array(c),d=0;d<c;)s=n[d],u[d]=i?void 0===a?i(s,d):i.call(a,s,d):s,d+=1;return u.length=c,u}}}},16:function(e,t,n){"use strict";(function(e,r,a){var o=n(109),i=n.n(o),s=n(6),c=n.n(s),u=n(39),d=n(107),l=n(43),p=n(1);function f(){return(f=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function b(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}var g=function(e){Object(u.a)().getState().salesforce.salesforceState!==p.O.WAITING&&Object(u.a)().dispatch(Object(d.a)(p.O.WAITING,e))},h=function(){Object(u.a)().getState().salesforce.salesforceState!==p.O.RUNNING&&Object(u.a)().dispatch(Object(d.a)(p.O.RUNNING))},m=function(e){return"need access token for salesforce"===c()(e,["response","data","message"])},y=i.a.CancelToken,w=y.source(),x=function(e){return new r((function(t){return setTimeout((function(){return t()}),e)}))};function I(e){return k.apply(this,arguments)}function k(){return(k=b(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=Date.now()),e.prev=1,e.next=4,i.a.get("/oauth2/pingToken",{timeout:7e4});case 4:Object(u.a)().dispatch(Object(l.e)()),e.next=17;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(Date.now()-t<36e4&&e.t0.response&&e.t0.response.data&&401===e.t0.response.data.status&&"no token matching request"===e.t0.response.data.message)){e.next=16;break}return e.next=13,x(5e3);case 13:return e.next=15,I(t);case 15:return e.abrupt("return");case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var O=function(){var e=b(a.mark((function e(t){var n,o,s,u,d,l,p,f=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.method,o=t.retry,s=void 0===o||o,u=f.length,d=new Array(u>1?u-1:0),l=1;l<u;l++)d[l-1]=f[l];return e.prev=2,e.next=5,i.a[n].apply(i.a,d);case 5:return p=e.sent,h(),e.abrupt("return",p);case 10:if(e.prev=10,e.t0=e.catch(2),!m(e.t0)||!s){e.next=17;break}return g(c()(e.t0,["response","data","data","salesforceOauthUrl"])),e.next=16,I();case 16:return e.abrupt("return",O.apply(void 0,[{method:n,retry:!1}].concat(d)));case 17:return h(),e.abrupt("return",r.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return O.apply(void 0,[{method:e}].concat(n))}},C={get:j("get"),post:j("post"),put:j("put"),delete:j("delete")};i.a.interceptors.request.use((function(t){var n=Object(u.a)().getState().settings,r=n.jwt,a=n.envId,o=n.apiBaseUrl;if(r&&Number.isFinite(a)){var i=f({},t.headers,{Authorization:"Bearer "+r,"x-wmab-wmenv":a,"x-wmab-utc-offset":(new Date).getTimezoneOffset(),Pragma:"no-cache"});e(t,{headers:i,cancelToken:w.token})}return o&&e(t,{url:o+t.url}),t}),r.reject);var S=function(e){void 0===e&&(e="Unknown reason"),w.cancel('Request was canceled by Cancel token. Reason: "'+e+'"')},T=function(){var e=b(a.mark((function e(t,n,o,i){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.get("/bots/"+t+"/conversations/"+n+"/dialogs/"+o+"/nodes/"+i+"/suggestions").catch((function(e){var a=c()(e,["response","status"]);return[500,504].includes(a)?T(t,n,o,i):r.reject(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),N=function(){var e=b(a.mark((function e(t){var n,r,o,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connectionId,r=t.conversationId,o=t.dialogId,i=t.nodeId,e.next=3,C.get("/oauth2/status",{params:{connectionId:n,conversationId:r,dialogId:o,nodeId:i}});case 3:return s=e.sent,e.abrupt("return",s.connected);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a={setNewCancelToken:function(){S("New token generated"),w=y.source()},cancelAllRequests:S,isCanceled:function(e){return i.a.isCancel(e)},fetchJWT:function(e){return void 0===e&&(e={}),e.clientSideSFOauth&&(i.a.defaults.withCredentials=!0),C.post("/init",e)},fetchBotData:function(e){return C.get("/bots/"+e)},sendUserMessage:function(e){var t=e.botId,n=e.conversationId,r=e.dialogId,a=e.text,o=e.nodeId,i=e.conditionsFlatData;return C.post("/v1/bots/"+t+"/conversations/"+n+"/dialogs/"+r+"/messages",{nodeId:o,text:a,conditionsFlatData:i})},postNode:function(e){var t=e.botId,n=e.conversationId,r=e.nodeId,a=e.dialog;return C.post("/bots/"+t+"/conversations/"+n+"/nodes/"+r,{dialog:a})},postConnectionMessage:function(e){var t=e.botId,n=e.conversationId,r=e.nodeId,a=e.text,o=e.dialog;return C.post("/bots/"+t+"/conversations/"+n+"/messages",{text:a,nodeId:r,dialog:o})},getConversation:function(e,t){return C.get("/bots/"+e+"/conversations/"+t)},getConversations:function(e,t){return C.get("/bots/"+e+"/conversations",{params:{text:t}})},getFirstConversationNode:function(e,t,n,r){return C.get("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/nodes/first",r?{params:r}:void 0)},getNextConversationNode:function(e,t,n,r,a){return C.get("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/nodes/"+r,a?{params:a}:void 0)},getFirstConversationNodePost:function(e,t,n,r){return C.post("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/nodes/first",r?{userId:r.userId,bbCodes:r.bbCodes}:void 0)},getNextConversationNodePost:function(e,t,n,r,a){return C.post("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/nodes/"+r,a?{userId:a.userId,bbCodes:a.bbCodes}:void 0)},createDialog:function(e,t,n){return C.post("/bots/"+e+"/conversations/"+t+"/dialogs",n?{dataMapping:n}:void 0)},getDialog:function(e,t,n){return C.get("/bots/"+e+"/conversations/"+t+"/dialogs/"+n)},restoreDialog:function(e,t){return C.get("/bots/"+e+"/dialogs/restore",{params:f({},t&&{conversationId:t}),timeout:3e3})},finishDialog:function(e,t,n){return C.put("/bots/"+e+"/conversations/"+t+"/dialogs/"+n,{isFinished:!0})},removeAnswer:function(e,t,n,r){return C.delete("/bots/"+e+"/conversations/"+t+"/dialogs/"+n+"/messages/"+r)},getRestSuggestions:T,checkSalesforceStatus:N,logoutSalesforce:function(){return C.get("/oauth2/logout")}}}).call(this,n(17).assign,n(29).Promise,n(35))},20:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return w}));var a=n(6),o=n.n(a),i=n(105),s=n.n(i),c=n(278),u=n.n(c),d=n(1),l=n(135);function p(){return(p=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){return function(n,r){void 0===n&&(n=e);var a=t[r.type];return a?a(n,r.payload):n}}var v=function(e){return e||""===e||!1===e||0===e},b=function(e){var t=o()(e,["settings","format"],"littleEndian");return t===d.B.CUSTOM?o()(e,["settings","customDateFormat"],d.j[d.B.ISO]):t===d.B.ISO?d.j[d.B.ISO]:d.j[t]||d.j.littleEndian};function g(e,t){void 0===t&&(t=new Date(Date.now()));var n=Math.abs(t.getTime()-e.getTime());return Math.floor(n/864e5)}function h(e,t){var n=g(e,new Date);return 0===n?t.today:1===n?t.yesterday:e.toLocaleString("en-us",{month:"short"})+" "+function(e){if(e>3&&e<21)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}(e.getDate())}function m(e,t){void 0===t&&(t={});var n=r(t||{}).reduce((function(e,t){var n,a,o=t[0],i=t[1];return d.C.hasOwnProperty(i.type)?p({},e,((n={})[o]=i,n)):i.type===d.z.variable&&"object"==typeof i.value?p({},e,r(i.value).reduce((function(e,t){var n,r=t[0],a=t[1];return p({},e,((n={})[r]={type:d.z.variable,value:a},n))}),{})):"identifier"!==i.type||"wm-euid"!==o&&"wm-sfid"!==o?e:p({},e,((a={})[o]=i,a))}),{});function a(e,t){var r=o()(e,["data","mention","id"],0),a=o()(n,r,null);if(!a)return null;var i=o()(a,["settings","format"],d.j.littleEndian),s="custom"===i?o()(a,["settings","customDateFormat"]):d.j[i],c=Object(l.a)(a,s),u="boolean"==typeof c?String(c):c;return v(u)?function(e,t){return void 0===t&&(t=""),t?"<"+t+">"+e+"</"+t+">":""===e?" ":e}(u,function(e){var t=/^<(\w+)>.*<\/(\w+)>/.exec(e);if(t){var n=t[1],r=t[2];return n&&r&&n===r?n:""}return""}(t)):t}var i=p({},e,{blocks:e.blocks.map((function(e){return""===e.text&&(e.text="\n"),p({},e,{text:s()(e.text)})}))});return u()(i,void 0,void 0,(function(e,t){switch(e.type){case"LINK":return'<a href="'+e.data.url+'" target="_blank" rel="noopener noreferrer">'+t+"</a>";case"mention":return v(a(e,t))?String(a(e,t)):Object.create({toString:function(){return""},valueOf:function(){return""}});default:return t}}))}function y(e){return e.reduce((function(e,t){var n;return p({},e,((n={})[t.id]=t,n))}),{})}function w(e,t){var n,r=e.reduce((function(e,t){var n=t.text;return e.push(p({},t,{text:n})),e}),[]).reduce((function(r,a,o){if(a.type===d.i.action)return r;if(a.isInvisible)return r;var i=0===o?void 0:e[o-1],s=i&&i.id,c=new Date(a.createdAt);return i&&i.isInvisible?r:(n&&!g(n,c)||(r.push({text:h(c,t),isSeparator:!0}),n=c),Object.keys(a).includes("success")&&!a.success&&s?[].concat(r,[p({},a,{nodeId:s}),{text:a.errorMessage,type:d.i.message,success:!1}]):!a.type&&s?[].concat(r,[p({},a,{nodeId:s})]):(r.push(a),r))}),[]).map((function(e){var t=e.id,n=e.nodeId,r=e.text,a=e.type,o=e.success,i=e.isSeparator,s=e.textSettings,c=e.createdAt,u=e.isForm,d=e.form,l=!a,p=Boolean(s),f=c&&new Date(c).getTime();return l&&t&&n?{text:r,options:{isUserMessage:l,success:o,id:t,nodeId:n,timestamp:f}}:i?{text:r,options:{isSeparator:i}}:{text:r,options:{isRichMessage:p,isUserMessage:l,success:o,timestamp:f},isForm:u,form:d}}));return r.some((function(e){var n=e.text;return e.options.isSeparator&&n===t.today}))||r.push({text:t.today,options:{isSeparator:!0}}),r}}).call(this,n(17).assign,n(17).entries)},22:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return p}));var r=n(10),a=n(2),o=n(1),i=n(16);function s(){return(s=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){return{type:a.Q,payload:{insideForm:e}}},u=function(e){return{type:a.k,payload:{isBotThinking:e}}},d=function(e){return{type:a.m,payload:{isBotWaitForAnswer:e}}},l=function(){return function(e,t){var n=t();Object(r.c)({type:a.i});var c,u=n.settings,d=u.botId,l=u.name,p=u.additionalSettings,f={type:"actionBotBot",oId:d,oName:l};if(n.dialog&&n.dialog.id&&n.conversation.currentNode&&!p.playMode){var v=n.conversation.currentNode;Object(r.b)(o.d.chatMinimized,s({},f,{pId:n.dialog.id,aAppType:v.type,aoId:v.id,aoName:v.name}))}else Object(r.b)(o.d.chatMinimized,f);e((c=!0,{type:a.i,payload:{isBotHiding:c}})),i.a.cancelAllRequests("Chat window minimized")}},p=function(){return function(e,t){var n=t();Object(r.c)({type:a.h});var c=n.settings,u=c.botId,d=c.name,l=c.additionalSettings,p={type:"actionBotBot",oId:u,oName:d};if(n.dialog&&n.dialog.id&&n.conversation.currentNode&&!l.playMode){var f=n.conversation.currentNode;Object(r.b)(o.d.chatClosed,s({},p,{pId:n.dialog.id,aAppType:f.type,aoId:f.id,aoName:f.name}))}else Object(r.b)(o.d.chatClosed,p);e({type:a.A}),i.a.cancelAllRequests("Chat window closed")}}}).call(this,n(17).assign)},24:function(e,t,n){"use strict";(function(e,r,a,o){n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return R})),n.d(t,"h",(function(){return H})),n.d(t,"d",(function(){return G})),n.d(t,"c",(function(){return K})),n.d(t,"g",(function(){return $})),n.d(t,"f",(function(){return te})),n.d(t,"e",(function(){return ne}));var i=n(157),s=n.n(i),c=n(6),u=n.n(c),d=n(150),l=n.n(d),p=n(76),f=n(68),v=n.n(f),b=n(158),g=n.n(b),h=n(97),m=n(225),y=n(2),w=n(16),x=n(41),I=n(117),k=n(10),O=n(64),j=n(33),C=n(11),S=n(20),T=n(34),N=n(25),_=n(22),B=n(43),M=n(57),E=n(106),A=n(1),D=n(13);function U(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function P(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){U(o,e,a,i,s,"next",t)}function s(t){U(o,e,a,i,s,"throw",t)}i(void 0)}))}}function F(){return(F=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var W=g()(),L=function(e,t,n){return void 0===t&&(t={isUserMessage:!1,success:!0,isRichMessage:!1}),void 0===n&&(n=!1),{type:y.c,payload:{message:{text:e,options:F({},t,{timestamp:Date.now()}),isForm:n}}}},z=function(e,t){return{type:y.b,payload:{id:e,nodeId:t}}},R=function(e,t){return void 0===t&&(t=!1),{type:y.d,payload:{separator:e,isNewSeparator:t}}},H=function(e,t){return function(){var n=P(a.mark((function n(r){return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:y.mb,payload:{nodeId:e,value:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function q(e,t,n){return V.apply(this,arguments)}function V(){return(V=P(a.mark((function e(t,n,o){var i,s,c,d,l,f,v,b,g,h,m,y,w,k,O,j,C;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n(),s=i.conversation.picked,c=i.settings,d=c.botId,l=c.conversationsNodesMap,f=i.dialog,v=s.id,b=u()(l,[v,"nodes"],[]),g=Object(p.getDialogFlatData)(f),e.next=6,I.a.getConditionsFlatData(b);case 6:if(h=e.sent,s.isForm&&t(Object(_.c)(s.isForm)),m=Object(p.checkNextNode)({conversationNodes:b,nextConversationNodeId:o,conditionsFlatData:h,flatData:g}),y=m.nextId){e.next=11;break}return e.abrupt("return",null);case 11:return w=u()(l,[v,"nodesMap",y]),e.next=14,x.a.processConversationNode({botId:d,conversationId:v,dialog:f,node:w});case 14:return k=e.sent,O=k.node,(j=k.dialog)&&j.data[y]&&t(Object(M.a)(((C={})[y]=j.data[y],C))),r(O,{data:n().dialog.data||{}}),e.abrupt("return",O);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t,n){return J.apply(this,arguments)}function J(){return(J=P(a.mark((function e(t,n,r){var o,i,s,c,d,l,p,f,v,b,g,h,m,y,x,k,O,j,S,T,N,_;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n(),i=o.conversation.picked,s=o.settings,c=s.botId,d=s.siteConfig,l=o.dialog,p=i.id,f=l.id,v=d.UserId,e.prev=4,e.next=7,w.a.getNextConversationNode(c,p,f,r,{userId:v});case 7:return b=e.sent,g=b.data,e.abrupt("return",g);case 12:if(e.prev=12,e.t0=e.catch(4),"INSUFFICIENT_DATA"!==u()(e.t0,["response","data","reason","bbCodes"])){e.next=33;break}h=u()(e.t0,["response","data","data","bbCodes"],[]),m=h.reduce((function(e,t){var n;return F({},e,((n={})[t]="",n))}),{}),y=0,x=Object.keys(m);case 18:if(!(y<x.length)){e.next=26;break}return k=x[y],e.next=22,Object(C.o)(k);case 22:m[k]=e.sent;case 23:y++,e.next=18;break;case 26:return e.next=28,w.a.getNextConversationNodePost(c,p,f,r,{userId:v,bbCodes:m});case 28:return O=e.sent,j=O.data,e.abrupt("return",j);case 33:if("INSUFFICIENT_DATA"!==u()(e.t0,["response","data","reason","tagConditions"])){e.next=43;break}return S=u()(e.t0,["response","data","data","tagConditions"],[]),e.next=37,I.a.getConditionsFlatDataByTagConditions(S);case 37:return T=e.sent,e.next=40,w.a.getNextConversationNode(c,p,f,r,{conditionsFlatData:JSON.stringify(T)});case 40:return N=e.sent,_=N.data,e.abrupt("return",_);case 43:throw e.t0;case 44:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}var K=function(e,t,n){return void 0===t&&(t=new Date),function(){var r=P(a.mark((function r(o,i){var s,c,d,p,f,v,b,g,h,m,w,I,O,j,S,N,B,M,D;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s=i(),c=s.conversation.currentNode,d=u()(c,["settings","app"]),p=u()(c,["settings","id"]),o(Object(T.c)(null)),o(Object(_.a)(!0)),f=i(),v=f.conversation.picked,b=f.settings.botId,g=f.dialog,v&&b&&g){r.next=9;break}return r.abrupt("return");case 9:if(h=g.id,m=x.a.isPrivateConversation(),w=u()(v,A.u,!1),r.t0=n,r.t0){r.next=17;break}return r.next=16,m||w?q(o,i,e):G(o,i,e);case 16:r.t0=r.sent;case 17:if(I=r.t0,d&&Object(k.c)({type:y.o,payload:{app:d,id:p}}),O=i(),!Object(C.k)(O,b)){r.next=22;break}return r.abrupt("return");case 22:if(O.conversation.picked&&(!O.dialog||O.dialog.id===h)){r.next=24;break}return r.abrupt("return");case 24:if(j=I.aDelay,S=I.type,N=Object(C.e)(j,t),B=u()(I,["settings","app"],""),S!==A.i.action||B!==y.qb&&B!==y.rb||o(Object(_.a)(!1)),!(N>0)){r.next=35;break}return M=l()(O.messages),r.next=32,Object(C.b)(N);case 32:if(D=l()(i().messages),M===D){r.next=35;break}return r.abrupt("return");case 35:o(Object(_.a)(!1)),o(Object(T.c)(I)),o(Object(T.g)(I,h)),r.next=43;break;case 40:r.prev=40,r.t1=r.catch(0),o(Object(E.a)(r.t1));case 43:case"end":return r.stop()}}),r,null,[[0,40]])})));return function(e,t){return r.apply(this,arguments)}}()},Q=function(e,t){try{var n=t(),r=n.settings.liveChat,a=r.enabledGlobal,o=r.suggestionText,i=n.conversation.currentNode,s=n.analytics.retriesAnswerQuestion,c=n.suggestions.items,d=u()(i,"liveChatEnabled",!1),l=u()(i,"failsBeforeLiveChatTriggered",3);if(a&&d&&s>=l)c&&c.length&&c[0].id===A.w||e(Object(N.d)([{id:A.w,type:A.M.liveChat,displayName:o||A.n.liveChatSuggestionText}].concat(c)))}catch(e){j.a.error(e)}},Y=function(e){var t=e.text,n=e.picked,r=e.dialog,o=e.currentNode,i=e.botId;return function(){var e=P(a.mark((function e(s,c){var d,l,f,v,b,g,h,m,O,j,S,U,P,F,W,R,H,q,V,G,J,Y,X,Z,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,de,le,pe,fe,ve,be,ge;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r,e.prev=1,s(Object(_.a)(!0)),f=n.id,v=n.name,b=n.isForm,g=void 0!==b&&b,h=r.id,m=o.id,O=o.name,j=o.type,S=o.dataType,U=o.suggestions,P=c(),F=P.settings.conversationsNodesMap,W=x.a.isPrivateConversation(c),R=t,"connection_salesforce"===S&&U?("true"===t&&U.includes(!0)&&(R=!0),"false"===t&&U.includes(!1)&&(R=!1),U.includes(Number(t))&&(R=Number(t))):"date"===S&&(R=t instanceof Date?t.toISOString():t.storedDate||t),H={botId:i,conversationId:f,dialogId:h,text:R,nodeId:m},q=new Date,V=0,G=!1,J=A.m,Y="extraction",X=null,e.prev=17,Z=null,!(o&&o.settings&&o.settings.queryQuestion)){e.next=28;break}return $=H.text,e.next=23,w.a.getNextConversationNode(i,f,h,m,{queryText:$});case 23:return(Z=e.sent).data.textSettings.blocks[0].inlineStyleRanges=[],Z.data.textSettings.blocks[0].text=Object(C.i)(Z.data),s(K(Z.data.nextConversationNodeId,q,Z.data)),e.abrupt("return");case 28:if(!W&&!g){e.next=34;break}return e.next=31,x.a.sendUserMessage(H,u()(F,[f,"nodesMap",m],null),l);case 31:Z=e.sent,e.next=54;break;case 34:return e.prev=34,e.next=37,w.a.sendUserMessage(H);case 37:Z=e.sent,e.next=54;break;case 40:if(e.prev=40,e.t0=e.catch(34),"INSUFFICIENT_DATA"!==u()(e.t0,["response","data","reason","tagConditions"])){e.next=53;break}return ee=u()(e.t0,["response","data","data","tagConditions"],[]),e.next=46,I.a.getConditionsFlatDataByTagConditions(ee);case 46:return te=e.sent,H.conditionsFlatData=JSON.stringify(te),e.next=50,w.a.sendUserMessage(H);case 50:Z=e.sent,e.next=54;break;case 53:throw e.t0;case 54:ne=Z.data,d=ne,V=ne.id,G=ne.success,J=ne.errorMessage,Y=ne.errorType,X=ne.nextConversationNodeId,e.next=71;break;case 63:if(e.prev=63,e.t1=e.catch(17),re=u()(e.t1,["response","data"],{}),ae=re.reason,oe=re.message,!ae||"WRONG_DATA"!==ae.text||"connection_salesforce"!==S){e.next=70;break}J=oe,e.next=71;break;case 70:throw e.t1;case 71:if(ie=c(),!Object(C.k)(ie,i)){e.next=74;break}return e.abrupt("return");case 74:if(s(z(V,m)),s({type:y.e}),se="extraction"===Y?2:1,ce=G?3:se,Object(k.b)(A.d.conversationsQuestionAnswered,{type:"actionBotNode",oId:m,oName:O,owId:n.id,owType:"actionBotConversation",owName:n.name,pId:h,aAppType:S,retries:ie.analytics.retriesAnswerQuestion,value:t,reason:ce},{skipPInit:!0}),!G){e.next=99;break}if((W||g)&&(ue=x.a.getMessageData(ie,d,{conversationId:f,nodeId:m}))&&(s(Object(M.a)(ue)),l=c().dialog),!W&&!g){e.next=89;break}return de=u()(F,[f,"nodes"],[]),le=Object(p.getDialogFlatData)(r),e.next=86,I.a.getConditionsFlatData(de);case 86:pe=e.sent,fe=Object(p.checkNextNode)({conversationNodes:de,nextConversationNodeId:X,conditionsFlatData:pe,flatData:le}),ve=fe.nextId,X=ve;case 89:if(!X){e.next=93;break}s(K(X,q)),e.next=97;break;case 93:return Object(k.b)(A.d.conversationEnded,{oId:f,oName:v,pId:h,aAppType:j,aoId:m,aoName:O,seekTime:Object(C.d)(ie.conversation.conversationStarted),total:ie.conversation.conversationLength,reason:1,type:"actionBotConversation",owName:ie.settings.name,pInit:{id:i,type:D.h.actionBot,appType:"actionBotBot"}}),e.next=96,s(Object(T.b)());case 96:s(Object(B.c)({botId:i}));case 97:e.next=108;break;case 99:if(be=o.aDelay,!((ge=Object(C.e)(be,q))>0)){e.next=104;break}return e.next=104,Object(C.b)(ge);case 104:s(Object(_.a)(!1)),s(L(J,{isUserMessage:!1,success:!1})),s(Object(N.e)()),s(Q);case 108:e.next=113;break;case 110:e.prev=110,e.t2=e.catch(1),s(Object(E.a)(e.t2));case 113:case"end":return e.stop()}}),e,null,[[1,110],[17,63],[34,40]])})));return function(t,n){return e.apply(this,arguments)}}()},X=function(e,t){try{var n=t(),r=n.settings.liveChat,a=r.enabledGlobal,o=r.enabled,i=r.failsBeforeTrigger,s=r.suggestionText,c=r.temporaryDisabled,u=n.analytics.retriesConversationSearch,d=n.suggestions.items;if(a&&o&&u>=i&&!c)d&&d.length&&d[0].id===A.w||e(Object(N.d)([{id:A.w,type:A.M.liveChat,displayName:s||A.n.liveChatSuggestionText}].concat(d)))}catch(e){j.a.error(e)}},Z=function(e,t){try{var n=t(),r=n.settings,a=r.fallbackConversations,o=r.failsBeforeFallbackSuggested,i=r.conversations,s=n.analytics.retriesConversationSearch,c=n.suggestions.items;if(s>=o&&a.length){var u=c.find((function(e){return e.id===A.w})),d=c.filter((function(e){var t=e.id;return![].concat(a,[A.w]).includes(t)})),l=a.map((function(e){var t=i.find((function(t){return t.id===e}));return t&&{id:e,displayName:t.displayName,type:A.M.conversation}})).filter(Boolean),p=[].concat(u?[u]:[],l,d);e(Object(N.d)(p))}}catch(e){j.a.error(e)}},$=function(e,t){return void 0===t&&(t=!1),function(){var n=P(a.mark((function n(r,i){var c,u,d,l,p,f,v,b,g,h,m,x,I,j,B,M,D,U,P,z,R,H,q,V,G,J,K,Q,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,de,le,pe;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c={isUserMessage:!0,success:!0},t||("string"==typeof e?r(L(e,c)):(u=e.displayName||e.displayDate,r(L(String(u),c)))),r(Object(N.a)()),d=i(),l=d.conversation,p=l.picked,f=l.currentNode,v=d.settings,b=v.botId,g=v.conversationId,h=v.name,m=v.noMatchedConversationErrorMessages,x=v.noConversationsOneSearchItemFoundText,I=v.severalConversationsFoundText,j=v.conversations,B=v.isWalkMeSearchEnabled,M=v.isWalkMeSearchItemsSuggestedInitially,D=v.siteConfig,U=d.dialog,P=d.suggestions.wmSearchItems,!(p&&U&&f&&b)){n.next=10;break}z=Object(S.d)(e.extractValue)?e.extractValue:Object(S.d)(e.displayName)?e.displayName:e.storedDate||e,r(Y({text:z,picked:p,dialog:U,currentNode:f,botId:b})),n.next=67;break;case 10:if(b){n.next=12;break}return n.abrupt("return");case 12:if(R=[],b!==A.l){n.next=20;break}return H=String(e).trim().toLowerCase(),n.next=17,Object(C.b)(500);case 17:R=j.filter((function(e){return e.keywords.some((function(e){return H.includes(e.toLowerCase())}))})),n.next=42;break;case 20:return n.next=22,w.a.getConversations(b,e);case 22:q=n.sent,V=Object(O.b)(q.data),G=new W.StopwordsManager,(J=D&&D.Custom&&D.Custom.actionbot)&&(K=J.customStopwords),K&&G.initCustomStopwords(K),Q=G.filterOutStopwords(e,!0).split(" "),$=[],ee='="'+Q.join(" ")+'"',te=Object(O.d)(V,ee),ne=Q.map((function(e){return"'"+e})).join(" "),re=Object(O.d)(V,ne),ae=te.concat(re),oe=[],ie=J&&J.fuseSearchSettings,(!ae.length||!ie||ie&&!Object(O.c)(ie.useExactMatch))&&(se=Q.join(" | "),oe=Object(O.d)(V,se)),$=ae.concat(oe),$=o(new Set([].concat(te,re,oe))),R=g?$.filter((function(e){return e.id===g})):$;case 42:if(ce=i(),!Object(C.k)(ce,b)){n.next=45;break}return n.abrupt("return");case 45:return R=R.map((function(e){return F({},e,{type:A.M.conversation})})),n.next=48,Object(O.a)(R);case 48:if(R=n.sent,ue=B?P:[],r({type:y.f,payload:{searchTerm:e}}),!R.length&&!ue.length){n.next=57;break}de=1===R.length,Object(k.b)(A.d.conversationsSearch,{type:"actionBotBot",oId:b,oName:h,value:e,seekTime:ce.analytics.retriesConversationSearch,total:R.length,reason:1}),de&&0===ue.length?r(Object(T.a)(R[0],!0)):(r(Object(N.d)(R)),le=1===ue.length&&0===R.length,r(L(le?x||A.n.noConversationsOneSearchItemFoundText:I||A.n.severalConversationsFoundText)),r(Object(_.b)(!0))),n.next=66;break;case 57:if(pe=s()(m),Object(k.b)(A.d.conversationsSearch,{type:"actionBotBot",oId:b,oName:h,value:e,seekTime:ce.analytics.retriesConversationSearch,total:R.length,reason:2}),r(L(pe,{isUserMessage:!1,success:!1})),r(Object(N.f)()),!B||!M){n.next=64;break}return n.next=64,r(Object(N.g)());case 64:r(X),r(Z);case 66:r(Object(_.a)(!1));case 67:n.next=73;break;case 69:n.prev=69,n.t0=n.catch(0),r((a=n.t0,{type:y.jb,payload:{error:a}})),r(Object(E.a)(n.t0));case 73:case"end":return n.stop()}var a}),n,null,[[0,69]])})));return function(e,t){return n.apply(this,arguments)}}()},ee=function(t){var n=e.resolve();return t.forEach((function(e){n=n.then(e)})),n},te=function(e,t,n){return function(){var r=P(a.mark((function r(o,i){var s,c,d,l,p,f,b,g,I;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o({type:y.tb,payload:{values:e}}),s=i(),c=s.dialog,d=c.botId,l=c.id,p=c.conversationId,f=s.conversation.picked.nodes,b=s.settings.conversationsNodesMap,"Input can not be empty","Input is not in the correct format",g={},I=x.a.isPrivateConversation(),f.map((function(e){return e.validations})).forEach((function(t){t&&t.forEach((function(t){if(!g[t.conversationNodeQuestionId]||"Input can not be empty"===g[t.conversationNodeQuestionId]){var n=t.condition.logic;v.a.apply(n,e)?delete g[t.conversationNodeQuestionId]:g[t.conversationNodeQuestionId]=t.error}}))})),f.forEach((function(t){if(t.dataType)try{var n="date"===t.dataType?e[t.id].storedDate:e[t.id];if(t.dataType!==A.C.boolean&&Object.keys(e).includes(t.id.toString())&&!n)return void(g[t.id]="Input can not be empty");("date"===t.dataType?x.a.validateAnswer(Object(h.default)(Object(m.default)(n),Object(S.c)(t)),t):x.a.validateAnswer(n,t))||(g[t.id]="Input is not in the correct format")}catch(e){}})),o({type:y.lb,payload:{invalidFields:g}}),!(Object.keys(g).length>0)){r.next=11;break}return r.abrupt("return");case 11:if(!n){r.next=13;break}return r.abrupt("return");case 13:return r.next=15,ee(Object.keys(e).map((function(t){return e[t]&&function(){var n={botId:d,conversationId:p,dialogId:l,text:e[t].storedDate||e[t],nodeId:t};return I?x.a.sendUserMessage(n,u()(b,[p,"nodesMap",t],null),i().dialog):w.a.sendUserMessage(n)}})).filter((function(e){return!!e})));case 15:return r.next=17,Object(T.f)(t)(o,i);case 17:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},ne=function(e,t){return function(){var n=P(a.mark((function n(r,o){var i,s,c;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=o(),s=i.settings.botId,c={type:y.yb,payload:{settings:{id:e,app:t},answers:{},chatHistory:[],options:{conversationId:null,botId:s,dialogId:null}}},Object(k.c)({type:y.i}),Object(k.c)(c);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}).call(this,n(29).Promise,n(17).assign,n(35),n(122).from)},247:function(e,t,n){"use strict";var r,a=n(108),o=n(277),i=n(279),s=n(280),c=n(281),u=n(282),d=n(283),l=n(284),p=n(20),f=n(2),v=n(1),b=(n(412),{oauthUrl:"",salesforceState:v.O.CANCELED}),g=Object(p.b)(b,((r={})[f.bb]=function(e,t){return t},r[f.A]=function(){return b},r)),h={messages:o.a,settings:i.a,conversation:s.a,suggestions:c.a,dialog:u.a,loader:d.a,analytics:l.a,salesforce:g};t.a=Object(a.b)(h)},25:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return x})),n.d(t,"g",(function(){return I}));var o=n(6),i=n.n(o),s=n(16),c=n(33),u=n(11),d=n(2),l=n(1);function p(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function f(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){p(o,e,a,i,s,"next",t)}function s(t){p(o,e,a,i,s,"throw",t)}i(void 0)}))}}function v(){return(v=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=function(e){var t=i()(e,["settings","mergeType"],""),n=i()(e,["settings","separatorText"],""),r=i()(e,["settings","sortRecordsBy","type"])?1:-1,a=new Set(e.suggestions),o=u.s.bind(void 0,r),s=t!==l.L.merged,d=Object(u.l)(e.staticSuggestions,s?l.M.staticSuggestion:null).filter((function(e){var t=e.displayName;return!a.has(t)})).sort(o),p={id:l.I,displayName:n,type:l.M.separator},f=Object(u.l)(e.suggestions),v=n&&d.length&&f.length?[p]:[];switch(t){case l.L.top:return d.concat(v,f);case l.L.bottom:return f.concat(v,d);case l.L.merged:return f.concat(d).sort(o);default:return c.a.error(new Error("Unknown static suggestion merge type: "+t)),f}},g=function(e){return{type:d.J,payload:{suggestions:e}}},h=function(e,t){return function(n,r){var a=r().settings,o=e||a.suggestedConversations,i=t||a.conversations,s=o.reduce((function(e,t){var n=i.find((function(e){return e.id===t}));return n?[].concat(e,[v({},n,{type:l.M.conversation})]):e}),[]);n(g(s))}},m=function(){return function(e,t){var n=t().conversation.currentNode;n&&(n.staticSuggestions?e(g(b(n))):e(g(Object(u.l)(n.suggestions))))}},y=function(){return function(e){return e(g([]))}},w=function(e,t){if(!t)return[];var n=Object(u.l)(t);return i()(e,"staticSuggestions",[]).length?b(e):n},x=function(e){return function(){var t=f(a.mark((function t(n,r){var o,l,p,f,v,b,h,m;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r(),l=o.dialog,t.prev=1,n({type:d.I}),t.next=5,s.a.getRestSuggestions(l.botId,l.conversationId,l.id,e);case 5:if(p=t.sent,f=p.data,v=r(),b=i()(v,["conversation","currentNode"]),h=i()(b,"id"),!Object(u.k)(v,l.botId)&&e===h){t.next=12;break}return t.abrupt("return");case 12:m=w(b,f),n(g(m)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),c.a.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=f(a.mark((function t(n){var r;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:d.K}),r=[],e){t.next=8;break}return t.next=5,Object(u.f)();case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Object(u.j)(e);case 10:r=t.sent;case 11:return t.abrupt("return",n((a=r,{type:d.L,payload:{wmSearchItems:a}})));case 12:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}}).call(this,n(29).Promise,n(17).assign,n(35))},277:function(e,t,n){"use strict";(function(e){var r,a=n(157),o=n.n(a),i=n(2),s=n(20);function c(){return(c=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=[];t.a=Object(s.b)(u,((r={})[i.G]=function(e,t){var n=t.settings;return t.addInitialMessageToChat?[].concat(e,[{text:o()(n.initialMessages),options:{isUserMessage:!1,timestamp:Date.now(),isRichMessage:!0}}]):e},r[i.c]=function(e,t){var n=t.message;return[].concat(e,[n])},r[i.b]=function(e,t){var n=t.id,r=t.nodeId;return e.map((function(t,a){return a===e.length-1?c({},t,{options:c({},t.options,{id:n,nodeId:r})}):t}))},r[i.ab]=function(e,t){var n=t.id,r=t.nodeId,a=e.findIndex((function(e){var t=e.options;return t.id===n&&t.nodeId===r}));return e.slice(0,a-1)},r[i.x]=function(e){return e.map((function(e){return c({},e,{options:{isUserMessage:e.options.isUserMessage,isSeparator:e.options.isSeparator,success:e.options.success,isRichMessage:e.options.isRichMessage,timestamp:e.options.timestamp}})}))},r[i.d]=function(e,t){var n=t.separator,r=t.isNewSeparator;return[].concat(r?e.filter((function(e){return e.text!==n})):e,[{options:{isSeparator:!0},text:n}])},r[i.mb]=function(e,t){var n=t.nodeId,r=t.value;return e.map((function(t,a){var o;return a<e.length-1?t:c({},t,{form:c({},t.form,{values:c({},t.form&&t.form.values,(o={},o[n]=r,o))})})}))},r[i.gb]=function(e,t){var n=t.messages,r=t.defaultLabels,a=t.mentionData;return[].concat(Object(s.f)(n,r,a))},r[i.a]=function(){return u},r[i.A]=function(){return u},r))}).call(this,n(17).assign)},279:function(e,t,n){"use strict";(function(e){var r,a=n(6),o=n.n(a),i=n(20),s=n(1),c=n(2);function u(){return(u=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d={apiBaseUrl:null,walkmeEndUserId:null,jwt:null,uuid:null,botId:null,conversationId:null,name:"",botCustomStyles:[],botActiveCustomStyle:null,initialMessages:[],noMatchedConversationErrorMessages:[],conversations:[],conversationsNodesMap:{},allConversations:[],suggestedConversations:[],fallbackConversations:[],calculateScroll:0,buttonSendText:null,buttonStartOverText:null,conversationUnpublishedText:null,conversationUpdatedText:null,doneText:null,noConversationsOneSearchItemFoundText:null,severalConversationsFoundText:null,suggestionsText:null,suggestionsNotFoundText:null,chatInputPlaceholderText:null,filterInputPlaceholderText:null,disabledInputText:null,separatorNewText:null,separatorTodayText:null,separatorYesterdayText:null,separatorCompletedText:null,isSuggestedConversationsOnly:!1,forceUpdate:!1,additionalSettings:{playMode:!1,previewEntityType:null},singleConversationPlayed:!1,liveChat:{enabledGlobal:!1,enabled:!1,suggestionText:null,failsBeforeTrigger:null,alwaysShowButton:!1,temporaryDisabled:!1,buttonLiveChatText:""},siteConfig:null,globalConfig:null,visibility:!0,failsBeforeFallbackSuggested:null,featureFlags:null,salesforce:null};t.a=Object(i.b)(d,((r={})[c.vb]=function(e,t){return u({},e,{userGuid:t.userGuid,walkmeEndUserId:t.walkmeEndUserId})},r[c.a]=function(e,t){var n=t.botId,r=t.conversationId,a=t.additionalSettings,o=t.forceUpdate;return u({},e,{botId:n,conversationId:r,additionalSettings:a||d.additionalSettings,forceUpdate:o,botCustomStyles:[],botActiveCustomStyle:null})},r[c.F]=function(e){return u({},e,{botId:null})},r[c.D]=function(e){return u({},e,{botId:null})},r[c.P]=function(e,t){return u({},e,{jwt:t.jwt,uuid:t.uuid,siteConfig:t.siteConfig,globalConfig:t.globalConfig,featureFlags:t.featureFlags,salesforce:t.salesforce})},r[c.G]=function(e,t){var n=t.settings,r=n.name,a=n.initialMessages,i=n.initialMessagesTextSettings,c=n.noMatchedConversationErrorMessages,d=n.suggestedConversations,l=n.suggestionsBoxColumns,p=n.fallbackConversations,f=n.buttonSendText,v=n.buttonStartOverText,b=n.buttonLiveChatText,g=n.conversationUnpublishedText,h=n.conversationUpdatedText,m=n.doneText,y=n.noConversationsOneSearchItemFoundText,w=n.severalConversationsFoundText,x=n.suggestionsText,I=n.suggestionsNotFoundText,k=n.chatInputPlaceholderText,O=n.filterInputPlaceholderText,j=n.disabledInputText,C=n.separatorNewText,S=n.separatorTodayText,T=n.separatorYesterdayText,N=n.separatorCompletedText,_=n.isSuggestedConversationsOnly,B=n.isRestoreDisabled,M=n.liveChatSuggestionText,E=n.liveChatEnabled,A=n.failsBeforeLiveChatTriggered,D=n.alwaysShowLiveChatButton,U=n.failsBeforeFallbackSuggested,P=n.isWalkMeSearchEnabled,F=n.isWalkMeSearchItemsSuggestedInitially,W=n.botCustomStyles;return W||(W=[{botId:e.botId,active:!0,botDesignId:1,css:o()(n,"styles","")}]),u({},e,{forceUpdate:!1,name:r,botCustomStyles:W,botActiveCustomStyle:(W||[]).find((function(e){return e.active}))||s.o,initialMessages:a,initialMessagesTextSettings:i,noMatchedConversationErrorMessages:c,suggestedConversations:d,suggestionsBoxColumns:l,fallbackConversations:p,buttonSendText:f,buttonStartOverText:v,conversationUnpublishedText:g,conversationUpdatedText:h,doneText:m,noConversationsOneSearchItemFoundText:y,severalConversationsFoundText:w,suggestionsText:x,suggestionsNotFoundText:I,chatInputPlaceholderText:k,filterInputPlaceholderText:O,disabledInputText:j,separatorNewText:C,separatorTodayText:S,separatorYesterdayText:T,separatorCompletedText:N,isSuggestedConversationsOnly:_,isRestoreDisabled:B,liveChat:{enabledGlobal:o()(e,["siteConfig","Settings","liveChat","isEnabled"],!1),enabled:E,temporaryDisabled:!1,suggestionText:M,failsBeforeTrigger:A,alwaysShowButton:D,buttonLiveChatText:b},failsBeforeFallbackSuggested:U,isWalkMeSearchEnabled:P,isWalkMeSearchItemsSuggestedInitially:F})},r[c.E]=function(e,t){var n=t.conversations;return u({},e,{conversations:n,conversationsNodesMap:n?n.reduce((function(e,t){var n;return u({},e,((n={})[t.id]=function(e){return u({},e,{nodesMap:Object(i.e)(e.nodes)})}(t),n))}),{}):{}})},r[c.C]=function(e,t){return u({},e,{allConversations:t.allConversations})},r[c.Y]=function(e){return u({},e,{calculateScroll:e.calculateScroll+1})},r[c.W]=function(e,t){return u({},e,{envId:t.envId})},r[c.V]=function(e,t){return u({},e,{walkmeEndUserId:t.walkmeEndUserId})},r[c.X]=function(e,t){return u({},e,{isWorkstation:t.isWorkstation})},r[c.U]=function(e,t){return u({},e,{apiBaseUrl:t.apiBaseUrl})},r[c.q]=function(e){return u({},e,{singleConversationPlayed:!0})},r[c.cb]=function(e){return u({},e,{conversationId:null})},r[c.A]=function(e,t){return u({},e,{singleConversationPlayed:o()(t,"isChatNeedDestroy",!1)})},r[c.t]=function(e){return u({},e,{liveChat:u({},e.liveChat,{temporaryDisabled:!0})})},r[c.l]=function(e,t){return u({},e,{visibility:t.visibility})},r[c.S]=function(e){return u({},e,{salesforce:{sfUserTokenValid:!1}})},r[c.hb]=function(e){return u({},e,{salesforce:{sfUserTokenValid:!0}})},r))}).call(this,n(17).assign)},280:function(e,t,n){"use strict";(function(e){var r,a=n(20),o=n(2);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={picked:null,currentNode:null,byKeyword:null,conversationStarted:Date.now(),conversationLength:0};t.a=Object(a.b)(s,((r={})[o.n]=function(e,t){return i({},e,{picked:t.conversation,byKeyword:t.byKeyword,conversationStarted:Date.now()})},r[o.H]=function(e,t){return i({},e,{currentNode:t.node,conversationLength:t.incrementCounter?e.conversationLength+1:e.conversationLength})},r[o.x]=function(){return s},r[o.a]=function(){return s},r[o.A]=function(){return s},r[o.kb]=function(e,t){var n=t.nodeId;return i({},e,{currentNode:e.picked.nodes.find((function(e){return e.id===n}))})},r))}).call(this,n(17).assign)},281:function(e,t,n){"use strict";(function(e){var r,a=n(20),o=n(2);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={items:[],suggestionItems:[],wmSearchItems:[],loading:!1};t.a=Object(a.b)(s,((r={})[o.J]=function(e,t){var n=t.suggestions;return i({},e,{items:[].concat(n,e.wmSearchItems),suggestionItems:n,loading:!1})},r[o.K]=function(e){return i({},e,{loading:!0,wmSearchItems:[]})},r[o.L]=function(e,t){var n=t.wmSearchItems;return i({},e,{items:[].concat(e.suggestionItems,n),wmSearchItems:n,loading:!1})},r[o.I]=function(e){return i({},e,{loading:!0})},r[o.n]=function(){return s},r[o.a]=function(){return s},r[o.A]=function(){return s},r))}).call(this,n(17).assign)},282:function(e,t,n){"use strict";(function(e){var r,a=n(20),o=n(2);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=Object(a.b)(null,((r={})[o.q]=function(e,t){return i({},t.dialog)},r[o.r]=function(e,t){var n=t.data,r=Object.keys(n).map((function(e){var t=Number(e);return isNaN(t)?e:t}));return e.dataKeysSequence&&e.dataKeysSequence.length&&(r=[].concat(e.dataKeysSequence.filter((function(e){return!n.hasOwnProperty(e)})),r)),i({},e,{dataKeysSequence:r,data:i({},e.data,n)})},r[o.s]=function(e,t){var n=e.data,r=void 0===n?{}:n,a=e.dataKeysSequence,o=void 0===a?[]:a,s=o.findIndex((function(e){return e===t.dataKey})),c=-1===s?o:o.slice(0,s);return i({},e,{dataKeysSequence:c,data:c.reduce((function(e,t){var n;return r.hasOwnProperty(t)?i({},e,((n={})[t]=r[t],n)):e}),{})})},r[o.z]=function(){return null},r[o.a]=function(){return null},r[o.A]=function(){return null},r[o.mb]=function(e,t){var n,r=t.nodeId,a=t.value;return i({},e,{data:i({},e.data,(n={},n[r]=a,n))})},r[o.tb]=function(e,t){var n=t.values;return i({},e,{data:i({},e.data,n)})},r[o.lb]=function(e,t){return i({},e,{invalidFields:t.invalidFields})},r))}).call(this,n(17).assign)},283:function(e,t,n){"use strict";(function(e){var r,a=n(2),o=n(20);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={isBotThinking:!1,isBotWaitForAnswer:!0,insideForm:!1,isBotHiding:!1};t.a=Object(o.b)(s,((r={})[a.Q]=function(e,t){return i({},e,{insideForm:t.insideForm})},r[a.k]=function(e,t){return i({},e,{isBotThinking:t.isBotThinking})},r[a.m]=function(e,t){return i({},e,{isBotWaitForAnswer:t.isBotWaitForAnswer})},r[a.x]=function(e){return i({},e,{isBotThinking:!1})},r[a.a]=function(){return s},r[a.A]=function(){return s},r[a.i]=function(e,t){return i({},e,{isBotHiding:t.isBotHiding})},r))}).call(this,n(17).assign)},284:function(e,t,n){"use strict";(function(e){var r,a=n(2),o=n(20);function i(){return(i=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={retriesConversationSearch:0,retriesAnswerQuestion:0,searchTerm:null};t.a=Object(o.b)(s,((r={})[a.f]=function(e,t){var n=t.searchTerm;return i({},e,{retriesConversationSearch:e.retriesConversationSearch+1,searchTerm:n})},r[a.n]=function(e){return i({},e,{retriesConversationSearch:0,searchTerm:null})},r[a.e]=function(e){return i({},e,{retriesAnswerQuestion:e.retriesAnswerQuestion+1})},r[a.x]=function(e){return i({},e,{retriesAnswerQuestion:0})},r[a.H]=function(e){return i({},e,{retriesAnswerQuestion:0})},r[a.a]=function(){return s},r[a.A]=function(){return s},r))}).call(this,n(17).assign)},285:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return u}));var a=n(43),o=n(1),i=n(10);function s(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function c(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){s(o,e,a,i,c,"next",t)}function c(t){s(o,e,a,i,c,"throw",t)}i(void 0)}))}}function u(e){var t=null,n=!1;e.subscribe(c(r.mark((function o(){var i,s,c,u,d;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.getState(),s=i.settings,c=s.botId,u=s.jwt,d=s.forceUpdate,!u||!c){r.next=8;break}if(t!==c&&(t=c,e.dispatch(Object(a.c)({botId:c,isInitialBotLoading:!0}))),!d||n){r.next=8;break}return n=!0,r.next=7,e.dispatch(Object(a.c)({botId:c,isInitialBotLoading:!0}));case 7:n=!1;case 8:t=c;case 9:case"end":return r.stop()}}),o)}))));var s=e.subscribe((function(){var t=e.getState(),n=t.messages,r=t.dialog,a=t.settings,c=a.botId,u=a.name;(r&&r.isRestored&&s(),n&&n.length)&&(n.some((function(e){return e.options.isUserMessage}))&&(Object(i.b)(o.d.endUserEngaged,{type:"actionBotBot",oId:c,oName:u}),s()))}))}}).call(this,n(29).Promise,n(35))},294:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var a=n(295),o=n(2),i={topEdge:{className:"wm-top-edge",styles:{zIndex:10,width:"100%",height:"4px",position:"absolute",top:0,left:0,cursor:"ns-resize"}},bottomEdge:{className:"wm-bottom-edge",styles:{zIndex:10,width:"100%",height:"4px",position:"absolute",bottom:0,left:0,cursor:"ns-resize"}},rightEdge:{className:"wm-right-edge",styles:{zIndex:10,width:"4px",height:"100%",position:"absolute",top:0,right:0,cursor:"ew-resize"}},leftEdge:{className:"wm-left-edge",styles:{zIndex:10,width:"4px",height:"100%",position:"absolute",top:0,left:0,cursor:"ew-resize"}},rightTopEdge:{className:"wm-right-top-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",top:"2px",right:"2px",cursor:"nesw-resize"}},leftTopEdge:{className:"wm-left-top-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",top:"2px",left:"2px",cursor:"nwse-resize"}},rightBottomEdge:{className:"wm-right-bottom-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",bottom:"2px",right:"2px",cursor:"nwse-resize"}},leftBottomEdge:{className:"wm-left-bottom-edge",styles:{zIndex:15,width:"10px",height:"10px",position:"absolute",bottom:"2px",left:"2px",cursor:"nesw-resize"}}},s={dragHeader:{className:"wm-drag-header",styles:{position:"absolute",top:0,left:0,height:"57px",width:"85%",zIndex:9,cursor:"move"}}};function c(e){var t=window.parent.document.querySelector("."+s.dragHeader.className);t&&(t.style.height=e+"px")}function u(e,t){return Number(e&&e.initialSize&&e.initialSize[t])||320}var d=function(t,n){var c=this;this.initialize=function(){if(c.isMobileBrowser)c._node.style.width="100%",c._node.style.height="100%";else{var e=!0;c.globalConfig&&!1===c.globalConfig.resizable&&(e=!1),c.applyInitialPosition(),e&&(c.findChildIframes(),c.createEdgeElements())}},this.applyInitialPosition=function(){var t=parseInt(document.defaultView.getComputedStyle(c._node).width,10),n=parseInt(document.defaultView.getComputedStyle(c._node).height,10),r=window.innerWidth/2-t/2,a=window.innerHeight/2-n/2;if(c.globalConfig&&c.globalConfig.initialPosition){var o=c.globalConfig.initialPosition,i=o.top,s=o.left;i&&(a=Number(i)),s&&(r=Number(s))}var u={margin:"inherit",top:a+"px",left:r+"px",bottom:"auto",right:"auto"};e(c._node.style,u)},this.createNodeElements=function(t,n){return r(t).map((function(t){var r=t[0],a=t[1],o=document.createElement("div");return o.className=a.className,o.dataset[n]=r,e(o.style,a.styles),o}))},this.createEdgeElements=function(){var e=document.createDocumentFragment();c.createNodeElements(i,"edge").forEach((function(t){t.addEventListener("mousedown",c.mouseDownHandler),e.appendChild(t)})),c.createNodeElements(s,"drag").forEach((function(t){t.addEventListener("mousedown",c.dragHandler),t.addEventListener("dblclick",c.dblClickHandler),e.appendChild(t)})),c._node.appendChild(e)},this.mouseDownHandler=function(e){e.preventDefault();var t=e.target.dataset.edge,n="resize"+t[0].toUpperCase()+t.slice(1);"function"==typeof c[n]&&(c._mouseMoveHandlerNames.push(n),c.changeVisibilityChildIframes("none"),c._isFullScreen=!1,c._startX=e.clientX,c._startY=e.clientY,c._startWidth=parseInt(document.defaultView.getComputedStyle(c._node).width,10),c._startHeight=parseInt(document.defaultView.getComputedStyle(c._node).height,10),document.documentElement.addEventListener("mousemove",c[n]),document.documentElement.addEventListener("mouseup",c.stopResize))},this.dragHandler=function(e){c.changeVisibilityChildIframes("none");var t=parseInt(document.defaultView.getComputedStyle(c._node).left,10),n=parseInt(document.defaultView.getComputedStyle(c._node).top,10);c._windowWidth=window.innerWidth,c._windowHeight=window.innerHeight,c._startWidth=parseInt(document.defaultView.getComputedStyle(c._node).width,10),c._startHeight=parseInt(document.defaultView.getComputedStyle(c._node).height,10),c._leftPosition=e.clientX-t,c._topPosition=e.clientY-n,document.documentElement.addEventListener("mousemove",c.dragMove),document.documentElement.addEventListener("mouseup",c.stopDrag)},this.dblClickHandler=function(){if(c._isFullScreen)e(c._node.style,c._prevScreenState),c._isFullScreen=!1;else{var t=c._node.style,n=t.width,r=t.height,a=t.top,i=t.left;c._prevScreenState={width:n,height:r,top:a,left:i};e(c._node.style,{width:"100%",height:"100%",top:0,left:0}),c._isFullScreen=!0}c._view.emitInside({type:o.Y})},this.dragMove=function(e){var t=e.clientY-c._topPosition,n=c._windowHeight-c._startHeight/2,r=e.clientX-c._leftPosition,a=c._windowWidth-c._startWidth/2,o=0-c._startWidth/2,i=c.getAvailablePosition(t,0,n),s=c.getAvailablePosition(r,o,a);c._node.style.top=i+"px",c._node.style.left=s+"px"},this.getAvailablePosition=function(e,t,n){return e<=t?t:e>t&&e<=n?e:n},this.resizeLeftEdge=function(e){var t=c._startWidth+c._startX-e.clientX;t<=c.minWidth?c._node.style.width=c.minWidth+"px":(c._node.style.width=t+"px",c._node.style.left=e.clientX+"px")},this.resizeRightEdge=function(e){var t=c._startWidth+e.clientX-c._startX;c._node.style.width=(t<=c.minWidth?c.minWidth:t)+"px"},this.resizeTopEdge=function(e){var t=c._startHeight+c._startY-e.clientY;t<=c.minHeight?c._node.style.height=c.minHeight+"px":(c._node.style.height=t+"px",c._node.style.top=e.clientY+"px")},this.resizeBottomEdge=function(e){var t=c._startHeight+e.clientY-c._startY;c._node.style.height=(t<=c.minHeight?c.minHeight:t)+"px"},this.resizeRightTopEdge=function(e){c.resizeRightEdge(e),c.resizeTopEdge(e)},this.resizeLeftTopEdge=function(e){c.resizeLeftEdge(e),c.resizeTopEdge(e)},this.resizeRightBottomEdge=function(e){c.resizeRightEdge(e),c.resizeBottomEdge(e)},this.resizeLeftBottomEdge=function(e){c.resizeLeftEdge(e),c.resizeBottomEdge(e)},this.findChildIframes=function(){c._iframes=[].concat(c._node.querySelectorAll("iframe"))},this.changeVisibilityChildIframes=function(t){var n=t;c._iframes.forEach((function(t){t&&t[0]?e(t[0].style,{pointerEvents:n}):e(t.style||{},{pointerEvents:n})}))},this.stopResize=function(){c.changeVisibilityChildIframes("auto"),c._mouseMoveHandlerNames.forEach((function(e){document.documentElement.removeEventListener("mousemove",c[e])}))},this.stopDrag=function(){c.changeVisibilityChildIframes("auto"),document.documentElement.removeEventListener("mousemove",c.dragMove)},this._view=t,this._node=t._wmBotContainer,this.minWidth=u(n,"minWidth"),this.minHeight=u(n,"minHeight"),this.isMobileBrowser=a.a,this.globalConfig=n,this._mouseMoveHandlerNames=[],this._isFullScreen=!1,this._prevScreenState={},this.initialize()}}).call(this,n(17).assign,n(17).entries)},295:function(e,t,n){"use strict";var r,a=(r=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)));t.a=a},33:function(e,t,n){"use strict";var r=n(2),a=n(10),o=n(16);t.a={error:function(e,t){o.a.isCanceled(e)||Object(a.c)({type:r.ib,payload:{error:e,clientRelated:t}})}}},34:function(e,t,n){"use strict";(function(e,r,a,o){n.d(t,"h",(function(){return _})),n.d(t,"a",(function(){return B})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return E})),n.d(t,"e",(function(){return D})),n.d(t,"g",(function(){return G})),n.d(t,"f",(function(){return J})),n.d(t,"d",(function(){return K}));var i,s=n(6),c=n.n(s),u=n(16),d=n(10),l=n(117),p=n(33),f=n(2),v=n(24),b=n(106),g=n(57),h=n(43),m=n(22),y=n(25),w=n(11),x=n(20),I=n(1),k=n(13),O=n(275),j=(n(135),n(41));function C(){return(C=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function T(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)}))}}var N=function(e){return e.reduce((function(e,t){var n=t.text,r=t.options;if(c()(r,"isSeparator"))return e;var a=n;return c()(r,"isRichMessage")&&(a=Object(w.r)(n)),[].concat(e,[{text:a,options:{isUserMessage:r.isUserMessage,timestamp:r.timestamp}}])}),[])},_=function(e){return function(t){t({type:f.kb,payload:{nodeId:e}})}},B=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=null),function(r,a){var o=a().analytics.searchTerm;r({type:f.n,payload:{conversation:e,byKeyword:o}}),t&&r(Object(g.b)(n))}},M=function(e){return{type:f.H,payload:{node:e,incrementCounter:Boolean(e)}}},E=function(e,t,n){return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!0),function(){var r=T(a.mark((function r(o,i){var s,c,u,d;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=i(),c=s.settings,u=c.doneText,d=c.separatorCompletedText,o(Object(m.a)(!1)),o(Object(m.c)(!1)),e&&(o(Object(v.b)(d||I.n.separatorCompletedText)),o(Object(v.a)(u||I.n.doneText))),r.next=6,o(Object(g.c)(t));case 6:o(n?Object(y.f)():Object(y.a)()),o({type:f.x});case 8:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},A=function(e,t){var n=t.id,r=t.name,a=t.type,o=e.conversation,i=o.picked,s=o.conversationStarted,c=o.conversationLength,u=e.settings,d=u.botId,l=u.name,p=e.dialog;return{oId:i.id,oName:i.name,pId:p.id,aAppType:a,aoId:n,aoName:r,seekTime:Object(w.d)(s),total:c,type:"actionBotConversation",owName:l,pInit:{id:d,type:k.h.actionBot,appType:"actionBotBot"}}},D=function(){return function(){var e=T(a.mark((function e(t,n){var r,o,i,s,u,l,p,v,b,g,h;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),o=r.settings,i=o.botId,s=o.liveChat.enabledGlobal,u=r.conversation.picked,l=r.dialog,p=r.messages,v=r.suggestions,e.prev=1,s){e.next=4;break}throw new Error("LIVE_CHAT isn't enabled globally but tried to initiate session");case 4:return b=c()(u,"id"),g=c()(l,"id"),h={app:f.R},e.next=9,Object(d.c)({type:f.yb,payload:{settings:h,options:{conversationId:b,botId:i,dialogId:g},chatHistory:N(p)}});case 9:e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(1),t({type:f.t}),t(Object(y.d)(v.items.filter((function(e){return e.id!==I.w})))),new Error("Action type LIVE_CHAT failed.");case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()},U=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,l,p,f,b;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.id,i=e.nextConversationNodeId,s=e.textSettings,c=e.data,u=e.text,l=r(),p=l.settings.botId,f=s?Object(x.a)(s,c,l.settings):u,n(Object(m.a)(!0)),t.next=7,Object(w.o)(f);case 7:if(b=t.sent,n(Object(v.a)(b,{id:o,isUserMessage:!1,success:!0,isRichMessage:!0})),i){t.next=16;break}return Object(d.b)(I.d.conversationEnded,C({},A(l,e),{reason:1})),t.next=13,n(E());case 13:n(Object(h.c)({botId:p,isInitialBotLoading:!1,isStartOver:!1,needsToBeShown:!1})),t.next=17;break;case 16:n(Object(v.c)(i));case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},P=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r(),i=e.id,s=o.conversation.picked.isForm,c=o.dialog.id,n(Object(v.a)("",{id:i,isUserMessage:!1,success:!0,isRichMessage:!0,dialogId:c},s));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,d,l,p,f,b,g;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r(),i=e.id,s=e.textSettings,c=e.data,u=e.text,d=e.dataType,l=e.suggestions,p=s?Object(x.a)(s,c,o.settings):u,t.next=5,Object(w.o)(p);case 5:f=t.sent,e&&e.isInvisible&&e.autoDataSource?(b=o.settings&&o.settings.walkmeEndUserId,n(Object(v.g)(b,!0))):n(Object(v.a)(f,{id:i,isUserMessage:!1,success:!0,isRichMessage:!0})),g=Object(y.b)(e,l),n(Object(m.a)(!1)),n(Object(y.d)(g)),d===I.E&&l.length===I.A&&n(Object(y.c)(i)),n(Object(m.b)(!0));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},W=function(t,n){var r=Object.keys(t).reduce((function(e,r){var a,o=t[r],i=n[r];return o&&i?C({},e,((a={})[o]=i,a)):e}),{});return e({},r)},L=function(){var e=T(a.mark((function e(t){var n,r,o,i,s,c,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.picked,r=t.dialog,o=t.dataMapping,i={},s=r.data,c={},n.clientSideMode){e.next=9;break}return e.next=7,u.a.getDialog(r.botId,r.conversationId,r.id);case 7:d=e.sent,c=d.data.data;case 9:return Object.keys(s).forEach((function(e){var t=n.nodes.find((function(t){return""+t.id==""+e})),r=s[e],a=s[e]&&s[e].settings||{};t.dataType===I.C.connection_salesforce?r=c[e]?c[e].value:r:t.dataType!==I.C.connection_workday&&(r=c[e]?c[e].value:r.value),n.clientSideMode||(a=c[e]&&c[e].settings||a),i[e]={type:t.dataType,settings:a,value:r,nodeId:e,name:t.name}})),e.abrupt("return",W(o,i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=T(a.mark((function e(t){var n,r,i,s,c,d,l,p,f,v,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.botId,r=t.conversationId,i=t.dialogId,s=t.clientSideMode,c=t.dialog,d=t.app,l=t.dataMapping,p={},!O.a.includes(d)){e.next=14;break}if(f={},!s){e.next=8;break}f=c.data,e.next=12;break;case 8:return e.next=10,u.a.getDialog(n,r,i);case 10:v=e.sent,f=v.data.data;case 12:b=o(f).reduce((function(e,t){var n,r=t[0],a=t[1];return a&&a.type===I.z.variable?"object"==typeof a.value?C({},e,o(a.value).reduce((function(e,t){var n,a=t[0],o=t[1];return C({},e,((n={})[a]={value:o,nodeId:Number(r)},n))}),{})):e:C({},e,((n={})[r]=C({},a,{nodeId:Number(r)}),n))}),{}),p=W(l,b);case 14:return e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=T(a.mark((function e(t){var n,r,o,i,s,c,u,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.botId,r=t.conversationId,o=t.dialogId,i=t.clientSideMode,s=t.picked,c=t.dialog,u=t.app,d=t.dataMapping,!s||!s.isForm){e.next=3;break}return e.abrupt("return",L({picked:s,dialog:c,dataMapping:d}));case 3:return e.abrupt("return",z({botId:n,conversationId:r,dialogId:o,clientSideMode:i,dialog:c,app:u,dataMapping:d}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=((i={})[f.zb]=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,l,p,f,b,g,h,m,y,x,k,O;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.id,i=e.name,s=e.settings,c=e.type,u=e.nextConversationNodeId,l=e.success,p=e.isConversationEnd,f=s.mandatory,b=s.errorMessage,g=s.closeActionBotOnLastAction,h=r(),m=h.conversation.picked,y=h.dialog,x=!f||f&&l,Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:o,oName:i,owId:m.id,owType:"actionBotConversation",owName:m.name,pId:y.id,aType:"webhooksDestination",aAppType:c,aoId:s.id,reason:x?1:2},{skipPInit:!0}),k=C({},A(h,e),{aType:"webhooksDestination",oIsWithAction:!0,wId:s.id}),!x){t.next=24;break}if(!p){t.next=15;break}if(Object(d.b)(I.d.conversationEnded,C({},k,{reason:1})),!g){t.next=12;break}return t.abrupt("return",n(E(!1,!0,!1)));case 12:return t.abrupt("return",n(E(!0)));case 15:if(p||!u){t.next=19;break}n(Object(v.c)(u)),t.next=22;break;case 19:return Object(d.b)(I.d.conversationEnded,C({},k,{reason:4})),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 22:t.next=32;break;case 24:if(Object(d.b)(I.d.conversationEnded,C({},k,{reason:4})),O=I.m,!b){t.next=30;break}return t.next=29,Object(w.o)(b);case 29:O=t.sent;case 30:return n(Object(v.a)(O,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 32:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},i[f.R]=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,l,f,b,g,h,m;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.id,i=e.name,s=e.settings,c=e.type,u=e.nextConversationNodeId,l=e.isConversationEnd,f=r(),b=f.settings.additionalSettings,g=f.conversation.picked,h=f.dialog,Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:o,oName:i,owId:g.id,owType:"actionBotConversation",owName:g.name,pId:h.id,aType:"liveChat",aAppType:c},{skipPInit:!0}),m=C({},A(f,e),{aType:"liveChat",oIsWithAction:!0,wId:s.id}),t.prev=5,t.next=8,n(D());case 8:if(!l){t.next=13;break}return Object(d.b)(I.d.conversationEnded,C({},m,{reason:1})),t.abrupt("return",n(E(!0,!b.playMode)));case 13:if(l||!u){t.next=17;break}n(Object(v.c)(u)),t.next=20;break;case 17:return Object(d.b)(I.d.conversationEnded,C({},m,{reason:4})),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 20:t.next=29;break;case 22:return t.prev=22,t.t0=t.catch(5),p.a.error(t.t0,!0),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.next=28,n(E());case 28:Object(d.b)(I.d.conversationEnded,C({},m,{reason:4}));case 29:case"end":return t.stop()}}),t,null,[[5,22]])})));return function(e,n){return t.apply(this,arguments)}}()},i[f.p]=function(e){return function(){var t=T(a.mark((function t(n,r){var i,s,c,u,l,b,g,h,m,y,w,x,k;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.settings,s=e.type,c=e.id,u=i.id,l=i.app,b=r(),g=b.conversation.picked,h=b.dialog,m=l===I.a.actionBotConversation?e.dataMapping:null,(g.clientSideMode||g.isForm)&&m&&(y={},o(m).forEach((function(e){var t=e[0],n=e[1],r={value:h.data[t],settings:{},type:"text"};y[n]=g.isForm&&!g.clientSideMode?r:h.data[t]})),m=y),"actionBotConversation",w=b.settings.allConversations.find((function(e){return e.id===u})),Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:c,oName:name,owId:g.id,owType:"actionBotConversation",owName:g.name,pId:h.id,aType:"actionBotConversation",aAppType:s,aoId:i.id},{skipPInit:!0}),x=C({},A(b,e),{aType:"actionBotConversation",oIsWithAction:!0,wId:i.id}),!w){t.next=15;break}return Object(d.b)(I.d.conversationEnded,C({},x,{reason:1})),t.next=14,n(E(!1,!1,!1));case 14:return t.abrupt("return",n(B(w,!0,m)));case 15:return(k=b.settings.additionalSettings).playMode&&"conversation"===k.previewEntityType&&Object(d.c)({type:f.yb,payload:{settings:i}}),p.a.error(new Error("Bot tried to launch Conversation which is not present in its conversation list."),!0),Object(d.b)(I.d.conversationEnded,C({},x,{reason:4})),n(Object(v.a)(I.m,{isUserMessage:!1,success:!1})),t.abrupt("return",n(E()));case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},i),q=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,u,l,b,g,y,x,k,O,S,T,_,B,M,D,U,P,F,W,L,z,q,V,G,J,K,Q,Y,X,Z,$,ee,te,ne;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.id,i=e.name,s=e.type,u=e.actionType,l=e.settings,b=e.dataMapping,g=e.isConversationEnd,y=e.nextConversationNodeId,x=r(),k=x.settings,O=k.botId,S=k.additionalSettings,T=k.globalConfig,_=k.jwt,B=k.isWorkstation,M=x.conversation.picked,D=x.dialog,U=x.messages,P=c()(l,"app",""),F=c()(l,"waitForActionEnds",!1),W=c()(l,"closeActionBotOnLastAction",!1)&&g,L=j.a.isPrivateConversation(),z=[f.rb,f.qb,f.pb].includes(P),q=z&&!e.hasOwnProperty("isConversationEnd")&&null===y,V=[f.zb,f.p,f.R,f.sb],G=l&&l.app===f.Ab,J=l&&l.app===f.sb,K=!S.playMode&&!V.includes(P)&&!(G&&!l.destinationUrl)&&c()(T,"closeOnAction",!0)&&(g||q),!G||!l.destinationUrl){t.next=18;break}return t.next=17,Object(w.c)(l.destinationUrl);case 17:Q=t.sent;case 18:if(K&&Object(d.c)({type:f.i}),O){t.next=21;break}return t.abrupt("return");case 21:if("WalkMe"===u){t.next=23;break}throw new Error("Unknown action type: "+u);case 23:return Y=M.id,X=D.id,Z=N(U),t.next=28,R({botId:O,conversationId:Y,dialogId:X,clientSideMode:L,picked:M,dialog:D,app:P,dataMapping:b});case 28:if($=t.sent,!H[P]){t.next=32;break}return n(Object(m.a)(!0)),t.abrupt("return",n(H[P](e)));case 32:if(!g&&!q){t.next=45;break}if(ee=G&&!l.destinationUrl,te=!(B||ee||J)&&!F,!W){t.next=40;break}return t.next=38,n(E(!1,!0,!1));case 38:t.next=42;break;case 40:return t.next=42,n(E(!0,te));case 42:n(Object(h.c)({botId:O,isInitialBotLoading:!1,isStartOver:!1,needsToBeShown:!1})),Object(d.b)(I.d.conversationActionTriggered,{type:"actionBotNode",oId:o,oName:i,owId:M.id,owType:"actionBotConversation",owName:M.name,pId:D.id,aType:"bizFlow",aAppType:s,aoId:l.id},{skipPInit:!0}),Object(d.b)(I.d.conversationEnded,C({},A(x,e),{aType:"bizFlow",pId:X,oIsWithAction:!0,wId:l.id,reason:1}));case 45:if(ne={type:f.yb,payload:{settings:l,answers:$,chatHistory:Z,options:{conversationId:Y,botId:O,dialogId:X,nodeId:o,jwt:_}}},Q&&(ne.payload.options.bbCodes=JSON.stringify(Q)),!F||S.playMode||W){t.next=56;break}return n(Object(m.a)(!0)),Object(d.c)({type:f.i}),t.next=52,Object(d.c)(ne);case 52:Object(d.c)({type:f.j}),n(Object(m.a)(!1)),t.next=57;break;case 56:Object(d.c)(ne);case 57:y&&n(Object(v.c)(y)),t.next=63;break;case 60:t.prev=60,t.t0=t.catch(0),p.a.error(t.t0);case 63:case"end":return t.stop()}}),t,null,[[0,60]])})));return function(e,n){return t.apply(this,arguments)}}()};function V(e,t){return!(!e||!e.isForm)&&[I.i.question,I.i.condition].includes(e.nodes.find((function(e){return e.id===t})).type)}var G=function(e,t){return function(){var n=T(a.mark((function n(r,o){var i,s,c,u,l,p,f,v,b,g;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=e.id,c=e.type,u=e.name,l=e.settings,p=o(),f=p.conversation.picked,(!(v=p.dialog)||v.id===t)&&f&&v){n.next=5;break}return n.abrupt("return");case 5:return Object(d.b)(I.d.conversationsNodeServed,C({type:"actionBotNode",oId:s,oName:u,owId:f.id,owType:"actionBotConversation",owName:f.name,pId:v.id,aAppType:c},c===I.i.action&&{aoId:l.id}),{skipPInit:!0}),b=f.isForm&&V(f,s)?I.i.form:c,(i={})[I.i.message]=U,i[I.i.question]=F,i[I.i.action]=q,i[I.i.form]=P,g=i,n.abrupt("return",g[b]&&r(g[b](e)));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},J=function(e){return function(){var t=T(a.mark((function t(n,r){var o,i,s,c,u,d;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),i=o.conversation.picked.nodes,s=o.dialog.id,c=i.find((function(t){return t.id===e})),u=c.nextConversationNodeId){t.next=5;break}return t.abrupt("return");case 5:if(d=i.find((function(e){return e.id===u})),j.a.isPrivateConversation()){t.next=10;break}return t.next=10,Object(v.d)(n,r,u);case 10:return t.next=12,G(d,s)(n,r);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},K=function(){return function(){var e=T(a.mark((function e(t,n){var r,o,i,s,p,f,v,g,h,y,x,O,S,T,N,_,B,E,A,D,U,P,F,W,L,z,R,H,q,V,J,K,Q;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(),o=r.conversation,i=r.settings,s=i.botId,p=i.name,f=i.conversationsNodesMap,v=i.siteConfig,g=r.dialog,h=o.picked,y=o.byKeyword,x=v.UserId,h&&s&&g){e.next=6;break}return e.abrupt("return");case 6:if(O=g.id,S=h.id,T=new Date,N=j.a.isPrivateConversation(),_=c()(h,I.u,!1),!N&&!_){e.next=17;break}E=c()(f,[S,"entryPointId"]),(B=c()(f,[S,"nodesMap",E])).data=g.data||{},e.next=60;break;case 17:return t(Object(m.a)(!0)),e.prev=18,e.next=21,u.a.getFirstConversationNode(s,S,O,{userId:x});case 21:A=e.sent,D=A.data,B=D,e.next=60;break;case 26:if(e.prev=26,e.t0=e.catch(18),"INSUFFICIENT_DATA"!==c()(e.t0,["response","data","reason","bbCodes"])){e.next=47;break}U=c()(e.t0,["response","data","data","bbCodes"],[]),P=U.reduce((function(e,t){var n;return C({},e,((n={})[t]="",n))}),{}),F=0,W=Object.keys(P);case 32:if(!(F<W.length)){e.next=40;break}return L=W[F],e.next=36,Object(w.o)(L);case 36:P[L]=e.sent;case 37:F++,e.next=32;break;case 40:return e.next=42,u.a.getFirstConversationNodePost(s,S,O,{userId:x,bbCodes:P});case 42:z=e.sent,R=z.data,B=R,e.next=60;break;case 47:if("INSUFFICIENT_DATA"!==c()(e.t0,["response","data","reason","tagConditions"])){e.next=59;break}return H=c()(e.t0,["response","data","data","tagConditions"],[]),e.next=51,l.a.getConditionsFlatDataByTagConditions(H);case 51:return q=e.sent,e.next=54,u.a.getFirstConversationNode(s,S,O,{conditionsFlatData:q});case 54:V=e.sent,J=V.data,B=J,e.next=60;break;case 59:throw e.t0;case 60:if(!Object(w.k)(n(),s)){e.next=62;break}return e.abrupt("return");case 62:if(!B){e.next=74;break}if(K=B.aDelay,!((Q=Object(w.e)(K,T))>0)){e.next=68;break}return e.next=68,Object(w.b)(Q);case 68:if(n().dialog===g){e.next=71;break}return e.abrupt("return");case 71:Object(d.b)(I.d.conversationStarted,C({type:"actionBotConversation",oId:h.id,oName:h.name,owName:p,pId:O,pInit:{id:s,type:k.h.actionBot,appType:"actionBotBot"}},y?{value:y}:null)),t(M(B)),t(G(B,O));case 74:e.next=79;break;case 76:e.prev=76,e.t1=e.catch(0),t(Object(b.a)(e.t1));case 79:case"end":return e.stop()}}),e,null,[[0,76],[18,26]])})));return function(t,n){return e.apply(this,arguments)}}()}}).call(this,n(17).assign,n(29).Promise,n(35),n(17).entries)},39:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return v}));var a=n(108),o=n(243),i=n(247),s=n(285),c=n(33);function u(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}var d=a.c,l=function(){return function(t){return function(){var n,a=(n=r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t(n));case 4:e.prev=4,e.t0=e.catch(0),c.a.error(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})),function(){var t=this,r=arguments;return new e((function(e,a){var o=n.apply(t,r);function i(t){u(o,e,a,i,s,"next",t)}function s(t){u(o,e,a,i,s,"throw",t)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}()}},p=null,f=null,v=function(){return null===p&&(p=null!==f?Object(a.d)(i.a,f,d(Object(a.a)(o.a,l))):Object(a.d)(i.a,d(Object(a.a)(o.a,l))),Object(s.a)(p)),p}}).call(this,n(29).Promise,n(35))},41:function(e,t,n){"use strict";(function(e,r,a){var o=n(6),i=n.n(o),s=n(76),c=n(68),u=n.n(c),d=n(244),l=n.n(d),p=n(287),f=n.n(p),v=n(148),b=n(16),g=n(2),h=n(1),m=n(39);function y(){return(y=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function x(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){w(o,r,a,i,s,"next",e)}function s(e){w(o,r,a,i,s,"throw",e)}i(void 0)}))}}u.a.add_operation("Date",Date),u.a.add_operation("exactLength",(function(e,t){return!e&&0==t||e&&e.length==t})),u.a.add_operation("minLength",(function(e,t){return e&&e.length>t})),u.a.add_operation("maxLength",(function(e,t){return!e||e.length<=t}));var I={date:function(e,t){var n=(void 0===t?{}:t).utcOffset;if(!(e instanceof Date)&&Number.isNaN(Date.parse(e)))return e;if(l()(n))throw new Error("utcOffset is mandatory");if("number"!=typeof n)throw new Error("utcOffset should be a number");return Object(v.default)(new Date(e),n).toString()}},k=function(){var e=x(a.mark((function e(t,r){var o,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.t.bind(null,698,7)).then((function(e){return e.default()})).catch((function(e){return"An error occurred while loading the component"}));case 2:return o=e.sent,i=o(r.dataType),s=i.execute,e.abrupt("return",s(t,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var t=x(a.mark((function t(n,r,o){var i,c,d,p,v,g,m,w,x,O,j,C,S,T,N,_,B;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r?JSON.parse(JSON.stringify(r)):r,c=i.nextConversationNodeId,d=n.text,p=n.nodeId,v=n.botId,g=n.conversationId,m={success:!0,text:d,id:p,dialogId:o.id,errorMessage:null,dataType:i.dataType,createdAt:(new Date).toISOString()},t.prev=4,x=Object(s.getDialogFlatData)(o),!(i=Object(s.replaceSuggestionsKeys)(i,x)).isSuggestionsOnly||h.h.hasOwnProperty(i.dataType)||i.suggestions.includes(d)){t.next=9;break}throw new Error("An answer should be only from suggestions",{errorData:{code:"BAD_REQUEST",message:"An answer should be only from suggestions",reason:{text:"WRONG_DATA"}}});case 9:if(i.isSplitConversation&&null!==i.nextConversationBranchNodes&&1===(c=i.nextConversationBranchNodes[d])&&(c=null),!h.h.hasOwnProperty(i.dataType)){t.next=19;break}return t.next=13,b.a.postConnectionMessage({botId:v,conversationId:g,nodeId:p,text:d,dialog:o});case 13:j=t.sent,C=j.data,O=C.data,e(m,{data:O}),t.next=27;break;case 19:return S=d,"date"===i.dataType&&(S=d instanceof Date?d.toISOString():d.storedDate||d),t.next=23,k(S,i);case 23:O=t.sent,T={utcOffset:(new Date).getTimezoneOffset()},I.hasOwnProperty(i.dataType)&&(O=I[i.dataType](O,T)),e(m,{data:O});case 27:N=f()(o.data,((w={})[i.id]={value:O,settings:i.settings,type:i.dataType},w)),x=Object(s.getDialogFlatData)(y({},o,{data:N})),l()(O)?(c=null,m.success=!1,m.errorMessage=i.errorMessage,m.errorType="extraction"):(_=i.validations,(B=(void 0===_?[]:_).find((function(e){var t=e.condition.logic;return!u.a.apply(t,x)})))&&(c=null,m.success=!1,m.errorMessage=B.error,m.errorType="validation")),m.success&&e(m,{nextConversationNodeId:c,success:!0,id:p}),t.next=36;break;case 33:return t.prev=33,t.t0=t.catch(4),t.abrupt("return",{data:e(m,{nextConversationNodeId:c,success:!1,id:p,errorMessage:t.t0.message})});case 36:return t.abrupt("return",{data:m});case 37:case"end":return t.stop()}}),t,null,[[4,33]])})));return function(e,n,r){return t.apply(this,arguments)}}(),j=function(){var t=x(a.mark((function t(n){var r,o,i,s,c,u,d,l,p,f,v,m,y;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.node,o=n.botId,i=n.conversationId,s=n.dialog,c={node:r,dialog:null},r){t.next=4;break}return t.abrupt("return",c);case 4:if(u=r.type,d=r.settings,l=r.id,p=r.dataType,u!==h.i.question||!h.h.hasOwnProperty(p)){t.next=16;break}return t.prev=6,t.next=9,b.a.postNode({botId:o,conversationId:i,nodeId:l,dialog:s});case 9:f=t.sent,v=f.data,e(c,{node:v.node}),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(6);case 16:if(u!==h.i.action||d.app!==g.zb){t.next=27;break}return t.prev=17,t.next=20,b.a.postNode({botId:o,conversationId:i,nodeId:l,dialog:s});case 20:m=t.sent,y=m.data,e(c,{node:y.node,dialog:y.dialog}),t.next=27;break;case 25:t.prev=25,t.t1=t.catch(17);case 27:return t.abrupt("return",c);case 28:case"end":return t.stop()}}),t,null,[[6,14],[17,25]])})));return function(e){return t.apply(this,arguments)}}();t.a={createLocalDialog:function(e){var t=e.botId,n=e.conversationId,r=e.envId,a=e.dataMapping;return{id:(new Date).getTime(),dataKeysSequence:[],data:a||{},botId:t,conversationId:n,envId:r}},getMessageData:function(e,t,n){var r,a=n.conversationId,o=n.nodeId,s=i()(e,["settings","conversationsNodesMap",a,"nodesMap",o]);return s?((r={})[o]={type:s.dataType,value:t.data,settings:s.settings||{}},r):null},isPrivateConversation:function(e){var t=e?e():Object(m.a)().getState(),n=t.settings,r=t.conversation;return r&&r.picked&&r.picked[h.g]||n&&n[h.g]||!1},processConversationNode:j,sendUserMessage:O,validateAnswer:k}}).call(this,n(17).assign,n(29).Promise,n(35))},412:function(e,t){},43:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return _}));var o=n(6),i=n.n(o),s=n(16),c=n(64),u=n(10),d=n(33),l=n(11),p=n(20),f=n(2),v=n(57),b=n(22),g=n(25),h=n(34);function m(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function y(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){m(o,e,a,i,s,"next",t)}function s(t){m(o,e,a,i,s,"throw",t)}i(void 0)}))}}function w(){return(w=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=function(e,t){return void 0===t&&(t=!0),{type:f.G,payload:{settings:e,addInitialMessageToChat:t}}},I=function(e){return{type:f.F,payload:{error:e}}},k=function(e){return{type:f.E,payload:{conversations:e}}},O=function(e){return e?["initialMessages","doneText","noConversationsOneSearchItemFoundText","noMatchedConversationErrorMessages","severalConversationsFoundText"].reduce((function(t,n){var r;return e.hasOwnProperty(n)?w({},t,((r={})[n]=e[n],r)):t}),{}):{}},j=function(){var e=y(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:return n=O(t),e.next=5,Object(l.o)(JSON.stringify(n));case 5:return r=e.sent,e.prev=6,e.abrupt("return",JSON.parse(r));case 10:return e.prev=10,e.t0=e.catch(6),d.a.error(e.t0,!0),e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[6,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(t){var n=t.botId,o=t.isInitialBotLoading,m=void 0!==o&&o,O=t.isStartOver,C=void 0!==O&&O,S=t.needsToBeShown,T=void 0===S||S;return function(){var t=y(a.mark((function t(o,y){var O,S,N,_,B,M,E,A,D,U,P,F,W,L,z,R,H,q,V,G,J,K,Q,Y,X;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.a.setNewCancelToken(),(m||C)&&o(Object(b.a)(!0)),m||o({type:f.cb}),t.prev=3,t.next=6,e.all([s.a.fetchBotData(n),s.a.getConversations(n)]);case 6:return O=t.sent,S=O[0],N=O[1],t.next=11,j(S.data);case 11:if(_=t.sent,r(S.data,w({},_)),!S.data.hasOwnProperty("initialMessages")){t.next=17;break}return t.next=16,e.all(S.data.initialMessages.map((function(e){return Object(l.o)(e)})));case 16:S.data.initialMessages=t.sent;case 17:if(!S.data.initialMessagesTextSettings||S.data.initialMessages.length!==S.data.initialMessagesTextSettings.length){t.next=21;break}return t.next=20,e.all(S.data.initialMessagesTextSettings.map((function(e,t){return e?Object(l.o)(Object(p.a)(e)):S.data.initialMessages[t]})));case 20:S.data.initialMessages=t.sent;case 21:if(B=y(),!Object(l.k)(B,n)){t.next=24;break}return t.abrupt("return");case 24:return M=B.settings.conversationId,t.next=27,Object(c.a)(N.data);case 27:if(E=t.sent,o((Z=E,{type:f.C,payload:{allConversations:Z}})),A=i()(B,["settings","additionalSettings"],{}),D=A.playMode,U=A.previewEntityType,!M){t.next=43;break}return t.prev=32,t.next=35,s.a.getConversation(n,M);case 35:F=t.sent,W=F.data,D?E=[W]:P=W,t.next=43;break;case 40:t.prev=40,t.t0=t.catch(32),P=null;case 43:if(L=i()(S,["data","botCustomStyles"],[]).find((function(e){return e.active})),z=i()(L,"css",""),m?Object(l.a)(z):T&&Object(u.c)({type:f.j}),o(k(E)),!m||D){t.next=51;break}if(!P){t.next=50;break}return t.abrupt("return",o(Object(v.f)(S.data,E,P)));case 50:return t.abrupt("return",o(Object(v.f)(S.data,E)));case 51:if(R=1===E.length,H=D&&"bot"===U,q=C&&!R||H&&(C||m),V=i()(B,["settings","singleConversationPlayed"],!1),o(x(S.data,q)),G=S.data,J=G.isWalkMeSearchEnabled,K=G.isWalkMeSearchItemsSuggestedInitially,Q=[],!J||!K){t.next=63;break}return t.next=61,o(Object(g.g)());case 61:Y=t.sent,Q=i()(Y,["payload","wmSearchItems"],[]);case 63:!R||Q.length||H||V&&!C&&!m?(o(Object(g.f)(S.data.suggestedConversations,E)),o(Object(b.a)(!1))):o(Object(h.a)(E[0],!0)),t.next=76;break;case 66:if(t.prev=66,t.t1=t.catch(3),!s.a.isCanceled(t.t1)){t.next=70;break}return t.abrupt("return");case 70:Object(u.c)({type:f.M}),X=i()(t.t1,["response","data"],{}),i()(t.t1,["config","url"],"").includes("conversations")?o((a=X,{type:f.D,payload:{error:a}})):o(I(X)),o(Object(b.a)(!1)),d.a.error(t.t1,!1);case 76:case"end":return t.stop()}var a,Z}),t,null,[[3,66],[32,40]])})));return function(e,n){return t.apply(this,arguments)}}()},S=function(e,t,n,r,a,o){return Object(u.c)({type:f.P,payload:{uuid:t}}),{type:f.P,payload:{jwt:e,uuid:t,siteConfig:n,globalConfig:r,featureFlags:a,salesforce:o}}},T=function(e,t,n,r,o,c){return function(){var l=y(a.mark((function l(p){var v,b,g,h,m,y;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.a.fetchJWT(w({clientSideSFOauth:c,userGuid:e,walkmeEndUserId:t},n&&{uuid:n}));case 3:v=a.sent,b=v.data,g=b.jwt,h=b.uuid,m=b.sfUserTokenValid,g&&h&&p(S(g,h,r,o,{clientSideSFOauth:c},{sfUserTokenValid:m})),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(0),y=i()(a.t0,["response","data"]),p((l=y,Object(u.c)({type:f.O}),{type:f.O,payload:{error:l}})),d.a.error(a.t0);case 16:case"end":return a.stop()}var l}),l,null,[[0,11]])})));return function(e){return l.apply(this,arguments)}}()},N=function(){return function(e){s.a.logoutSalesforce(),e({type:f.S})}},_=function(){return{type:f.hb}}}).call(this,n(29).Promise,n(17).assign,n(35))},57:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return N})),n.d(t,"e",(function(){return B})),n.d(t,"f",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return D}));var o=n(6),i=n.n(o),s=n(2),c=n(16),u=n(41),d=n(10),l=n(33),p=n(11),f=n(20),v=n(1),b=n(13),g=n(34),h=n(24),m=n(43),y=n(22),w=n(25),x=n(106);function I(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function k(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){I(o,e,a,i,s,"next",t)}function s(t){I(o,e,a,i,s,"throw",t)}i(void 0)}))}}function O(){return(O=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e,t){return void 0===t&&(t=!1),{type:s.q,payload:{dialog:O({},e,{isRestored:t})}}};function C(e,t){return S.apply(this,arguments)}function S(){return(S=k(a.mark((function e(t,n){var r,o,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.nodes.find((function(e){return e.dataType===v.C.connection_salesforce&&"Records"===e.settings.dataSource}))){e.next=3;break}return e.abrupt("return");case 3:return o=r.id,i=r.settings.account,s=t.id,e.next=8,c.a.checkSalesforceStatus({connectionId:i,conversationId:s,dialogId:n,nodeId:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){return function(){var t=k(a.mark((function t(n,o){var i,s,d,l,f,v,b,h,m,w,I;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=o(),s=i.conversation.picked,d=i.settings,l=d.botId,f=d.envId,v=d.featureFlags,b=u.a.isPrivateConversation(),l){t.next=5;break}return t.abrupt("return");case 5:if(m=r({},e),s.conversationVariables&&s.conversationVariables.conversationDataMappings.forEach((function(e){e.defaultValue&&!m[e.variableName]&&(m[e.variableName]={settings:{},type:"text",value:e.defaultValue})})),!b){t.next=11;break}h=u.a.createLocalDialog({botId:l,conversationId:s.id,envId:f,dataMapping:m}),t.next=27;break;case 11:return t.next=13,c.a.createDialog(l,s.id,m);case 13:if(w=t.sent,I=w.data,h=I,!s.isForm){t.next=27;break}if(n(Object(y.c)(!0)),t.prev=18,!v||!v.clientSideSFOauth){t.next=22;break}return t.next=22,C(s,h.id);case 22:t.next=27;break;case 24:return t.prev=24,t.t0=t.catch(18),t.abrupt("return");case 27:if(!Object(p.k)(o(),l)){t.next=29;break}return t.abrupt("return");case 29:n(j(h)),n(Object(g.d)()),t.next=36;break;case 33:t.prev=33,t.t1=t.catch(0),n(Object(x.a)(t.t1));case 36:case"end":return t.stop()}}),t,null,[[0,33],[18,24]])})));return function(e,n){return t.apply(this,arguments)}}()},N=function(e){return{type:s.r,payload:{data:e}}},_=function(e,t,n){return{type:s.gb,payload:{messages:e,defaultLabels:t,mentionData:n}}},B=function(){return function(){var e=k(a.mark((function e(t,n){var r,o,i,s,c,u,f,w;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.settings,i=o.botId,s=o.separatorNewText,c=r.conversation,u=c.picked,f=c.currentNode,(w=r.dialog)&&u&&f&&Object(d.b)(v.d.conversationEnded,{oId:u.id,oName:u.name,pId:w.id,aAppType:f.type,aoId:f.id,aoName:f.name,seekTime:Object(p.d)(r.conversation.conversationStarted),total:r.conversation.conversationLength,reason:2,type:"actionBotConversation",owName:r.settings.name,pInit:{id:i,type:b.h.actionBot,appType:"actionBotBot"}}),e.prev=3,e.next=6,t(Object(g.b)(!1,!1,!1));case 6:t(Object(m.c)({botId:i,isInitialBotLoading:!1,isStartOver:!0})),t(Object(h.b)(s||v.n.separatorNewText,!0)),t(Object(y.b)(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),l.a.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()},M=function(t,n,r){return void 0===r&&(r=null),function(){var o=k(a.mark((function o(u,b){var x,I,k,O,C,S,T,N,M,E,A,D,U,P,F,W,L,z,R,H,q,V,G,J,K,Q,Y,X,Z,$,ee,te,ne,re,ae,oe,ie,se,ce,ue,de;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,x=i()(b(),["settings","conversationId"]),I=i()(b(),["settings","isWorkstation"]),k=new e((function(e,n){I||t.isRestoreDisabled?e({data:"",status:204}):c.a.restoreDialog(t.id,x).then((function(t){e(t)})).catch((function(e){n(e)}))})),a.next=6,k;case 6:if(O=a.sent,C=O.data,S=O.status,T=b(),!Object(p.k)(T,t.id)){a.next=12;break}return a.abrupt("return");case 12:if(204!==S){a.next=28;break}if(N=1===n.length,M=i()(T,["settings","additionalSettings"],{}),E=M.playMode,A=M.previewEntityType,D=E&&"bot"===A,U=[],!t.isWalkMeSearchEnabled||!t.isWalkMeSearchItemsSuggestedInitially){a.next=23;break}return a.next=21,u(Object(w.g)());case 21:P=a.sent,U=i()(P,["payload","wmSearchItems"],[]);case 23:return!N||U.length||D?r?(u(Object(m.a)(t,!1)),u(Object(g.a)(r))):(u(Object(m.a)(t)),u(Object(w.f)(t.suggestedConversations,n))):(F=n[0],u(Object(m.a)(t,!1)),u(Object(g.a)(F))),u(Object(y.a)(!1)),W=i()(b(),["messages","0","text"],""),Object(d.b)(v.d.chatOpened,{type:"actionBotBot",oId:t.id,oName:t.name,value:W}),a.abrupt("return");case 28:if(L=C.id,z=C.conversationId,R=C.sequence,H=C.data,!R){a.next=78;break}if(q=T.settings.conversations,V=q.find((function(e){return e.id===z})),G=R[R.length-1]||{},!V){a.next=78;break}return J=G.id,K=G.name,Q=G.type,Y=G.suggestions,X=G.dataType,Z={botId:t.id,conversationId:z,data:{},id:L},$=t.separatorTodayText,ee=t.separatorYesterdayText,te={today:$||v.n.separatorTodayText,yesterday:ee||v.n.separatorYesterdayText},u(Object(g.a)(V,!1)),u(j(Z,!0)),V.isForm&&R.length>0&&(R[R.length-1].isForm=!0,R[R.length-1].form=V.form,u(Object(y.c)(!0))),a.next=43,e.all(R.map((function(e){return e.textSettings?Object(p.o)(Object(f.a)(e.textSettings,H)):e.text})));case 43:if(ne=a.sent,re=R.map((function(e,t){return e.text=ne[t],e})),u(_(re,te,H)),u(Object(y.a)(!1)),!R.length){a.next=76;break}if(u(Object(g.c)(G)),ae=G.nextConversationNodeId,Q&&"message"!==Q){a.next=57;break}if(!ae){a.next=55;break}u(Object(h.c)(ae)),a.next=57;break;case 55:return a.next=57,u(Object(g.b)());case 57:if("question"===Q&&Object(p.m)(G)&&(u(Object(w.d)(Object(w.b)(G,Y))),X===v.E&&Y.length===v.A&&u(Object(w.c)(J))),"action"!==Q){a.next=74;break}return oe=i()(G,["settings","app"]),ie=i()(G,["settings","id"]),a.next=63,Object(d.c)({type:s.B,payload:{app:oe,id:ie}});case 63:if(!a.sent){a.next=73;break}if(!ae){a.next=69;break}u(Object(h.c)(ae)),a.next=71;break;case 69:return a.next=71,u(Object(g.b)());case 71:a.next=74;break;case 73:u(Object(g.g)(G,L));case 74:a.next=77;break;case 76:u(Object(g.d)());case 77:Object(d.b)(v.d.chatOpened,{type:"actionBotBot",oId:t.id,oName:t.name,pId:L,aType:"Restored",aAppType:Q,aoId:J,aoName:K});case 78:u(Object(m.a)(t,!1)),a.next=90;break;case 81:if(a.prev=81,a.t0=a.catch(0),!c.a.isCanceled(a.t0)){a.next=85;break}return a.abrupt("return");case 85:u((o=a.t0,{type:s.fb,payload:{error:o}})),u(Object(y.a)(!1)),se=t.conversationUnpublishedText,ce=t.conversationUpdatedText,a.t0&&a.t0.message!==v.D&&(ue=i()(a.t0,["response","data","reason"],""),de=v.m,ue?("WRONG_DATA"===ue.version&&(de=ce||v.n.conversationUpdatedText),"NOT_PUBLISHED"!==ue.published&&"WRONG_ID"!==ue.conversationId||(de=se||v.n.conversationUnpublishedText),"NOT_ASSIGNED"===ue.conversationId&&(de=v.m)):l.a.error(a.t0),u(Object(h.a)(de))),u(B());case 90:case"end":return a.stop()}var o}),o,null,[[0,81]])})));return function(e,t){return o.apply(this,arguments)}}()},E=function(e,t){return{type:s.ab,payload:{id:e,nodeId:t}}},A=function(e,t){return function(){var n=k(a.mark((function n(r,o){var d,f,b,g,m,y;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,d=o(),f=d.settings.botId,b=d.conversation.picked,g=d.dialog,m=u.a.isPrivateConversation(),y=i()(b,v.u,!1),!(f&&b&&g)){n.next=16;break}if(!m&&!y){n.next=9;break}r((x=e,{type:s.s,payload:{dataKey:x}})),n.next=11;break;case 9:return n.next=11,c.a.removeAnswer(f,b.id,g.id,e);case 11:if(!Object(p.k)(o(),f)){n.next=13;break}return n.abrupt("return");case 13:r(Object(w.a)()),r(E(e,t)),r(Object(h.c)(t));case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(0),r((a=n.t0,{type:s.Z,payload:{error:a}})),l.a.error(n.t0);case 22:case"end":return n.stop()}var a,x}),n,null,[[0,18]])})));return function(e,t){return n.apply(this,arguments)}}()},D=function(e){return void 0===e&&(e=!1),function(){var t=k(a.mark((function t(n,r){var o,f,b,g,h,m;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=r(),f=o.settings.botId,b=o.conversation.picked,g=o.dialog,h=u.a.isPrivateConversation(),m=i()(b,v.u,!1),!(f&&b&&g)){t.next=12;break}if(h&&m){t.next=8;break}return t.next=8,c.a.finishDialog(f,b.id,g.id);case 8:if(!Object(p.k)(r(),f)){t.next=10;break}return t.abrupt("return");case 10:n({type:s.z}),e&&(Object(d.c)({type:s.h}),n({type:s.A,payload:{isChatNeedDestroy:e}}),h||c.a.cancelAllRequests("Finishing dialog requires closing of chat window"));case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),n((a=t.t0,{type:s.y,payload:{error:a}})),l.a.error(t.t0);case 18:case"end":return t.stop()}var a}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()}}).call(this,n(29).Promise,n(17).assign,n(35))},64:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return f}));var o=n(96),i=n(286);function s(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}function c(t){return function(){var n=this,r=arguments;return new e((function(e,a){var o=t.apply(n,r);function i(t){s(o,e,a,i,c,"next",t)}function c(t){s(o,e,a,i,c,"throw",t)}i(void 0)}))}}function u(e){return d.apply(this,arguments)}function d(){return(d=c(r.mark((function t(n){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.all(n.map((function(e){return o.a.evaluateTagsById(e.tagIds)})));case 2:return a=t.sent,t.abrupt("return",n.filter((function(e,t){return a[t]})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(e){var t={isCaseSensitive:!1,includeScore:!1,includeMatches:!1,minMatchCharLength:2,shouldSort:!0,findAllMatches:!1,keys:["keywords"],location:0,threshold:.25,distance:100,ignoreLocation:!0,useExtendedSearch:!0},n=o.a.getUserJsonSettings();return n&&n.actionbot&&(t=a(t,n.actionbot.fuseSearchSettings)),new i.a(e,function(e){return e.isCaseSensitive=f(e.isCaseSensitive),e.ignoreLocation=f(e.ignoreLocation),e.shouldSort=f(e.shouldSort),e.minMatchCharLength=parseInt(e.minMatchCharLength),e.threshold=parseFloat(e.threshold),e.location=parseInt(e.location),e.distance=parseInt(e.distance),e}(t))}function p(e,t){return e.search(t).map((function(e){return e.item}))}function f(e){if("boolean"==typeof e)return e;var t="string"==typeof e&&e.toLowerCase();return"true"===t||"false"!==t&&void 0}}).call(this,n(29).Promise,n(35),n(17).assign)},699:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"default",(function(){return u}));var a=n(747),o=n(96),i=n(2),s=n(294);function c(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}var u=function(){function t(){var t=this;this._view=void 0,this._container=void 0,this.init=function(){var n,u=(n=r.mark((function e(n){var c,u,d,l,p,f,v,b,g,h,m,y,w,x;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.userGuid,u=n.walkmeEndUserId,d=n.envId,l=n.uuid,p=n.apiBaseUrl,f=n.publicPath,v=n.siteConfig,b=n.isWorkstation,g=n.walkmeOpenUrl,h=n.clientSideSFOauth,m=n.evaluateTagsById,y=n.getUserJsonSettings,w=n.globalConfig,t._view?t._view.update({userGuid:c,walkmeEndUserId:u,uuid:l,apiBaseUrl:p,publicPath:f,siteConfig:v,globalConfig:w}):(t._view=new a.a({userGuid:c,walkmeEndUserId:u,uuid:l,apiBaseUrl:p,publicPath:f,siteConfig:v,clientSideSFOauth:h,globalConfig:w}),t._bindViewEvents()),e.next=4,t._view.init();case 4:return x=e.sent,t._container=new s.b(t._view,w),t._view.emitInside({type:i.W,payload:{envId:d}}),t._view.emitInside({type:i.V,payload:{walkmeEndUserId:u}}),t._view.emitInside({type:i.X,payload:{isWorkstation:b}}),o.a.init({walkmeOpenUrl:g,evaluateTagsById:m,getUserJsonSettings:y}),e.abrupt("return",x);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new e((function(e,a){var o=n.apply(t,r);function i(t){c(o,e,a,i,s,"next",t)}function s(t){c(o,e,a,i,s,"throw",t)}i(void 0)}))});return function(e){return u.apply(this,arguments)}}(),this.open=function(e,n){return void 0===n&&(n=!1),t._view.open(e,n)},this.show=function(){return t._view.show()},this.hide=function(){return t._view.hide()},this.emitInside=function(){var e;return(e=t._view).emitInside.apply(e,arguments)},this.close=function(){t._view&&t._view.destroy()},this.on=function(e,n){return t._view.on(e,n)},this.off=function(e,n){return t._view.removeListener(e,n)},this.emit=function(e){return t._view.emitInside(e)}}return t.prototype._bindViewEvents=function(){if(!this._view)throw new Error("Invalid view");this._view.on(i.i,this.hide),this._view.on(i.j,this.show)},t}()}.call(this,n(29).Promise,n(35))},747:function(e,t,n){"use strict";(function(e,r,a){n.d(t,"a",(function(){return I}));var o=n(748),i=n.n(o),s=n(275),c=n(9),u=n(28),d=n(2),l=n(1),p=n(45),f=n(11),v=n(13);function b(){return(b=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t,n,a,o,i,s){try{var c=e[i](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(a,o)}function h(e){return function(){var t=this,n=arguments;return new r((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,s,"next",e)}function s(e){g(o,r,a,i,s,"throw",e)}i(void 0)}))}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y={position:"fixed",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none",zIndex:9999999999},w={position:"absolute",height:"550px",width:25*(window&&window.innerWidth||1)>400?"400px":"25%",minWidth:"320px",top:0,left:0,bottom:0,right:0,margin:"auto",borderRadius:"4px",boxShadow:"0px 2px 15px #DDE5F5BF",overflow:"hidden",userSelect:"none",pointerEvents:"auto"},x={width:"100%",height:"100%",border:"0",position:"absolute",top:"0",left:"0",display:"block"},I=function(t){var o,i;function g(o){var i;return(i=t.call(this)||this)._wmBotWrapper=void 0,i._wmBotContainer=void 0,i._iframe=void 0,i.update=function(e){i.createOrUpdatePrivates(e)},i.createOrUpdatePrivates=function(e){var t=e.userGuid,n=e.walkmeEndUserId,r=e.uuid,a=e.apiBaseUrl,o=e.publicPath,s=e.siteConfig,c=e.globalConfig,u=e.clientSideSFOauth;i._userGuid=t,i._clientSideSFOauth=u,i._walkmeEndUserId=n,i._uuid=r,i._apiBaseUrl=i._getActionBotApiBaseUrl(a),i._publicPath=o,i._siteConfig=s,i._globalConfig=c,i._botId=void 0},i.init=h(a.mark((function t(){var o,f,g,m,I,k,O;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Boolean(document.getElementById(l.s))?i.tryInitSession():(i._wmBotWrapper=document.createElement("div"),i._wmBotWrapper.className=l.Q+" "+l.Q+"-latest",e(i._wmBotWrapper.style,y),i._wmBotContainer=document.createElement("div"),i._wmBotContainer.className=l.P,o=b({},i._globalConfig&&i._globalConfig.initialSize&&b({},i._globalConfig.initialSize)),e(i._wmBotContainer.style,w,o),i._iframe=document.createElement("iframe"),i._iframe.id=l.s,i._iframe.setAttribute("title","WalkMe ActionBot"),e(i._iframe.style,x),f=window,g=f._walkmeExtension,m=g&&g.nonceValue||"",I=window.document.documentElement.lang||"",k='\n      <head>\n          <meta charset="utf-8">\n          <link href="'+i._publicPath+"chat."+n.h+'.css" rel="stylesheet">\n      </head>\n      <body style="margin: 0" lang="'+I+'">\n          <div id="root"></div>\n      </body>\n    ',i._wmBotContainer.appendChild(i._iframe),i._wmBotWrapper.appendChild(i._wmBotContainer),(O=c.a.deps.topContainerProvider.getTopContainer())&&O[0]?O[0].appendChild(i._wmBotWrapper):u.a.error(new Error("Can't find top container."),!0),i._iframe.contentWindow.document.write(k),i._iframe.contentWindow.publicPath=i._publicPath,i._iframe.onload=function(){var e=function(){var e=h(a.mark((function e(t){var n,r,o,i,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==v.i){e.next=6;break}return r={type:v.h.event},o=n.data,i=o.botId,c=o.conversationId,e.next=6,s.b.open(r,{botId:i,conversationId:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i._iframe.contentWindow.addEventListener("message",e);var t=i._iframe.contentWindow.document.createElement("script");t.setAttribute("nonce",m),t.onload=function(){i.emitInside({type:d.N,payload:{func:function(e){if(e&&e.type)return i.emit(e.type,e.payload)}}}),i.emitInside({type:d.U,payload:{apiBaseUrl:i._apiBaseUrl}}),i.tryInitSession()},t.src=i._publicPath+"chat."+n.h+".js",i._iframe.contentWindow.document.head.appendChild(t)},i._iframe.contentWindow.document.close(),i.hide()),t.abrupt("return",new r((function(e,t){i.on(d.P,(function(t){Object(p.h)(t),e(t)})),i.on(d.O,(function(e){Object(p.h)(e),t(e)}))})));case 3:case"end":return t.stop()}}),t)}))),i.tryInitSession=function(){i.emitInside({type:d.vb,payload:{walkmeEndUserId:i._walkmeEndUserId,userGuid:i._userGuid,clientSideSFOauth:i._clientSideSFOauth,uuid:i._uuid,siteConfig:i._siteConfig,globalConfig:i._globalConfig}})},i.open=function(){var e=h(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._botId=t.botId,i._wmBotContainer.classList.add(l.P+"-"+i._botId),i.emitInside({type:d.a,payload:b({},t,{forceUpdate:n})}),e.abrupt("return",new r((function(e,t){i.on(d.j,e),i.on(d.M,(function(){return t(d.M)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i.show=function(){i._wmBotContainer.classList.add(l.P+"-"+i._botId),i._wmBotWrapper.style.opacity=1,i._wmBotWrapper.style.zIndex=y.zIndex,i._wmBotContainer.style.boxShadow=w.boxShadow,i.emitInside({type:d.l,payload:{visibility:!0}})},i.hide=function(){i._wmBotContainer.classList.remove(l.P+"-"+i._botId),i._wmBotWrapper.style.opacity=0,i._wmBotWrapper.style.zIndex="-1",i._wmBotContainer.style.boxShadow="none",i.emitInside({type:d.l,payload:{visibility:!1}})},i._getActionBotApiBaseUrl=function(e){return e+"/chatbot"},i.createOrUpdatePrivates(o),i}i=t,(o=g).prototype=Object.create(i.prototype),o.prototype.constructor=o,m(o,i);var I=g.prototype;return I.emitInside=function(e){this._iframe&&this._iframe.contentWindow&&this._iframe.contentWindow.onWalkMeMessage&&"function"==typeof this._iframe.contentWindow.onWalkMeMessage&&this._iframe.contentWindow.onWalkMeMessage(e)},I.destroy=function(){Object(f.p)(this._wmBotWrapper),Object(f.p)(this._wmBotContainer),this._wmBotWrapper=null,this._wmBotContainer=null,this._iframe=null},g}(i.a)}).call(this,n(17).assign,n(29).Promise,n(35))},96:function(e,t,n){"use strict";(function(e,n){function r(t,n,r,a,o,i,s){try{var c=t[i](s),u=c.value}catch(e){return void r(e)}c.done?n(u):e.resolve(u).then(a,o)}window._walkmeActionBotInternal={walkmeOpenUrl:function(e){return location.href(e)},evaluateTagsById:function(){return e.resolve(!0)},getUserJsonSettings:function(){}};var a=function(){return window.parent._walkmeActionBotInternal?window.parent._walkmeActionBotInternal:window._walkmeActionBotInternal},o=function(){var t,o=(t=n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!(t&&t.length>0)||a().evaluateTagsById(t));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,a=arguments;return new e((function(e,o){var i=t.apply(n,a);function s(t){r(i,e,o,s,c,"next",t)}function c(t){r(i,e,o,s,c,"throw",t)}s(void 0)}))});return function(e){return o.apply(this,arguments)}}();t.a={init:function(e){Object.keys(e).forEach((function(t){window._walkmeActionBotInternal[t]=e[t]}))},walkmeOpenUrl:function(e){return e&&a().walkmeOpenUrl(e)},evaluateTagsById:o,getUserJsonSettings:function(){return a().getUserJsonSettings()}}}).call(this,n(29).Promise,n(35))}}]);