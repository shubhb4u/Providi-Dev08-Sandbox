window,window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[28],{1161:function(t,n,e){var r=_walkmeInternals.ctx,a=r.get("PlatformDI"),i=r.get("Consts");r.register("TutorialsManager").asCtor(e(2366).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),r.register("WalkthrusModule").asCtor(e(2367)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),r.register("StepRetriever").asCtor(e(2368)).dependencies("WalkthrusContainer"),r.register("WalkthruOnBeforeUnloadHandler").asCtor(e(2369)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),r.register("WalkthrusContainer").asCtor(e(2370)),r.register("CurrentWalkthruData").asCtor(e(2371)).dependencies("WalkthrusContainer, Consts"),r.register("CurrentStepUI").asCtor(e(2372)).dependencies("CurrentWalkthruData, StepUtils"),r.register("WalkthruStatePersister").asCtor(e(2373)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),r.register("WalkthruStateRestorer").asCtor(e(2374)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),r.register("WalkthruStepsLoader").asCtor(e(2375)).dependencies("DataFixer, CommonUtils, StepUtils,SiteConfigManager, WalkthrusContainer"),r.register("WalkthruBranchPlayer").asCtor(e(2376)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),r.register("WalkthruApi").asCtor(e(2377)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),r.register("WalkthruLegacyExternalApi").asCtor(e(2378)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),r.register("WalkthruBranchData").asCtor(e(2379)),r.register("WalkthruBalloonButtonsEventsBinder").asCtor(e(2380)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),r.register("WalkthruBalloonNotifier").asCtor(e(2381)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),r.register("WalkthruPopupNotificationsService").asCtor(e(2382)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),r.register("StepUtils").asCtor(e(2383)).dependencies("Consts"),r.register("WalkthruSurveyActivator").asCtor(e(2384)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),r.register("WalkthruSafeStartHandler").asCtor(e(2385)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),r.register("WalkthrusSiteConfigDataMigrator").asCtor(e(2386)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),r.register("DataFileWalkthruDataAppender").asCtor(e(2387)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),r.register("EndUserWalkthruDataConverter").asCtor(e(2388)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),r.register("WalkthrusDestroyer").asCtor(e(2389)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),r.register("WalkthruJawsAccessibilityUtil").asCtor(e(2390)).dependencies("StepUtils, JawsAccessibilityUtil"),r.register("WalkthruEventDataAppender").asCtor(e(2391)).dependencies("CurrentWalkthruData"),r.register("WalkthruEventsInitializer").asCtor(e(2392)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),r.register("WalkthruStartFailureHandler").asCtor(e(2393)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),r.register("WalkthruActionsFactory").asCtor(e(2394)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),r.register("WalkthruRedirectService").asCtor(e(2395)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),r.register("TriggersManager").asCtor(e(2396)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),r.register("BackButtonUtils").asCtor(e(2397)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),r.register("PlayManager").asCtor(e(2398)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),r.register("BBCodeWalkthruActivator").asCtor(e(2399)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),r.register("BBCodeWalkthruSurveyActivator").asCtor(e(2400)).dependencies("CurrentWalkthruData, BBCodeDeployables, RunningDeployablesStopper, InitiatorTypeToAppTypeMapper,Consts"),r.register("WalkthruPopupStepElementFinderExtension").asCtor(e(2401)).dependencies("StepUtils, PopupStepElementProvider"),r.register("WalkthruActionStepElementFinderExtension").asCtor(e(2402)).dependencies("StepUtils, PopupStepElementProvider"),r.register("WalkthrusModuleInitializer").asCtor(e(2403)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, WalkthruAutoStartHelper"),r.register("WalkthruOwnershipManager").asCtor(e(2404)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),r.register("PassOwnershipNextStepProvider").asCtor(e(2405)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),r.register("WalkthruPassOwnershipDeterminator").asCtor(e(2406)).dependencies("Consts"),a.register([i.PLATFORM.Web,i.PLATFORM.MobileWeb,i.PLATFORM.Desktop],function(){r.register("WalkthruAutoStartHelper").asCtor(e(2407)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),r.register("WalkthruPersistenceDataRetriever").asCtor(e(2408)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),r.register("WalkthruRunningState").asCtor(e(2409)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),r.register("AnchorTagsFixer").asCtor(e(2410)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),r.register("WalkthruConditionEvaluator").asCtor(e(2411)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),r.register("WalkthruConditionFunctions").asCtor(e(2412)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),r.register("AuditWtsManager").asCtor(e(2413)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper"),r.register("AuditStepsManager").asCtor(e(2414)).dependencies("Logger,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator"),r.register("WalkthruActionClickedEventBinder").asCtor(e(2415)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),r.register("WalkthruStepShowerButtonsCalculator").asCtor(e(2416)).dependencies("ArrayUtils, SharedConsts"),r.register("WalkthruStepShower").asCtor(e(2417)).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper,BalloonDrawerProvider, SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),t.exports={init:function(){var t=r.get("IsInEditor"),n=r.get("AuditSourceProvider");r.get("WalkthrusModuleInitializer")[t.get()&&!n.isInPreviewMode()?"postDataFileLoaded":"init"]()}}},2366:function(t,n,e){"use strict";e.r(n),e.d(n,"TutorialsManager",function(){return a});var r,n=e(0),e=e(40),a=(r=e.DeployablesManager,Object(n.__extends)(i,r),i.prototype.activateById=function(t,n){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:n})},i.prototype.autoStartEnabled=function(){return!this.t.isTrainingInStartingMode()},i);function i(t,n,e){return(n=r.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Tutorial})||this).t=e,n._name="Walkthru",n}},2367:function(t,n,e){!function(kt){t.exports=function(g,e,S,w,y,C,I,n,W,b,r,M,A,T,x,E,l,h,k,t,D,P,_,B,U,F,R,u,N,v){var L=this;L.setTutorials=function(t){i={};for(var n=0;n<t.length;n++)t[n].Steps&&e.fixSteps(t[n],S.get());w.setWalkthrus(t)},L.isTutorialPackageHidden=function(t){return!!(t=j.tutorialRunSettingsMap[t.TutorialId])&&t.isPackageHidden},L.canShowTutorial=function(t){if(0==t.IsVisible)return!1;for(var n,e=c(t,s.URL),r=!1,a=0;a<e.length;a++)if((n=e[a]).Type===s.URL?u.isLocationMatchString(n.Content):void C.error(new Error("Invalid condition type: "+n.Type))){r=!0;break}if(0<e.length&&!r)return!1;if(1==y.getSettingsValue(t.Settings,"DOCTEnabled",0)){var i=y.getSettingsValue(t.Settings,"DOCT","");if(""!=i)try{var o=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(i);if(W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.WtConditionEvaluated,t),!o)return W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(t){}}return 0<c(t,s.FIRST_STEP_MUST_EXIST).length?0!=t.Steps.length&&(o=t.Steps[0],C.customerLog('First Step Condition for "'+(o.StepTitle||o.StepText)+', Walk-Thru "'+t.Name+'"'),g.findElement(o)):(W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.CanShowWt,t),!0)},L.stopTutorial=function(t,n,e){W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.WalkthruStopped,x.getCurrentStep()),p(),e||F.releaseBalloons(),x.state=I.WALKTHRU_STATE.NOT_RUNNING,k.removeOverlay(),e=x.currentStep,x.currentStep=-1,t||E.storeStateInCookie(),_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset(),n||d(x.getCurrentWalkthru(),e,I.SURVEY_START_EVENTS.WalkThruExited)},L.startNewTutorial=function(s,c,f,p){var d=w.getWalkthruByIndex(s);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(d&&d.TutorialId,function(){try{C.customerLog("startNewTutorial : Index = "+s+". From Step = "+c+" testMode: "+f),k.fixFlash(),V(s);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=p,c=b.defaultValue(c,0),f=b.defaultValue(f,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!f){if(x.state!=I.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(s,c))return!0;Y(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||Z(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.WalkthruStarted,d);var n,e=[],r=c,a=0==(c=_walkmeInternals.ctx.get("PlayManager").findFirstStep(s,c,e));if(0<c&&!f?(n=h.get())==I.SOURCES.play||n==I.SOURCES.preview?K(s,r,c,I.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,nt(s,0,c,I.STEP_STATUS.SkippedStartedFromBiggerStep)):0==c&&0<(c=J(s))&&!f&&(t=!0,nt(s,0,c,I.STEP_STATUS.SkippedByTutorialCondition)),!q(s,!1)&&c<0){if(f)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(d.TutorialId);var i={tutorialIndex:s,wt:d,checkStepExistsTrace:e};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(v,d,i)){for(var o=0;o<e.length;o++)_walkmeInternals.ctx.get("AuditStepsManager").auditStep(d,d.Steps[e[o].stepIndex],e[o].stepStatus),K(s,e[o].stepIndex,e[o].stepIndex+1,e[o].stepStatus);var u=e[e.length-1].stepIndex,l=d;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(l,u),Y()}}else{if(f)return!0;X(s,c,a,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:void 0,p,r)}}catch(t){return C.error(t),!1}return W.deprecatedRaiseEvent("WtHasGuid",d,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),W.raiseEvent(I.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0})},L.tutorialFinished=et,L.executeTutorialNextStep=rt,L.postWelcomeStep=pt,L.executeCurrentStep=ht,L.executePreviousStep=function(){x.state=I.WALKTHRU_STATE.RUNNING,F.releaseBalloons(function(){L.stepWasCompleted(!1),x.currentStep=x.lastBackButtonStepIndex-1,L.executeTutorialNextStep()})},L.getAction=Q,L.getSiteConfigByTutorialId=function(t){return t=j.tutorialRunSettingsMap[t]?j.tutorialRunSettingsMap[t].siteConfig:S.get()},L.isTutorialIdsExist=function(t){return t=n.map(t,w.getWalkthruIndexByWalkthruId),null==(t=n.inArray(-1,t))||-1==t},L.isStepTrigger=z,L.terminateTutorial=function(){x.stepPlayStack=[],F.releaseBalloons(),p(),W.raiseEvent("WalkthruAborted")},L.checkTutorialSkipFirstStepCondition=J,L.fillMissingStepAudits=nt,L.getNextStepIncludingSplit=it,L.releaseEvents=ut,L.stepWasCompleted=st,L.getPlayConditionMode=ft,L.checkPlayStepCondition=function(t){var n=y.getSettingsValue(t.Settings,"skipStepCond","");if(0<n.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(n)}catch(t){return!0}if(1!=y.getSettingsValue(t.Settings,"PSCTEnabled",0))return!B.isActionStep(t)||"never"!=y.getSettingsValue(t.Settings,"whenToFire","");if(""==(n=y.getSettingsValue(t.Settings,"PSCT","")))return!0;try{var e=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(n);return W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),e}catch(t){return!1}},L.executeTutorialStep=ot,L.checkIfStepExistsWithSkippables=dt,L.isStepPlayable=function(t,n){return dt(t,n,void 0,void 0,void 0,I.CHECK_STEP_MODE.Normal)==n},L.checkTutorialRedirectCondition=q,L.loadTutorial=X,L.releaseBalloonsTimeouts=p,L.resetState=Y,L.cleanCurrentStepResources=function(){if(o){for(var t=o.length-1;0<=t;t--)o[t].cleanResources();o=[]}},L.addCurrentStepResource=function(t){o.push(t)},L.setMember=function(t,n){j[t]=n},L.removeCrossUsersState=Z,L.getMatchedSurvey=tt,L.getWalkthruSurveyFrequency=$;var j={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},s={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},a="PSCTMode";var m="stepCheck",i={},O=[],H=!1,G=0,o=[];function Q(t){if(null!=i[t.Id])return i[t.Id];var n=y.getSettingsValue(t.Settings,"action",null);return n?(i[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(n.actionType,n.arguments,I.STEP_PLAY_INITIATOR_ENUM.STEP,t),i[t.Id]):(C.customerLog("No action core. aborting..."),null)}function V(t){t=w.getWalkthruByIndex(t),!j.tutorialRunSettingsMap[t.TutorialId]||(t=j.tutorialRunSettingsMap[t.TutorialId].siteConfig)&&S.set(t)}function z(t,n){if("number"==typeof t)return t==n;for(var e=t.split(","),r=0;r<e.length;r++)if(n+""==e[r])return!0;return!1}function K(t,n,e,r){for(var a,i=n;i<e;i++)r!=I.STEP_STATUS.SkippedByActionStep&&(a=w.getWalkthruByIndex(t),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.NewSkippedStep,a.Steps[i]))}function c(t,n){var e=Array();if(!t.Conditions)return e;for(var r=0;r<t.Conditions.length;r++)t.Conditions[r].Type==n&&(null!=t.Conditions[r].IsEnabled&&1!=t.Conditions[r].IsEnabled||e.push(t.Conditions[r]));return e}function J(t){for(var n=c(w.getWalkthruByIndex(t),s.SKIP_FIRST_STEP),e=0;e<n.length;e++){var r=n[e];if(u.isLocationMatchString(r.Content)){var a=(a=r.ExtraData)?a-1:1;return C.customerLog("The walk-thru has a skip step condition ("+r.Content+") which is true. Skipping to: "+a),a}}return 0}function q(t,n){return 0!=(t=c(w.getWalkthruByIndex(t),s.REDIRECT)).length&&(t=(t=t[t=0]).Content,n?r.redirect(t):r.canRedirect(t))}function X(t,n,e,r,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),x.stepAppearanceIndex=0;var o=w.getWalkthruByIndex(t);W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.WalkthruLoaded,o),V(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),r=b.defaultValue(r,l.generateNewPlayGuid(o.TutorialId)),e=b.defaultValue(e,!0),n=b.defaultValue(n,0);var u=null==i?n:i;f(t,n=0===n?J(t):n,r,a,[],[],[]);try{a=a||{type:I.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,u,n,r)}catch(t){C.error(t)}h.get()!=I.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,r),pt(t)}catch(t){C.error(t)}}function f(t,n,e,r,a,i,o){p(),F.releaseBalloons(),x.state=I.WALKTHRU_STATE.RUNNING,x.currentWalkthru=t,x.currentStep=n-1,x.stepPlayHistory=a,x.stepPlayStack=i,x.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=e,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=r,E.storeStateInCookie()}function p(){M.stopTimeoutsArray("playTimeouts"),j.executeTutorialNextStepNotFinished=!1}function d(t,n,e){var r,a,i;t&&t.Settings.survey&&(r=t.Settings.survey.surveyId,(a=$(t.Settings.survey,e))&&(i={objectId:t.Id,type:I.STEP_PLAY_INITIATOR_ENUM.WALKTHRU},_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,e,i,r,a,void 0,n)))}function Y(t,n){x.currentWalkthru=-1,x.state=I.WALKTHRU_STATE.NOT_RUNNING,x.currentStep=-1,x.splitPointStack=[],x.stepPlayHistory=[],x.stepPlayStack=[],x.stepCompletedHistory=[],x.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",j.executeTutorialNextStepNotFinished=!1,i={},j.dontContinueTutorial=!1,H=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),n||E.storeStateInCookie()}function Z(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),n=0;n<t.length;n++){var e=t[n];_walkmeInternals.ctx.get("ClientStorageManager").removeData(I.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,e)}}function $(t,n){return(n=tt(t,n))&&(n.repeat||"visit")}function tt(t,n){if(t.startCondition==n||t.startCondition==I.SURVEY_START_EVENTS.Both)return t}function nt(t,n,e,r){for(var a=n;a<e;a++){var i=w.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],r)}}function et(t){F.releaseBalloons(),x.state=I.WALKTHRU_STATE.NOT_RUNNING,E.storeStateInCookie();var n=0<x.splitPointStack.length?x.splitPointStack.pop():null,e={hadSplit:!!n,finishAfterRefresh:!!t},t=x.getCurrentWalkthru();W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.WalkthruCompleted,t,e),k.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(t.TutorialId,I.DEPLOYABLE_TYPE.Tutorial),d(t,x.currentStep,I.SURVEY_START_EVENTS.WalkThruCompleted),n?(t=w.getWalkthruByIndex(n.tutorialIndex),W.deprecatedRaiseEvent("switchToWalkthru",t.Id),W.deprecatedRaiseEvent("BackFromBranch",t),f(n.tutorialIndex,n.stepIndex,n.playGuid,n.playInitiator,n.stepPlayHistory,n.stepPlayStack,n.stepCompletedHistory),g.executeTutorialNextStep()):(x.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership())}function rt(){C.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(at)}function at(){if(j.executeTutorialNextStepNotFinished)C.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(H)return H=!1,C.customerLog("executeTutorialNextStep: waiting for other window",5),C.customerLog("Waiting for other window..."),void function e(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData(),M.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),n=t.keysConfig.walkthru.waitForOtherWindow;1==t.getData(n.key,void 0,x.getCurrentWalkthru().userGuid)?(C.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(n.key,0,n.expiry,x.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):e()},500)}();var t;j.dontContinueTutorial?C.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5):x.getCurrentWalkthru().Steps.length-1!=x.currentStep?(j.executeTutorialNextStepNotFinished=!0,t=null==(t=it())?0:t.Delay,C.customerLog(b.formatString("Next step including split is: {0} seconds",t),5,I.LOG_FEATURES.BALLOON),M.playSetTimeout(function(){function t(){j.executeTutorialNextStepNotFinished=!1,ht()}x.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(x.getCurrentWalkthru().Id,function(){0<x.currentStep&&!z(x.getPreviousStep().End,I.WALKTHRU_STEP_TRIGGER.NOTHING)?F.releaseBalloons(t):t()})},1e3*t)):et()}}function it(){return function t(n,e,r){var a,i=w.getWalkthruByIndex(n);return i.Steps.length>e+1?((a=i.Steps[e+1]).TutorialIndex=n,a):(a=x.splitPointStack).length>r?t((a=a[a.length-1-r]).tutorialIndex,a.stepIndex-1,r+1):null}(x.currentWalkthru,x.currentStep,0)}function ot(e){function t(t){C.customerLog(t,5,I.LOG_FEATURES.BALLOON)}var n=b.getTimer(t),r={};G!=e.Id&&x.stepAppearanceIndex++,e.playNumber=x.stepAppearanceIndex,G=e.Id,W.raiseEvent(I.EVENTS.Walkthrus.StepExecuting,{playNum:x.stepAppearanceIndex});var a=w.getWalkthruByIndex(x.currentWalkthru),a=b.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",e.StepIndex+1,e.StepTitle,a.Name);C.customerLog(a),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepStarted,e),P.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),x.state!=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&x.state!=I.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&x.state!=I.WALKTHRU_STATE.WAITING_FOR_CONDITION&&(k=B.isActionStep(e)?I.STEP_STATUS.Shown:I.STEP_STATUS.SupposedToShow,_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,k));a=ft(e);if(!(k=L.checkPlayStepCondition(e))&&(a==I.playConditionModes.PLAY_CONDITION||a==I.playConditionModes.BOTH&&x.state!=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return C.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.SkippedByCondition),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepSkipped,e),void rt();if(ct(e)){if(-1==(a=dt(x.currentWalkthru,e.StepIndex,0,1,void 0,I.CHECK_STEP_MODE.Normal)))return C.customerLog("Keep looking for element after popup."),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.LookingForStepElement,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),x.state=I.WALKTHRU_STATE.WAITING_FOR_ELEMENT,M.playSetTimeout(function(){ht()},500),void E.storeStateInCookie();if(-2==a||-5==a)return C.customerLog(a=-5==a?"Loop detecetd":"Play condition isn't met, skipping the popup."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.SkippedNotFound),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepSkipped,e),void rt()}var i,o,u,l,s,c,f=void 0;if(k||x.state!=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(m={},v=b.getTimer(t),C.customerLog("Step - Play Condition"),f=g.findElement(e,null,m,void 0,void 0,{type:I.ELEMENT_OWNER_TYPE_NAMES.STEP,id:e.Id,stickyType:e.Settings.sticky,owner:{type:I.ELEMENT_OWNER_TYPE_NAMES.WT,id:x.getCurrentWalkthru().Id}}),r.FETime=v("Done looking for sticky step named "+(e.StepTitle||e.StepText)+" with id "+G),e.Score=m.score):(C.customerLog("Sticky PlayCondition isn't met."),f=!1),f){!0!==f&&(C.customerLog("Element found:"),C.customerLog(f),(d=U.getComplexHtmlElements(e,f))&&(f=d.elements,c=d.parentElement)),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepElementFound,e),W.raiseEvent("BeforeNewStepShown");var p,d,h,k,v=(k=0<x.stepPlayStack.length?x.stepPlayStack[x.stepPlayStack.length-1]:null)?D.getStepById(k).StepIndex:null,m=e.Id;if(x.stepPlayHistory.push(m),(0<x.stepPlayStack.length?x.stepPlayStack[x.stepPlayStack.length-1]:null)!=m&&x.stepPlayStack.push(m),y.getSettingsValue(e.Settings,"fake",!1))return C.customerLog("This is a fake step. Continue to next step."),E.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.FakeFound),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.FakeStep,e),void rt();x.state=I.WALKTHRU_STATE.RUNNING,B.isActionStep(e)?M.playSetTimeout(function(){Q(e).doAction(),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepPerforming,e)},100):(d={type:I.ELEMENT_OWNER_TYPE_NAMES.step,id:e.Id,owner:{type:I.ELEMENT_OWNER_TYPE_NAMES.WT,id:x.getCurrentWalkthru().Id}},k=_walkmeInternals.ctx.get("TriggersManager").handle(f,e,x.currentStep,x.currentWalkthru,v,d),p=k.executeNextStep,m=k.clearElementEventsFuncs,v=k.buttons,y.getSettingsValue(e.Settings,"waitOtherWindow",!1)&&(H=!0),r.logicTime=n("Finished pre-balloon logic"),d=e.StepTitle,k=e.StepText,(n=e).DesignTemplateId||n.DesignTemplatePlaceholderConfigs&&0!=n.DesignTemplatePlaceholderConfigs.length||(e.DesignTemplatePlaceholderConfigs=N.createPlaceHolderConfigs(kt.get("SharedConsts").templateEntityType.balloon,e.StepTitle,e.StepText)),(h=_walkmeInternals.ctx.create("Balloon",{element:f,parentElement:c,forceEmbedBalloonInIframe:!1,positionHelper:A,dontShowIoBalloon:!P.isFeatureEnabled("multSpot")&&(s=u=e,1<(c=x.stepPlayHistory).length&&(l=w.getWalkthruByIndex(x.currentWalkthru),s=D.getStepById(c[c.length-2],l)),z(u.End,I.WALKTHRU_STEP_TRIGGER.NOTHING)||z(s.End,I.WALKTHRU_STEP_TRIGGER.NOTHING)),isFirstStep:function(){var t=x.stepPlayHistory;if(t.length<2)return!0;for(var n=0;n<t.length-1;n++){var e=w.getWalkthruByIndex(x.currentWalkthru),e=D.getStepById(t[n],e);if(!b.isDefined(e.Settings.action))return!1}return!0}(),stepSettings:e.Settings,visibilityFilter:A.getVisibleFilterKey(e),text:{title:d,content:k,subText:(l=S.get().StepsInfoText,s=(u=lt()).totalVisibleSteps,u=u.passedVisibleSteps,l=P.isFeatureEnabled("floatingsubtext")?(l=l.replace("{0}",I.SUBTEXT_CURRENT_START+u+I.SUBTEXT_CURRENT_END)).replace("{1}",I.SUBTEXT_TOTAL_START+s+I.SUBTEXT_TOTAL_END):(l=l.replace("{0}",u)).replace("{1}",s))},end:e.End,position:e.Position,buttons:{next:v.nextButton,done:v.doneButton,back:0<=v.backButtonStepIndex},data:{balloonEntityId:e.Id,containerEntityId:e.TutorialId,type:e.Type},configuration:e.Configuration,logger:C,drawer:R.getBalloonDrawer(e.Configuration,e),siteConfig:S.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:e.DesignTemplatePlaceholderConfigs,placeholderVariableValues:lt(),initiatorData:{initiator:e,type:I.STEP_PLAY_INITIATOR_ENUM.STEP}})).onDestroy(function(){ut(f,elementEvents)}),h.setReleaseEvents(m),T.add(h),E.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.Shown),P.isFeatureEnabled("jawsAccessibility")&&(m=d||k,d&&k&&(m+=". "+k),m&&f.attr("alt",m)),h.Show(!0,function(t,n){wmjQuery.extend(!0,r,t),t=n,W.raiseEvent(I.EVENTS.Walkthrus.ShowStepBalloon,{balloonDiv:t,step:e}),n={Element:f,Balloon:n},W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepShown,e,n),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepPerforming,e,n),h.SetTimeoutOn(function(){!function(){switch(x.state){case I.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case I.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case I.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return 1;default:return}}()||(b.getSettingsValue(x.getCurrentStep().Settings,"sticky",0)?(C.customerLog("Sticky - keep looking for element.",5),F.releaseBalloons(),x.state=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,ht()):x.getCurrentStep().IsSkippable?(j.dontContinueTutorial=!1,C.customerLog("Skippable - continue to next step."),rt()):x.state!=I.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(C.customerLog("Stopping walk-thru."),F.releaseBalloons(),x.state=I.WALKTHRU_STATE.PAUSED,W.raiseEvent("WalkthruAborted"),W.raiseEvent("WalkthruStopped")))}),p&&(st(),rt())}),y.getSettingsValue(e.Settings,"isSelfExecuting",!1)&&(i=e,o=f,M.libSetTimeout(function(){var t;switch((t=i.End.split(/,/))[0]==I.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<t.length?b.getInt(t[1]):b.getInt(t[0])){case I.WALKTHRU_STEP_TRIGGER.CLICK:C.customerLog("Self Executed Step - Trigger: Click",3),_.click(o);break;case I.WALKTHRU_STEP_TRIGGER.HOVER:C.customerLog("Self Executed Step - Trigger: Hover",3),_.hover(o);break;case I.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:C.customerLog("Self Executed Step - Trigger: Text Input",3),_.text(o,i.Settings.selfExecuteText,void 0,void 0,i);break;case I.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var n=i.Settings.complexHtml&&i.Settings.complexHtml.val;n?(_.select(o,n),C.customerLog("Self Executed Step - Trigger: Select Value",3)):C.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:C.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),j.dontContinueTutorial=!1,rt()}},1e3*i.Settings.reactionTime||I.DEFAULT_REACTION_TIME)))}else C.customerLog("Element not found."),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepElementNotFound,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),x.state==I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(C.customerLog("Step was sticky. Keep looking for the element."),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.WaitingForStickyStep,e),x.state=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,M.playSetTimeout(function(){ht()},500),E.storeStateInCookie()):e.IsSkippable||y.getSettingsValue(e.Settings,"skipNotExists",!1)?(B.isActionStep(e)?(C.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.NonValidActionStep)):(C.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.SkippedNotFound)),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepSkipped,e),rt()):(C.customerLog("Keep looking for the element."),W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.LookingForStepElement,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),x.state=I.WALKTHRU_STATE.WAITING_FOR_ELEMENT,M.playSetTimeout(function(){ht()},500),E.storeStateInCookie())}function ut(t,n){for(var e=0;e<n.length;e++)t.unbind(n[e]+".mt");return!1}function lt(){for(var t,n=w.getWalkthruByIndex(x.currentWalkthru).Steps,e=0,r=0,a=0;a<n.length;a++)(t=n[a]).Type==I.STEP_TYPE.Action||parseInt(y.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(y.getSettingsValue(t.Settings,"fake",0))||(e++,a<=x.currentStep&&r++);return{totalVisibleSteps:e,passedVisibleSteps:r}}function st(t){t=b.defaultValue(t,!0);var n,e=x.getCurrentStep();W.deprecatedRaiseEvent(I.EVENTS.Walkthrus.StepCompleted,e),x.stepCompletedHistory.push(e.Id),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.Performed),y.getSettingsValue(e.Settings,"resumeOtherWindow",!1)&&(t=(n=_walkmeInternals.ctx.get("ClientStorageManager")).keysConfig.walkthru.waitForOtherWindow,n.saveData(t.key,1,t.expiry,x.getCurrentWalkthru().userGuid))):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(x.getCurrentWalkthru(),e,I.STEP_STATUS.MovedBack)}function ct(t){return t.Type==I.STEP_TYPE.Popup&&1==y.getSettingsValue(t.Settings,"popup-play-condition",0)}function ft(t){return y.getSettingsValue(t.Settings,a,I.playConditionModes.PLAY_CONDITION)}function pt(t){-1==x.currentStep&&q(t,!0)||rt()}function dt(l,s,c,f,p,d,h){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,n){return function(t){if(O&&0!=O.length){for(var n,e=[];0<O.length&&(n=O.pop()).id!=t;)e.push(n);if(0<e.length)for(;0<e.length;)O.push(e.pop())}}(n),C.customerLog("returned checking "+s+" ("+e.Id+") result: "+t,5,m),t}var n=w.getWalkthruByIndex(l),e=n.Steps[s];f=b.defaultValue(f,1),c=b.defaultValue(c,0);var r=function(t){for(var n=0;n<O.length;n++)if(O[n].id==t)return!0;return!1}(e.Id);if(C.customerLog("Checking if step index "+s+" ("+e.Id+") can be played. looped: "+r+" on mode:"+d,5,m),O.push({id:e.Id,mode:d}),r)return t(-5,e.Id);var a=!0;ft(e)!=I.playConditionModes.STICKY_CONDITION&&(a=L.checkPlayStepCondition(e));var i=y.getSettingsValue(e.Settings,"fake",!1),o=y.getSettingsValue(e.Settings,"skipNotExists",!1)||e.IsSkippable||!a||i,r=a,r=o?r?I.STEP_STATUS.SkippedNotFound:I.STEP_STATUS.SkippedByCondition:I.STEP_STATUS.SupposedToShow;if(p&&p.push({stepIndex:s,stepStatus:r}),a&&!i&&C.customerLog("Step - Find Element "+(h||"")),a&&!i&&g.findElement(e,void 0,void 0,void 0,void 0,{type:I.ELEMENT_OWNER_TYPE_NAMES.step,id:e.Id,stickyType:e.Settings.sticky,owner:{type:I.ELEMENT_OWNER_TYPE_NAMES.WT,id:n.Id}}))return B.isActionStep(e)?t(function(t){var n=Q(t);if(n.getGoToData){var e=n.getGoToData();if((e=dt(e.tutorialIndex,e.stepIndex,c,f,p,I.CHECK_STEP_MODE.Normal))<0)return e}else if("stopWt"==n.type)return-2;return t.StepIndex}(e),e.Id):B.isPopupStep(e)?t(function(t){if(!ct(t)||1!=f)return t.StepIndex;if(w.getWalkthruByIndex(l).Steps.length>t.StepIndex){var n=dt(l,t.StepIndex+1,c,f,p,I.CHECK_STEP_MODE.Normal);return n<0?n:t.StepIndex}}(e),e.Id):t(s,e.Id);if(i=s+f,o){if(i<0)return t(-2,e.Id);if(i!=n.Steps.length)return C.customerLog("Checking if step "+s+" ("+e.Id+") can be played. Skipping to: "+i,5,m),t(u=dt(l,i,c,f,p,I.CHECK_STEP_MODE.Normal),e.Id);if((i=x.splitPointStack).length>c){var u=dt((i=i[i.length-1-c]).tutorialIndex,i.stepIndex,c+1,f,p,I.CHECK_STEP_MODE.Normal);return C.customerLog("Checking if step "+s+" ("+e.Id+") can be played. reached last step",5,m),t(u,e.Id)}return t(-2,e.Id)}return t(-1,e.Id)})}function ht(){var t=x.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){ot(t)})}_walkmeInternals.ctx.get("WmInternals").on(I.EVENTS.Flows.BeforeFlowStarted,function(){Z()})}}.call(this,e(2))},2368:function(t,n){t.exports=function(i){function e(t,n){return-1<(t=i.getWalkthruIndexByWalkthruId(t))&&(t=r(n,i.getWalkthruByIndex(t)))?t:null}function r(t,n){if(n)return o(t,n);for(var e=i.getWalkthrus(),r=0;r<e.length;r++){var a=o(t,e[r]);if(a)return a}return null}function o(t,n){for(var e=n.Steps,r=0;r<e.length;r++)if(e[r].Id==t)return e[r];return null}this.getStepByWalkthruAndStepIds=e,this.getStepById=r,this.getStepIndex=function(t,n){return(t=e(n,t))?t.StepIndex:-1}}},2369:function(t,n){t.exports=function(t,n,e,r,a,i,o){this.register=function(){o.register(l)};var u=!(this.setIgnoreNextBeforeUnload=function(t){u=t});function l(){i.isEmpty()&&(t.customerLog("onbeforeunload called",1),u?u=!1:(n.setMember("dontContinueTutorial",!0),e.pauseAllTimeouts(),r.get().enabled()?r.get().loseOwnership(!1,!0):a.isFeatureEnabled("noUnload")&&e.setWalkmeTimeout(function(){n.setMember("dontContinueTutorial",!1),e.resumeAllTimeouts()},3e3)))}}},2370:function(t,n){t.exports=function(){var t=this;t.getWalkthrus=function(){return r},t.setWalkthrus=function(t){r=t},t.getWalkthruByIndex=e,t.getWalkthruById=function(t){for(var n=0;n<r.length;n++)if(r[n].TutorialId==t)return r[n];return null},t.getWalkthruIndexByWalkthruId=function(t){for(var n=-1,e=0;e<r.length;e++)if(r[e].TutorialId==t){n=e;break}return n},t.getStepByIndex=function(t,n){if((t=e(t))&&t.Steps[n])return t.Steps[n]};var r=[];function e(t){return r[t]}}},2371:function(t,n){t.exports=function(t,n){var e=this;function r(){return t.getWalkthruByIndex(e.currentWalkthru)}function a(t){var n=r();return n&&n.Steps&&n.Steps[t]}e.currentWalkthru=-1,e.currentStep=-1,e.stepAppearanceIndex=0,e.splitPointStack=[],e.stepPlayHistory=[],e.stepPlayStack=[],e.stepCompletedHistory=[],e.lastBackButtonStepIndex=-1,e.getCurrentWalkthru=r,e.getCurrentStep=function(){return a(e.currentStep)},e.getPreviousStep=function(){return a(e.currentStep-1)},e.getNextStep=function(){return a(e.currentStep+1)},e.getStep=a,e.state=n.WALKTHRU_STATE.NOT_RUNNING}},2372:function(t,n){t.exports=function(e,r){this.shouldKeepOverlay=function(){var t,n=e.getCurrentStep();return r.isSpotlightStep(n)&&r.isPopupStep(n)&&(t=e.getPreviousStep(),n=e.getNextStep(),r.isPopupStep(t)||r.isPopupStep(n))}}},2373:function(t,n){t.exports=function(f,p,e,r,d,h,k){this.storeStateInCookie=function(){var t,n,e,r=void 0,a=void 0,i=void 0,o=void 0,u=d.getCurrentWalkthru(),l=u?u.TutorialId:-1,s=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),c=p.getCurrentInteractionGuid();d.state==f.WALKTHRU_STATE.RUNNING||d.state==f.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(r=d.currentStep+1,u.Steps.length<=d.currentStep+1&&(a=1)):d.state==f.WALKTHRU_STATE.WAITING_FOR_SPLIT?(r=d.currentStep,i=h.splitTutorialIds,o=h.splitStartFromStepId):r=d.currentStep,t=r,n=a,e=i,u=o,r=c,(a={})[v.CURRENT_TUTORIAL_COOKIE_NAME]=l,a[v.CURRENT_STATE_COOKIE_NAME]=d.state,a[v.CURRENT_STEP_COOKIE_NAME]=t,a[v.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=d.stepAppearanceIndex,a[v.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,a[v.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,a[v.SPLIT_POINT_COOKIE_NAME]=d.splitPointStack,a[v.TUTORIAL_FINISHED_COOKIE_NAME]=n,a[v.STEP_PLAY_HISTORY_COOKIE_NAME]=d.stepPlayHistory,a[v.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=e,a[v.SPLIT_START_FROM_STEP_COOKIE_NAME]=u,a[v.INTERACTION_GUID_COOKIE_NAME]=r,k.raiseEvent("SavingPersistenceData",a),i=a,c=(o=_walkmeInternals.ctx.get("ClientStorageManager")).keysConfig.walkthru.persistenceData,o.saveData(c.key,i,c.expiry,s)},this.getPersistenceData=function(t){var n=i(t),t=a(n,-1),t={state:r.getInt(n[v.CURRENT_STATE_COOKIE_NAME],f.WALKTHRU_STATE.NOT_RUNNING),step:r.getInt(n[v.CURRENT_STEP_COOKIE_NAME],-1),playNum:n[v.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||d.stepAppearanceIndex,tutotrialGUID:n[v.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:n[v.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:r.defaultValue(n[v.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:r.defaultValue(n[v.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:r.defaultValue(n[v.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:r.defaultValue(n[v.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:e.getWalkthruIndexByWalkthruId(t),splitTutorialIds:r.defaultValue(n[v.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:r.defaultValue(n[v.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:n[v.INTERACTION_GUID_COOKIE_NAME]};return k.raiseEvent("GettingPersistenceData",{persistenceData:n,current:t}),t},this.getRunningWalkthruId=function(t){return a(i(t))};var v=f.WALKTHRU_PERSISTANCE_DATA_FIELDS;function a(t,n){return r.getInt(t[v.CURRENT_TUTORIAL_COOKIE_NAME],n)}function i(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(f.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}},2374:function(t,n){t.exports=function(e,o,u,l,s,c,f,p,d,h,k,v,m,g,r){function t(t){f.customerLog("Restoring cross user state",5);var n=r.getAllUserGuids();if(!n.length)return t&&t(),!1;for(var e=0;e<n.length;e++)a(n[e],t);return!1}function a(a,i){var t=h.getRunningWalkthruId(a);function n(){var t,t=(t=a,n=h.getPersistenceData(a),(t=o.getStepByIndex(n.tutorial,n.step))&&(n.isTutorialFinished||n.state!=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&n.state!=v.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||p.getSettingsValue(t.Settings,"sticky",0)||t.IsSkippable||(f.customerLog("page change happened while waiting for element - pausing walkthru",2),n.state=v.WALKTHRU_STATE.PAUSED)),n);u.stepAppearanceIndex=t.playNum,u.splitPointStack=t.splitPointStack,u.stepPlayHistory=t.stepPlayHistory,u.currentWalkthru=t.tutorial,u.currentStep=t.step,u.stepCompletedHistory=t.stepCompletedHistory,u.state=t.state,d.raiseEvent("RestoringStateFromCookie",t),l.setCurrentInteractionGuid(t.interactionGuid),t.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=t.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=t.playInitiator;var n,e=o.getStepByIndex(u.currentWalkthru,u.currentStep);function r(){s.playSetTimeout(function(){c.executeCurrentStep()},1e3*e.Delay)}if((u.state==v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||u.state==v.WALKTHRU_STATE.PASSING_OWNERSHIP&&e)&&(u.currentStep--,(n=o.getStepByIndex(u.currentWalkthru,u.currentStep))&&(n.playNumber=u.stepAppearanceIndex),c.stepWasCompleted(!0),u.currentStep++),f.customerLog("isTutorialFinished: "+t.isTutorialFinished,5),1!=t.isTutorialFinished||u.state!=v.WALKTHRU_STATE.RUNNING&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&u.state!=v.WALKTHRU_STATE.PASSING_OWNERSHIP)if(f.customerLog("Continue from cookie: currentTutorial: "+u.currentWalkthru+" -- currentState: "+u.state+" -- currentStep: "+u.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+a,5),!e||u.state!=v.WALKTHRU_STATE.RUNNING&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_CONDITION&&u.state!=v.WALKTHRU_STATE.PASSING_OWNERSHIP)if(e&&u.state==v.WALKTHRU_STATE.WAITING_FOR_REDIRECT)c.loadTutorial(u.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(e&&u.state==v.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)c.startNewTutorial(u.currentWalkthru,u.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!e||u.state!=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(u.state==v.WALKTHRU_STATE.WAITING_FOR_SPLIT)m.splitTutorialIds=t.splitTutorialIds,m.splitStartFromStepId=t.splitStartFromStepId,k.resumeSplit();else{if(u.state!=v.WALKTHRU_STATE.PAUSED)return c.resetState(),f.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+a+")",5),i&&i(!1),!1;f.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),g.releaseBalloons(),c.releaseBalloonsTimeouts(),c.resetState(),d.raiseEvent("WalkthruAborted")}else p.getSettingsValue(e.Settings,"sticky",0)?(f.customerLog("Sticky - keep looking for element",5),u.state=v.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,r()):e.IsSkippable&&(u.getCurrentWalkthru().Steps.length==u.currentStep+1?c.tutorialFinished():(u.currentStep++,u.state=v.WALKTHRU_STATE.RUNNING,r()));else r();else c.tutorialFinished(!0);return i&&i(!0),!0}t?e.afterStepsLoaded(t,n):n()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=a}},2375:function(n,t,e){!function(t,d){n.exports=function(u,l,s,c,f){var e=this;e.LoadStepsForWT=function(t){return e.afterStepsLoaded(t,function(){})},e.afterStepsLoaded=function(n,t){if(a[n])return a[n].then(t,t);var i=f.getWalkthrus(),o=function(t){for(var n=f.getWalkthrus(),e=0;e<n.length;e++)if(n[e].TutorialId==t)return e;return-1}(n);return i[o]&&0==i[o].Steps.length?(a[n]=new d(function(a,t){r.load(n).then(function(t){var n,e,r;0==i[o].Steps.length?(n=o,e=t,(r=f.getWalkthrus())[n].Steps=e,u.fixSteps(r[n],c.get()),function(t,n){for(var e=[],r=0;r<t.length;r++){var a,i=t[r];s.isBranchStep(i)&&(a=i.Settings.action.arguments.wtId,e.push(p(a))),e=e.concat(function(t){var n=[];if(t.LinkedTutorialIds)for(var e=t.LinkedTutorialIds.split(";"),r=0;r<e.length;r++)e[r]&&n.push(p(e[r]));return n}(i))}l.executeParallel({functionsToExecute:e,successCallback:n})}(t,a)):a()},t)}).then(t,t),!0):t()};var r,a={};function p(n){return function(t){a[n]?t():e.afterStepsLoaded(n,t)}}r=t.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"steps",fileNamePrefix:"wt"})}}.call(this,e(2),e(12))},2376:function(t,n){t.exports=function(i,o,u,l,s,c,f,p,d,h,k,v,m){function g(a){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var n;a=a||1e3;var t,e,r=0;1==v.splitTutorialIds.length?(e=v.splitTutorialIds[0],null!=v.splitStartFromStepId&&(-1!=(t=o.getStepIndex(v.splitStartFromStepId,e))&&(r=t),i.customerLog(m.formatString("Resuming split, walkthru id: {0}, step index: {1}",e,r)))):e=function(t){try{i.customerLog("Multiple branch: Going through all walk-thrus.");var n=(e=k.map(t,function(t){return l.getWalkthruById(t).Steps[0]}),e=k.map(e,function(t){var n,n=(n=t.TutorialId,(n=l.getWalkthruById(n))?n.Name:"");return i.customerLog("Check walk-thru: "+t.TutorialId+" ("+n+")"),(n=s.findElement(t))?i.customerLog("First step found."):i.customerLog("First step not found."),{step:t,element:n}}),e=k.filter(e,function(t){return t.element}),k.map(e,function(t){return t.step}));if(1==n.length)return n[0].TutorialId;if(!(1<n.length))return null;i.customerLog("can't decide which tutorial to play",5),i.customerLog(n.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(t){i.error(t)}var e}(v.splitTutorialIds),e?(f.deprecatedRaiseEvent("switchToWalkthru",e),n=l.getWalkthruIndexByWalkthruId(e),c.playSetTimeout(function(){var t={type:p.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:d.getCurrentStep().Id,appType:p.EVENT_SENDER_EVENT_APPS.Step};u.loadTutorial(n,r,!1,void 0,t)},a),h.storeStateInCookie()):(i.customerLog("Try again in 1000ms."),c.playSetTimeout(function(){g()},1e3))}catch(t){i.error(t)}})}this.makeSplit=function(t,n,e,r,a){d.state=p.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=e&&(n=n,d.getCurrentWalkthru().Steps.length<=d.currentStep+1||d.splitPointStack.push({tutorialIndex:d.currentWalkthru,stepIndex:null!=n?n:d.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:d.stepPlayHistory,stepCompletedHistory:d.stepCompletedHistory,stepPlayStack:d.stepPlayStack})),v.splitTutorialIds=t,v.splitStartFromStepId=r,h.storeStateInCookie(),u.stepWasCompleted(),g(a)},this.resumeSplit=g}},2377:function(t,n,e){!function(n){function v(t){return(v="function"==typeof n&&"symbol"==typeof n.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof n&&t.constructor===n&&t!==n.prototype?"symbol":typeof t})(t)}t.exports=function(o,s,u,i,l,c,f,t){var p=this;p.getWalkthrus=function(t){try{for(var n=o.getWalkthrus(),e=new Array,r=0;r<n.length;r++){var a=(a=n[r].CustomField1)&&(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"),i={Index:r,Name:n[r].Name,Id:n[r].TutorialId,Visible:n[r].IsVisible,CustomField1:a,Description:n[r].Description,Keywords:n[r].Keywords};t&&(i.ConditionsPassed=_walkMe.canShowTutorial(n[r]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(n[r]),null==n[r].Keywords?i.Keywords=[]:i.Keywords=n[r].Keywords),e.push(i)}return e}catch(t){d("walkMeAPI - error running getWalkthrus.",3)}},p.getWalkthrusLabels=function(t){try{var n=(l=c.getSettingsValue(s.get().Settings,"labels",null))&&1==l.useLabels?f.get():null;if(null==n)return null;for(var e=this.getWalkthrus(t),r=function(t,n){for(var e=[],r=0;r<t.length;r++)for(var a=t[r].LinkedTutorials,i=0;i<a.length;i++)e.push(a[i]);for(var o=[],r=0;r<n.length;r++)k(n[r].Id,e)||o.push(n[r]);return o}(n,e),a=s.get(),i=[],o=0;o<n.length;o++){var u={Name:n[o].Name,Id:n[o].Id,Walkthrus:function(t,n,e){for(var r,a=[],i=0;i<t.length;i++)k(t[i].Id,n)&&((r=mtjQuery.extend(!0,{},t[i])).labelId=e,a.push(r));return a}(e,n[o].LinkedTutorials,n[o].Id)};i.push(u)}return{unlabeledWalkthrus:r,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(t){d("walkMeAPI - error running getWalkthrusLabels.",3)}var l},p.startWalkthruById=function(t,n){try{var e=(t="object"!=v(t)?{id:t,fromStep:n}:t).id,r=t.fromStep,a=t.playInitiator;if(e<0||"number"!=typeof e)return!1;var i=h(e);return!(i<0)&&(a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.API},p.startWalkthruByIndex({index:i,fromStep:r,playInitiator:a}))}catch(t){d("walkMeAPI - error running startWalkthruById.",3)}},p.startWalkthruByIndex=function(t,n){try{if(!i.isWalkMeVisible())return!1;var e=(t="object"!=v(t)?{index:t,fromStep:n}:t).index,r=t.fromStep,a=t.playInitiator;return!(e<0||"number"!=typeof e)&&(a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.API},l.raiseEvent(u.EVENTS.ApiWasCalled,{initiator:a}),_walkMe.startNewTutorial(e,r,!1,a))}catch(t){d("walkMeAPI - error running startWalkthruByIndex.",3)}},p.canStartWalkthru=function(t,n){try{if(!i.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var e=h(t);return!(e<0)&&_walkMe.startNewTutorial(e,n,!0,u.STEP_PLAY_INITIATOR_ENUM.API)}catch(t){d("walkMeAPI - error running canStartWalkthru.",3)}},p.setWalkthruVisibility=function(t,n){try{var e=o.getWalkthrus(),r=h(t);return!(r<0)&&(e[r].IsVisible=n,!0)}catch(t){d("walkMeAPI - error running setWalkthruVisibility.",3)}},p.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(t){d("walkMeAPI - error running stopWalkthru.",3)}};var d=t.wrapCustomerLog("walkmeAPI");function h(t){for(var n=o.getWalkthrus(),e=0;e<n.length;e++)if(n[e].TutorialId==t)return e;return-1}function k(t,n){for(var e=0;e<n.length;e++)if(n[e]==t)return 1}}}.call(this,e(39).wmSymbol)},2378:function(t,n){t.exports=function(a,t,n,e,i){var r=this;r.setTutorials=a.setTutorials,r.isTutorialPackageHidden=a.isTutorialPackageHidden,r.canShowTutorial=a.canShowTutorial,r.stopTutorial=a.stopTutorial,r.startNewTutorial=a.startNewTutorial,r.tutorialFinished=a.tutorialFinished,r.executeTutorialNextStep=a.executeTutorialNextStep,r.postWelcomeStep=a.postWelcomeStep,r.executeCurrentStep=a.executeCurrentStep,r.getCurrentTutorial=t.getCurrentWalkthru,r.getTutorials=n.getWalkthrus,r.setTutorialsForEditor=function(t,n){try{for(var e=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),r=0;r<e.length;r++)e[r].userGuid=n;a.setTutorials(e)}catch(t){i.error(t)}},r.getState=function(){return t.state},r.forceSplit=function(){e.makeSplit.apply(null,arguments)},r.runTutorialsActionConditions={}}},2379:function(t,n){t.exports=function(){this.splitTutorialIds=[],this.splitStartFromStepId}},2380:function(t,n){t.exports=function(r,a,i,o,n,u,l,s,c){function f(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){var n;n={ClickEvent:t},o.raiseEvent("UserStoppedWalkthru",n),(t=-1==r.currentStep)||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(r.getCurrentWalkthru(),r.getCurrentStep(),a.STEP_STATUS.Exited),i.stopTutorial(t),o.raiseEvent("UserStoppedWalkthruAfterStop",n)})}function p(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function d(t){for(var n,e=u.getAll(),r=0;r<e.length;r++)e[r].releaseEvents(t)&&(n=!0);return n}function h(t){return t.Type==a.STEP_TYPE.Popup&&t.LinkedTutorialIds&&i.isTutorialIdsExist(t.LinkedTutorialIds.split(";"))&&(n.makeSplit(t.LinkedTutorialIds.split(";")),1)}this.addButtonEventsToBalloon=function(t,n){var e;e=t,mtjQuery(".walkme-action-next, .walkme-action-start",e).click(function(){!function(){o.raiseEvent("NextButtonClicked");var t=r.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),p(t),d()||(r.state=a.WALKTHRU_STATE.RUNNING,l.releaseBalloons(function(){h(t)||(i.stepWasCompleted(),i.executeTutorialNextStep())}))}()}),mtjQuery(".walkme-action-back",e).click(function(){o.raiseEvent("BackButtonClicked"),p(r.getCurrentStep()),r.stepPlayStack.pop(),!s.isFeatureEnabled("backButtonAlways")&&d(r.lastBackButtonStepIndex-1)||i.executePreviousStep()}),mtjQuery(".walkme-action-done",e).click(function(){!function(){o.raiseEvent("DoneButtonClicked");var t=r.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),p(t),h(t)||d()||(i.stepWasCompleted(),i.tutorialFinished())}()}),f(t),c.addButtonEventsToBalloon(t,n)},this.attachBalloonXButtonClickEvent=f}},2381:function(t,n){t.exports=function(u,l,s,c,f,p,d,h,n,k,v){var m,g;this.showFailPopup=function(t,n,e,r){r+="<div style='float: right'>",r+=function(t,n){(n=u.fixConfiguration(n)).ButtonBorderColor=n.ButtonBorderColor||"#6c84a6";var e="rtl"==t.Direction?"right":"left";u.fixGradientColorsInConfiguration(n,"ButtonBgColor"),u.fixGradientColorsInConfiguration(n,"ButtonBgColor2");var r=n.ButtonBgColor,a=n.ButtonBgColor2,i=n.ButtonShadowWidth,o=n.BalloonButtonRadius,o="CSS-RESET "+((t=r!=a)?"background:-moz-linear-gradient(top, "+r+", "+a+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+r+"), color-stop(100%,"+a+"));background:-webkit-linear-gradient(top, "+r+" 0%,"+a+" 100%);background:-o-linear-gradient(top, "+r+" 0%,"+a+" 100%);background:-ms-linear-gradient(top, "+r+" 0%,"+a+" 100%);background:linear-gradient(to bottom, "+r+" 0%,"+a+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+r+'", endColorstr="'+a+'",GradientType=0 );':"background-color:"+r+";")+"border: 1px solid "+n.ButtonBorderColor+";color:"+n.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+e+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+i+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+i+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+i+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+o+"px;-webkit-border-radius:"+o+"px;border-radius:"+o+"px;";return r!=a&&k.isIE()&&(o+="border-radius: 0px;"),t&&CommonUtils.isGradientUsingFilter(o)&&(o+="background: url("+p.get()+"/player/resources/images/spacer.gif) repeat;"),"<button class='walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID' type='button' style='"+(o=o.replace(/CSS-RESET/g,S))+"'>OK</button>"}(t,n),function(t,n,e,r,a,i){r=(r=(r='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+n+" mt-custom-popup-"+n+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+r+'px">'+e+"</div>").replace(/CSS-RESET/g,S)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+a),(e=h.getTopContainer()).append(r),(m=mtjQuery("#walkme-popup-body",e)).css({position:"fixed","z-index":l.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),u.setStyleForBalloon(m,t,!1);var o=0;mtjQuery.each(mtjQuery("[width], [style*=width]",m),function(t,n){mtjQuery(n).width()>o&&(o=mtjQuery(n).width())}),m.width()<o&&m.css("width",o+"px"),f.centerElementInPage(m,!1),g=c.playSetInterval(function(){f.centerElementInPage(m,!0)},1e3),v.shouldHandlePageAsFramesets()||s.displayOverlay(2147483630,!0),m.fadeIn("slow"),d.addButtonEventsToBalloon(m,{objectId:a,type:l.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),i&&i(m)}(n,"first-step-not-available",r+="</div>",420,e.Id,a)},this.closePopup=e;var S="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function e(t){g&&g.clear(),n.shouldKeepOverlay()||s.removeOverlay(),s.destroyDivWithIframes(m,t),m=null}function a(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){e()})}}},2382:function(t,n){t.exports=function(a,i){this.showFailedToStartPopup=function(t,n,e){if("v3"==t.BalloonSettings.BalloonVersion||"vm1"==t.BalloonSettings.BalloonVersion)return a.showFailedToStartPopup(t,n,e.Settings.bbcode_v,e.Id);var r=t.BalloonSettings,n={balloonSettings:r,alertText:n,isOldBalloon:!0,bbCodeVersion:e.Settings.bbcode_v,balloonEntityId:e.Id},n=a.createHtmlForNotAvailablePopup(n);i.showFailPopup(t,r,e,n)}}},2383:function(t,n){t.exports=function(n){this.isActionStep=function(t){return t.Type&&t.Type==n.STEP_TYPE.Action},this.isBranchStep=function(t){return t.Type&&t.Type==n.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==n.STEP_ACTION.Branch},this.isPopupStep=function(t){return t&&t.Type&&t.Type==n.STEP_TYPE.Popup},this.isSpotlightStep=function(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}},2384:function(t,n){t.exports=function(l,s,c){this.activateSurvey=function(t,n,e,r,a,i,o){var u=c.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,t={tutorialId:t.Id,eventSource:n,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:s._currentPlayGUID};l.activateSurvey(r,u,a,e,t)}}},2385:function(t,n){t.exports=function(e,r,a,i,o,n){var t=this;function u(t,n){null!=(n=n.wt).Id&&r.safeStartAudit(t,n)}t.auditSafeStartStatus=u,t.redirect=function(t,n){i.currentStep=0,i.state=e.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=n.tutorialIndex,o.storeStateInCookie(),a.redirect(t)},t.auditStayButtonClicked=function(t){u(e.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function(t){t={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:r._currentPlayGUID,playInitiator:r._currentPlayInitiator,status:e.SAFESTART_ACTION.ErrorShown},n.send(t)},t.auditSafeStartFirstStatus=function(t,n){u(t,n),function(t){for(var n=0;n<t.checkStepExistsTrace.length;n++)r.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[n].stepIndex],t.checkStepExistsTrace[n].stepStatus)}(n)}}},2386:function(t,n){t.exports=function(a,i,o){this.migrateSiteConfigData=function(t){for(var n=a.getWalkthrus(),e={},r=0;r<n.length;r++)o.fixSteps(n[r],t),e[n[r].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",e)}}},2387:function(t,n){t.exports=function(r,a,i,t,o,u){var n=this;n.register=function(){t.registerDataAppender(n)},n.append=function(t,n){var e;o.isNewLanguage()&&r.setWalkthrus([]),e=n[i.Tutorial],n=(n=r.getWalkthrus()).concat(e),r.setWalkthrus(n),o.isNewLanguage()&&u.setDeployables(r.getWalkthrus()),a.migrateSiteConfigData(t.SiteConfig)}}},2388:function(t,n){t.exports=function(c,f,p,d,h,t){var n=this;n.register=function(){t.registerConverter(n)},n.convert=function(t,n){for(var e=p.get(0).getAll(),r={},a=0;a<e.length;a++)for(var i=e[a].Steps,o=0;o<i.length;o++){var u,l,s=i[o];!f.isActionStep(s)||(l=d.getSettingsValue(s.Settings,"action",null))&&"setWalkMeData"==l.actionType&&(!t[u=(s=l.arguments).dataKey]||(l=s.dataDuration)>=c.ONE_DAY_SECONDS&&(r[u]?l>r[u].Expiry&&(r[u].Expiry=l):void 0!==(s=t[u])&&(r[u]=l={Value:s,Expiry:l})))}for(u in r)r.hasOwnProperty(u)&&h.saveData(u,r[u].Value,parseInt(r[u].Expiry),n)}}},2389:function(t,n){t.exports=function(e,r,a,t,n){function i(t,n){n.isDuringLanguageChange?e.stopTutorial(void 0,!0,!0):(n.isDestroyingAll&&(e.setMember("tutorialRunSettingsMap",{}),e.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),r.releaseAllEventBindings(),e.cleanCurrentStepResources())}this.init=function(){t.on(n.EVENTS.CallReleaseElementsFromBalloons,i)}}},2390:function(t,n){t.exports=function(r,t){var a,n=this;function e(t,n,e){r.isPopupStep(n)&&(a=document.activeElement,e.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,n){r.isPopupStep(n)&&a&&(a.focus(),a=null)}n.register=function(){t.register(n)},n.bindEvents=function(){_walkmeInternals.bind("NewStepShown",e),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}},2391:function(t,n){t.exports=function(e){this.append=function(t){var n=e.getCurrentWalkthru();n&&(t.WalkthruId=n.TutorialId,(n=e.getCurrentStep())&&(t.StepIndex=n.StepIndex))}}},2392:function(t,n){t.exports=function(t,e){this.init=function(){wmjQuery.each(t.get(),function(t,n){n.addAppender(e)})}}},2393:function(t,n){t.exports=function(r,a,i,o){this.handle=function(t,n){var e;a.isInPlayMode()?(e={step:t.Steps[n],tutorial:t},r.raiseEvent("WalkthruFailedToStart",e)):(n=o.getSiteConfigByTutorialId(t.Id),e=i.getSettingsValue(t.Settings,"cantPlayAlert",n.TutorialCantPlayText),_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(n,e,t))}}},2394:function(t,n){t.exports=function(r,t,e,i,a,o,u,l,n,s,c,f,p,d,h,k,v,m,g,S,w){this.register=function(){r.addActions(y)};var y={playWt:function(e,r,a){function t(){try{var t=e.playWtFromBeginning?0:l.getStepIndex(e.StepId,e.wtId);-1==t?(n=S.formatString("Step with id: {0} was not found in walkthru with id {1}",e.StepId,e.wtId),k.customerLog(n)):WalkMeAPI.startWalkthruById({id:parseInt(e.wtId),fromStep:t,playInitiator:{type:r,objectId:a.Id}})}catch(t){var n=S.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",e.wtId,e.StepId,w.toJSON(t));k.customerLog(n)}}this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){g.afterStepsLoaded(e.wtId,t)}},redirect:function(n){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){f.stepWasCompleted();var t=n.redirectUrl;u.redirect(t)||(f.stepWasCompleted(),f.executeTutorialNextStep())}},refresh:function(){this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),c.storeStateInCookie(),h.libSetTimeout(function(){location.reload(!0)},200)},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function(e,t,r){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=e.wtId,!!n.getWalkthruById(t);var t},this.doAction=function(){var t,n=e.wtId;1==e.returnToWt?(t=l.getStepIndex(e.StepId,r.TutorialId),p.makeSplit([n],t,!1,e.startingStepId)):p.makeSplit([n],t,!0,e.startingStepId)},this.getGoToData=function(){return{tutorialIndex:n.getWalkthruIndexByWalkthruId(e.wtId),stepIndex:0}}},stopWt:function(){this.type="stopWt",this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),t.stopTutorial()}},playStep:function(e,t,r){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=e.StepId,n=r.TutorialId,-1!=l.getStepIndex(t,n);var t,n},this.doAction=function(){var t=e.StepId,t=l.getStepIndex(t,r.TutorialId);f.stepWasCompleted(),s.currentStep<t&&f.fillMissingStepAudits(s.currentWalkthru,s.currentStep+1,t,i.STEP_STATUS.SkippedByActionStep),s.currentStep=t,f.executeCurrentStep()},this.getGoToData=function(){var t=e.StepId,t=l.getStepIndex(t,r.TutorialId);return{tutorialIndex:n.getWalkthruIndexByWalkthruId(r.TutorialId),stepIndex:t}}},openPlayerMenu:function(t,n,e){this.isValid=function(){return null!=window.WalkMePlayerAPI},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{f.stepWasCompleted(),r.get("openMenu",t,n,e).doAction()}catch(t){k.error(t,"Failed opening player menu")}f.executeTutorialNextStep()}},waitForCond:function(r){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){s.state=i.WALKTHRU_STATE.WAITING_FOR_CONDITION,c.storeStateInCookie();var n=s.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:C,elementName:"Wait for condition step: "+n.StepTitle},e=v.createOld(t),t=r.condition;e.onValueChanged(function(t){d.isDebuggerOnWindow()&&o.deprecatedRaiseEvent(i.EVENTS.ActionConditionEvaluated,n),t&&(f.stepWasCompleted(),f.executeTutorialNextStep())}),e.evaluateAsync(t),f.addCurrentStepResource(e)}},delay:function(t){this.isValid=function(){return!0},this.doAction=function(){return c.storeStateInCookie(),h.playSetTimeout(function(){f.stepWasCompleted(),f.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function(t,n,e){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action;var r={stepId:e.Id,tutorialId:e.TutorialId};this.doAction=function(){var t=a.keysConfig.passOwnership.newWindowTime;if(a.saveData(t.key,(new Date).getTime(),t.expiry),!m.get().enabled())return k.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void f.tutorialFinished();m.get().determineOwnership(r)}},setWalkMeData:function(n){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(n.dataDuration,i.COOKIE_LIFE_2_YEARS);e.saveData(n.dataKey,n.dataValue,t),f.stepWasCompleted(),f.executeTutorialNextStep()},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action}},C="superstep"}},2395:function(t,n){t.exports=function(e,r,a){var i;this.redirect=function(t,n){return!!e.canRedirect(t,n)&&(a.storeStateInCookie(),i=r.libSetTimeout(function(){e.redirect(t)},200),!e.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function(t,n){return e.canRedirect(t,n)&&!e.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function(){i&&i.clear()}}},2396:function(t,n){t.exports=function(h,i,t,k,v,n,m,g,S,w,y,C,o,I,u,r,l,W,b,s,M){var A=this;A.getDelay=function(){return n.get().Settings.keyPressedNextStepDelay||e};var e=2e3,a=[];function T(t,e,n,r,a){var i=void 0;r.push(x(t,0,["change"],n,1e3,{change:i=a?function(t){var n=e.Settings.complexHtml;return(t="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex]).value==n.val||t.text==n.txt}:i}))}function x(t,n,r,a,i,e){C.state=S.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=E(function(t,n){k.customerLog("Step event triggered.");var e=-1!==wmjQuery.inArray("click",r);return P(a,i,e,t,n),!0}),u=0;u<r.length;u++){var l=function(n){return function(t){n&&!n(t)||o(t)}}(e&&e[r[u]]);D(t,r[u]+".mt",l)}return function(t){return o(null,t)}}function E(r){var a=!1;return function(t,n){var e;return a||(e=r(t,n),a=!0),e}}function D(t,n,e){r.bind(t,n,e),a.push({element:t,eventName:n})}function P(t,n,e,r,a){u.releaseBalloons(),e&&(i.shouldHandlePageAsFramesets()&&i.checkIfAnyFrameIsUnloaded(n),null!=r&&s.setIgnoreNextBeforeUnload(function(t){if(l.isIE()){var n=!1;if("a"==t[0].nodeName.toLowerCase()?n=t:0<(t=t.parents("a")).length&&(n=mtjQuery(t[0])),n&&n.attr("href")&&0==n.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(r.target)))),C.state=S.WALKTHRU_STATE.RUNNING,o.storeStateInCookie(),y.stepWasCompleted(null==a),null!=a&&(C.currentStep=a),t&&null==a?y.tutorialFinished():h.playSetTimeout(function(){y.executeTutorialNextStep()},n)}A.handle=function(t,n,e,r,a,i){var o=C.getStep(e),u=!1,l=!!o.LinkedTutorialIds,s=[];l&&(p=o.LinkedTutorialIds.split(";"),y.isTutorialIdsExist(p)?(k.customerLog("This is a branched step. Branched walk-thru's: "+o.LinkedTutorialIds),s.push(function(t,n,e){C.state=S.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,y.releaseEvents(t,n);for(var r=E(function(){k.customerLog("Clicked the branched walk-thru."),y.releaseEvents(t,n),I.makeSplit(e)}),a=E(function(){y.releaseEvents(t,n)}),i=0;i<n.length;i++)D(t,n[i]+".mt",r);return function(){return a()}}(t,["click","mousedown"],p))):(k.customerLog("Branch walk-thru id, not found: "+o.LinkedTutorialIds),l=!1));var c,f=!1,e=!1,p=y.getNextStepIncludingSplit(),d=null==p;return y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(C.state=S.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,d||(p.IsSkippable||b.getSettingsValue(p.Settings,"skipNotExists",!1)||y.getPlayConditionMode(p)!=S.playConditionModes.STICKY_CONDITION&&!y.checkPlayStepCondition(p)||b.getSettingsValue(p.Settings,"fake",!1))&&-2==y.checkIfStepExistsWithSkippables(p.TutorialIndex,p.StepIndex,void 0,void 0,void 0,S.CHECK_STEP_MODE.Normal)?e=!0:f=!0),y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.NOTHING)?d||(u=!0):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.HOVER)?s.push(x(t,0,c=["mouseenter"],d,500)):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.CLICK)&&!l?(c=w.get(),s.push(x(t,0,c,d,1e3))):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)?(p=A.getDelay(n),c=["keydown","paste","change"],l={},v.isFeatureEnabled("wmAccessibility")&&(l.keydown=function(t){return 9!=t.which&&16!=t.which}),s.push(x(t,0,c,d,p,l))):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(C.state=S.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,y.setMember("dontContinueTutorial",!0)):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.DURATION)?o.durationHandler=h.playSetTimeout(function(){y.stepWasCompleted(),y.executeTutorialNextStep()},1e3*o.Duration):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?T(t,n,d,s,!1):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?T(t,n,d,s,!0):y.isStepTrigger(o.End,S.WALKTHRU_STEP_TRIGGER.SWIPE)&&s.push(x(t,0,c=["swipe"],d,500)),o.Settings.additionalTriggers&&(g.deprecatedRaiseEvent(S.EVENTS.Walkthrus.StepAdditionalTriggerSet,o),i={elementName:n.StepTitle||n.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0,ownerChain:i},(i=W.createOld(i)).onValueChanged(function(t){g.deprecatedRaiseEvent(S.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,o),t&&(y.setMember("dontContinueTutorial",!1),o.durationHandler&&(o.durationHandler.clear(),o.durationHandler=null),t=m.containsFuncName(o.Settings.additionalTriggers,["ElementClicked"]),P(d,1e3,t))}),i.evaluateAsync(o.Settings.additionalTriggers),y.addCurrentStepResource(i)),{executeNextStep:u,clearElementEventsFuncs:s,buttons:{nextButton:f,doneButton:e,backButtonStepIndex:M.handleStepIndex(o,a,r)}}},A.releaseAllEventBindings=function(){for(var t=0;t<a.length;t++)try{var n=a[t].element,e=a[t].eventName;r.unbind(n,e)}catch(t){}a.length=0},function(){}.apply(null,arguments)}},2397:function(t,n){t.exports=function(a,i,o,u){this.handleStepIndex=function(t,n,e){var r;return 0<t.StepIndex&&a.isStepTrigger(t.End,i.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(null==n||(n=o.getStep(n),!u.isActionStep(n)))&&(0<=(r=a.checkIfStepExistsWithSkippables(e,t.StepIndex-1,0,-1,void 0,i.CHECK_STEP_MODE.Normal))&&(t=o.getStep(r),a.isStepTrigger(t.End,i.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(r=-1)),o.lastBackButtonStepIndex=r),r}}},2398:function(t,n){t.exports=function(t,r,a){this.findFirstStep=function(t,n,e){return a.checkIfStepExistsWithSkippables(t,n=n||0,void 0,void 0,e,r.CHECK_STEP_MODE.Normal)},function(){}.apply(null,arguments)}},2399:function(t,n){t.exports=function(r,a,i,t,n){function e(t,n){var e=r.mapBbcodeInitiator(n);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})})}this.register=function(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:n.EVENTS.BBCodeStartActionClicked.Walkthru,activator:e})}}},2400:function(t,n){t.exports=function(a,t,i,o,u){function n(t,n){var e,r;-1==t&&a.getCurrentWalkthru()&&(i.stop(),e=u.SURVEY_START_EVENTS.BbCodeClicked,t=(r=a.getCurrentWalkthru()).Settings.survey&&r.Settings.survey.surveyId,_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(r,e,o.mapBbcodeInitiator(n),t,"always"))}this.register=function(){t.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:u.EVENTS.BBCodeStartActionClicked.Survey,activator:n})}}},2401:function(t,n){t.exports=function(n,t){this.isEnabled=function(t){return n.isPopupStep(t)},this.findElement=function(){return t.get()}}},2402:function(t,n){t.exports=function(n){this.isEnabled=function(t){return n.isActionStep(t)},this.findElement=function(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}},2403:function(t,n,e){!function(P){t.exports=function(t,n,e,r,a,i,o,u,l,s,c,f,p,d,h,k,v,m,g,S,w,y,C,I,W,b){var M,A,T,x;function E(){D(A)}function D(t){wmjQuery.each(t,function(t,n){n.register()})}this.init=function(){D(M),W.one(C.EVENTS.DATA_FILES_LOADED,E)},this.postDataFileLoaded=E,T=P.get("AutoStartHelper"),x=P.get("AutoStartTypes"),M=[e],(A=[r,n,i,l,p,d,S,w,P.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(C.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),A.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),A.push({register:function(){u.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),A.push({register:function(){s.init()}}),A.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),A.push({register:function(){x.addDeployable(c.Tutorial,f,c.BusinessSolution)}}),A.push({register:function(){g.register(v),g.register(m)}}),A.push({register:function(){k.addRestorer("wt",h,!0)}}),A.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),A.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),A.push({register:function(){y.addOwnershipManager(C.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,I,!0)}}),A.push({register:function(){T.addAutoStartHelper(b,c.Tutorial)}})}}.call(this,e(2))},2404:function(t,n){t.exports=function(i,o,u,r,e,l,s,a,c,f,t,n,p,d,h,k){var v,m=this;function g(t){var n=h.getCurrent()==o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e=n?h.getCurrentStepData():function(){var t=k.getData(o.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,void 0,c.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:a.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),e=r.evaluateOwnership(e.step,e.walkthruId,n);return n||t||function(){switch(e){case o.PASS_OWNERSHIP.EvaluateOwnership.Owner:u.stepWasCompleted(),u.executeTutorialNextStep();break;case o.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:l.state!=o.WALKTHRU_STATE.PASSING_OWNERSHIP&&l.currentStep++,l.state=o.WALKTHRU_STATE.PASSING_OWNERSHIP,s.storeStateInCookie()}}(),e}m.walkthruStarted=function(r,a){return h.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,(n=a,{walkthruId:(t=e.getWalkthruByIndex(r)).Id,step:t.Steps[n]}),function(){return t=r,n=a,(e=i.get().optimizedDetermineOwnership())||(l.state=o.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,l.currentWalkthru=t,l.currentStep=n,s.storeStateInCookie(),u.terminateTutorial(),l.state=o.WALKTHRU_STATE.NOT_RUNNING,i.get().reset()),e;var t,n,e});var t,n},m.evaluateOwnership=function(t,n){return n?h.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,n,function(){return g(t)}):g(t)},m.evaluateOwnershipByPeeking=function(){return(p.isFeatureEnabled("po_peek")||p.isFeatureEnabled("passOwnership"))&&r.isPassOwnershipStep(n.peekNextCookieStep())},m.gainedOwnership=function(t,n,e){v("walkthru is gaining ownership with state "+l.state,3),e&&(n=n,t?(_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),d.resumeTimeoutsArray("playTimeouts")):(v("ownership granted to: "+n,3),f.restoreStateFromCookie(c.getUserGuid())))},m.lostOwnership=function(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},v=t.wrapCustomerLog(o.PASS_OWNERSHIP.LOG_FEATURE)}},2405:function(t,n){t.exports=function(i,o,u,l){this.peekNextCookieStep=function(t){try{t=t||0;var n=i.getData(o.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},l.getAllUserGuids()[0]),e=n[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],r=u.getWalkthruById(e),a=n[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME];return r.Steps[a+t]}catch(t){return null}}}},2406:function(t,n){t.exports=function(r){function a(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==r.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=a,this.evaluateOwnership=function(t,n,e){return e&&!a(t)?r.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function(t,n){if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(n),0;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(t){return 1}}(t,n)?r.PASS_OWNERSHIP.EvaluateOwnership.Owner:r.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}},2407:function(t,n){t.exports=function(o,u,l,s,c){var f,p;this.clearCache=function(){p=f=void 0},this.checkShouldAutoStart=function(t,n,e){return t!=o.Tutorial||(r=n,a=e,i=u.getWalkthruIndexByWalkthruId(r.Id),t=l.checkTutorialSkipFirstStepCondition(i),n=l.checkTutorialRedirectCondition(i,!1),e=r.IsWelcomeStep,!((r=f=f||s.get()).state==c.WALKTHRU_STATE.RUNNING&&r.step==t)&&(null==p?p=r.state==c.WALKTHRU_STATE.PAUSED||r.state==c.WALKTHRU_STATE.NOT_RUNNING||!a&&l.checkIfStepExistsWithSkippables(r.tutorial,r.step,void 0,void 0,void 0,c.CHECK_STEP_MODE.Sandbox,"- Engagement")<0:p)&&(n&&e||l.checkIfStepExistsWithSkippables(i,t,void 0,void 0,void 0,c.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=t&&!n));var r,a,i}}},2408:function(t,n){t.exports=function(n,e,r){this.get=function(){var t=n.getPersistenceData();return r.state==e.WALKTHRU_STATE.PAUSED&&(t.state=r.state),t}}},2409:function(t,n){t.exports=function(n,e,r){this.isRunning=function(){var t=n.get();return t.state==r.WALKTHRU_STATE.PAUSED||t.state==r.WALKTHRU_STATE.NOT_RUNNING||e.checkIfStepExistsWithSkippables(t.tutorial,t.step,void 0,void 0,void 0,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0?wmjQuery.Deferred().reject():wmjQuery.when()}}},2410:function(t,n){t.exports=function(e,r){this.fixAnchorTagsOnBeforeUnload=function(){var t,n;e.isIE()&&((t=mtjQuery("a[href^='javascript:']")).off(n="click.walkme.ignoreUnload"),t.on(n,function(){r.setIgnoreNextBeforeUnload(!0)}))}}},2411:function(t,n){t.exports=function(a,i,t){function n(t){t=parseInt(t);for(var n=a.stepPlayHistory,e=0;e<n.length;e++){var r=i.getStepById(n[e]);if(r&&r.StepIndex==t)return!0}return!1}this.register=function(){t.addSupportedFunction("isStepPlayed",n)}}},2412:function(t,n){t.exports=function(a,e,i,o,u,l,s){this.register=function(){wmjQuery.each(t,function(t,n){e.register(t,n.handler,n.params)})};var t={};function r(t,n){for(var e=parseInt(n.funcArgs.StepId),r=l.stepPlayHistory,a=0;a<r.length;a++)if(r[a]==e)return void t.setValue(!0);t.setValue(!1)}function c(t,n){for(var e=parseInt(n.funcArgs.StepId,10),r=0;r<l.stepCompletedHistory.length;r++)if(l.stepCompletedHistory[r]==e)return void t.setValue(!0);t.setValue(!1)}function f(t,n){var e=parseInt(n.funcArgs.StepId),r=parseInt(n.funcArgs.TutorialId),n=i.getWalkthruById(r),r=o.getStepIndex(e,r);n&&-1<r?(r=n.Steps[r],t.setValue(!1!==a.findElement(r,!1))):t.setValue(!1)}function p(t,n){var e=parseInt(n.funcArgs.StepId),r=parseInt(n.funcArgs.TutorialId),n=i.getWalkthruIndexByWalkthruId(r);-1<(r=o.getStepIndex(e,r))&&-1<n&&0<=u.checkIfStepExistsWithSkippables(n,r,void 0,void 0,void 0,s.CHECK_STEP_MODE.Sandbox)?t.setValue(!0):t.setValue(!1)}function d(t,n){var e=parseInt(n.funcArgs.StepId),r=parseInt(n.funcArgs.TutorialId),n=i.getWalkthruById(r),r=o.getStepIndex(e,r);n&&-1<r?(r=n.Steps[r],t.setValue(!1!==a.findElement(r,!0))):t.setValue(!1)}function h(t,n,e){t(n,e),n.setValue(!n.getValue())}t.StepPlayed={handler:r},t.StepNotPlayed={handler:function(t,n){h(r,t,n)}},t.StepCompleted={handler:c},t.StepNotCompleted={handler:function(t,n){h(c,t,n)}},t.StepExists={handler:f,params:{editorPreview:!0}},t.StepNotExists={handler:function(t,n){h(f,t,n)},params:{editorPreview:!0}},t.StepCanPlay={handler:p},t.StepCannotPlay={handler:function(t,n){h(p,t,n)}},t.StepIsVisible={handler:d,params:{editorPreview:!0}},t.StepIsNotVisible={handler:function(t,n){h(d,t,n)},params:{editorPreview:!0}}}},2413:function(t,n){t.exports=function(o,u,l){this.auditWalkthruStart=function(t,n,e,r,a){var i=t.Steps;u.postEvent(u.EVENT_TYPES.Play,{type:u.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:l.map(n),oRequestedSubObject:i[e].Id,oActualSubObject:i[r].Id})},function(){}.apply(null,arguments)}},2414:function(t,n){t.exports=function(s,c,f,p,r,d,h,k,v,n){var m,g=this;function S(t){null!=g._currentPlayGUID&&0!=g._currentPlayGUID.length||(g._currentPlayGUID=n.generateNewPlayGuid(t))}g.safeStartAudit=function(t,n){try{var e={tutorialId:n.TutorialId,tutorialName:n.Name,playGuid:g._currentPlayGUID,playInitiator:g._currentPlayInitiator,status:t};r.send(e)}catch(t){s.error(t)}},g.auditStep=function(n,e,r){r==c.STEP_STATUS.SkippedByActionStep||(l=r==c.STEP_STATUS.SkippedStartedFromBiggerStep?c.EVENTS.Walkthrus.NewSkippedStep:c.EVENTS.Walkthrus.CheckNewStep,v.deprecatedRaiseEvent(l,e));var t,a,i,o,u,l=n.Steps.length;if(e.TutorialId<0)m(f.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",e.Id,e.TutorialId),3);else try{try{return t=e,a=n,i=l,o=r,u=h.getSettingsValue(t.Settings,"action",""),S(a.TutorialId),p.postEvent(p.EVENT_TYPES.Play,{type:p.EVENT_APPS.Step,oId:t.Id,oName:t.StepTitle||"",aType:u?d.map(u.actionType):"",aAppType:u?k.map(u.actionType):"",oType:t.Type,indx:t.StepIndex+1,owId:a.TutorialId,owName:a.Name,owType:p.EVENT_APPS.Walkthru,total:i,status:o,pId:g._currentPlayGUID})}catch(t){return s.error(t,"Failed auditStep: stepId="+e.Id+", wtId="+n.TutorialId+", status="+r+", pId="+g._currentPlayGUID),!0}}catch(t){return s.error(t),t}},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=S,function(){m=s.wrapCustomerLog(c.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}},2415:function(t,n){t.exports=function(t,n,e,r){this.register=function(){t.add(e.ENTITY_TYPE.step,n.EVENT_SENDER_EVENT_APPS.Step,function(){return r._currentPlayGUID})}}},2416:function(t,n){t.exports=function(r,a){this.calculate=function(t,n){var e=(t.Type===a.stepType.Simple?function(t){return t=t.End,-1<wmjQuery.inArray(a.stepTrigger.Button.toString(),t.split(","))?{next:!0}:{}}:function(t){var t=t.Settings&&t.Settings.popupStepButtons||[],n={};return r.foreach(t,function(t){t=i[t.action],n[t]=!0}),n})(t);return n&&wmjQuery.extend(e,(t={},0<(n=n).passedVisibleSteps&&(t.back=!0),n.passedVisibleSteps<n.totalVisibleSteps&&(t.next=!0),void 0!==n.passedVisibleSteps&&n.passedVisibleSteps===n.totalVisibleSteps&&(t.done=!0),t)),e};var i={},t=a.POPUP_BUTTON_ACTIONS;i[t.NextDone]="next",i[t.Start]="start",i[t.Back]="back",i[t.Cancel]="cancel"}},2417:function(t,n,e){!function(S){t.exports=function(u,l,s,c,f,p,d,h,k,v,m,g){this.showStep=function(t,n,e){var r=s.secureEvalJSON(t);c.fixStep(r,0,h.get());var a,i=l.findElement(r);if(u.customerLog("element:",5),u.customerLog(i,5),!i)return!1;(t=f.getComplexHtmlElements(r,i))&&(i=t.elements,a=t.parentElement),r.DesignTemplateId||r.DesignTemplatePlaceholderConfigs&&0!==r.DesignTemplatePlaceholderConfigs.length||(r.DesignTemplatePlaceholderConfigs=m.createPlaceHolderConfigs(g.templateEntityType.balloon,r.StepTitle,r.StepText));var o=S.create("Balloon",{element:i,parentElement:a,forceEmbedBalloonInIframe:n,positionHelper:p,stepSettings:r.Settings,visibilityFilter:p.getVisibleFilterKey(r),text:{title:r.StepTitle,content:r.StepText,subText:function(t){if(!t||!t.hasOwnProperty("passedVisibleSteps"))return"";var n=h.get().StepsInfoText;return n?(n=n.replace("{0}",t.passedVisibleSteps)).replace("{1}",t.totalVisibleSteps):""}(e)},position:r.Position,data:{stepId:r.Id,type:r.Type},buttons:v.calculate(r,e),configuration:r.Configuration,logger:u,drawer:d.getBalloonDrawer(r.Configuration,r),isViewStep:!0,siteConfig:h.get(),bindButtonsFunc:S.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:r.DesignTemplatePlaceholderConfigs});return k.add(o),o.Show(!0,function(){o.SetTimeoutOn()}),o}}}.call(this,e(2))}}]);